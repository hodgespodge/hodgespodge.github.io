import{S as y,i as C,s as x,e as g,c as p,a as m,d as _,b as u,g as b,E as d,a5 as E,w as q,x as S,y as k,q as h,o as v,B as D,T as L,n as V,p as A,D as I}from"./index-f48ee692.js";import{p as T}from"./index-304adc66.js";import"./post-bbcb2a87.js";import"./BonziButton-c4ce5153.js";import"./index-5ca6b76d.js";import"./preload-helper-8d779459.js";function P(r){let e;return{c(){e=g("div"),this.h()},l(n){e=p(n,"DIV",{class:!0}),m(e).forEach(_),this.h()},h(){u(e,"class","svelte-jbdn3g")},m(n,a){b(n,e,a),r[3](e)},p:d,i:d,o:d,d(n){n&&_(e),r[3](null)}}}function j(r,e,n){let{page:a}=e,{viewport:s}=e,l,t;function i(){for(l==null||l.cancel();t.firstChild;)t.firstChild.remove();l=T.exports.renderTextLayer({container:t,textContentStream:a.streamTextContent(),viewport:s})}function o(f){E[f?"unshift":"push"](()=>{t=f,n(0,t)})}return r.$$set=f=>{"page"in f&&n(1,a=f.page),"viewport"in f&&n(2,s=f.viewport)},r.$$.update=()=>{r.$$.dirty&5&&t&&s&&i()},[t,a,s,o]}class B extends y{constructor(e){super(),C(this,e,j,P,x,{page:1,viewport:2})}}function w(r){let e,n;return e=new B({props:{page:r[0],viewport:r[1]}}),{c(){q(e.$$.fragment)},l(a){S(e.$$.fragment,a)},m(a,s){k(e,a,s),n=!0},p(a,s){const l={};s&1&&(l.page=a[0]),s&2&&(l.viewport=a[1]),e.$set(l)},i(a){n||(h(e.$$.fragment,a),n=!0)},o(a){v(e.$$.fragment,a),n=!1},d(a){D(e,a)}}}function N(r){let e,n,a,s,l,t=r[2]&&w(r);return{c(){e=g("div"),n=g("canvas"),t&&t.c(),this.h()},l(i){e=p(i,"DIV",{class:!0});var o=m(e);n=p(o,"CANVAS",{width:!0,height:!0,class:!0}),m(n).forEach(_),t&&t.l(o),o.forEach(_),this.h()},h(){var i,o;u(n,"width",a=(i=r[1])==null?void 0:i.width),u(n,"height",s=(o=r[1])==null?void 0:o.height),u(n,"class","svelte-1aqu9t5"),u(e,"class","svelte-1aqu9t5")},m(i,o){b(i,e,o),L(e,n),r[4](n),t&&t.m(e,null),l=!0},p(i,[o]){var f,c;(!l||o&2&&a!==(a=(f=i[1])==null?void 0:f.width))&&u(n,"width",a),(!l||o&2&&s!==(s=(c=i[1])==null?void 0:c.height))&&u(n,"height",s),i[2]?t?(t.p(i,o),o&4&&h(t,1)):(t=w(i),t.c(),h(t,1),t.m(e,null)):t&&(V(),v(t,1,1,()=>{t=null}),A())},i(i){l||(h(t),l=!0)},o(i){v(t),l=!1},d(i){i&&_(e),r[4](null),t&&t.d()}}}function R(r,e,n){let{page:a}=e,{viewport:s}=e,{render_text_layer:l}=e,t,i;async function o(){i==null||i.cancel(),await I(),i=a.render({canvasContext:t.getContext("2d"),viewport:s});try{await i.promise}catch(c){if(!(c instanceof T.exports.RenderingCancelledException))throw c}}function f(c){E[c?"unshift":"push"](()=>{t=c,n(3,t)})}return r.$$set=c=>{"page"in c&&n(0,a=c.page),"viewport"in c&&n(1,s=c.viewport),"render_text_layer"in c&&n(2,l=c.render_text_layer)},r.$$.update=()=>{r.$$.dirty&10&&s&&t&&o()},[a,s,l,t,f]}class M extends y{constructor(e){super(),C(this,e,R,N,x,{page:0,viewport:1,render_text_layer:2})}}export{M as default};
