var Ve=Object.defineProperty,Ye=Object.defineProperties;var Ke=Object.getOwnPropertyDescriptors;var we=Object.getOwnPropertySymbols;var Je=Object.prototype.hasOwnProperty,Qe=Object.prototype.propertyIsEnumerable;var ae=(z,r,L)=>r in z?Ve(z,r,{enumerable:!0,configurable:!0,writable:!0,value:L}):z[r]=L,te=(z,r)=>{for(var L in r||(r={}))Je.call(r,L)&&ae(z,L,r[L]);if(we)for(var L of we(r))Qe.call(r,L)&&ae(z,L,r[L]);return z},oe=(z,r)=>Ye(z,Ke(r));var Mt=(z,r,L)=>(ae(z,typeof r!="symbol"?r+"":r,L),L),le=(z,r,L)=>{if(!r.has(z))throw TypeError("Cannot "+L)};var k=(z,r,L)=>(le(z,r,"read from private field"),L?L.call(z):r.get(z)),at=(z,r,L)=>{if(r.has(z))throw TypeError("Cannot add the same private member more than once");r instanceof WeakSet?r.add(z):r.set(z,L)},mt=(z,r,L,u)=>(le(z,r,"write to private field"),u?u.call(z,L):r.set(z,L),L),ce=(z,r,L,u)=>({set _(f){mt(z,r,f,L)},get _(){return k(z,r,u)}}),ht=(z,r,L)=>(le(z,r,"access private method"),L);import{S as SvelteComponent,i as init,s as safe_not_equal,H as create_slot,L as update_slot_base,M as get_all_dirty_from_scope,N as get_slot_changes,q as transition_in,o as transition_out,Q as component_subscribe,P as createEventDispatcher,r as setContext,a6 as onDestroy,aa as not_equal,ab as handle_promise,l as empty,g as insert_hydration,ac as update_await_block_branch,d as detach,F as getContext,E as noop,w as create_component,x as claim_component,y as mount_component,n as group_outros,B as destroy_component,p as check_outros,e as element,t as text,k as space,c as claim_element,a as children,h as claim_text,m as claim_space,b as attr,f as set_style,T as append_hydration,ad as set_input_value,J as listen,ae as to_number,j as set_data,C as assign,V as query_selector_all,z as get_spread_update,A as get_spread_object,X as exclude_internal_props}from"./index-f48ee692.js";import{P as Post}from"./post-bbcb2a87.js";import{a as Button,B as BonziButton}from"./BonziButton-6a699db8.js";import{r as readable,w as writable,_ as __vitePreload}from"./preload-helper-780d7a89.js";import{b as base}from"./paths-396f020f.js";class Intro extends SvelteComponent{constructor(r){super(),init(this,r,null,null,safe_not_equal,{})}}var workerUrl="/_app/immutable/assets/pdf.worker.min-99732130.js",commonjsGlobal=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function getAugmentedNamespace(z){if(z.__esModule)return z;var r=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(z).forEach(function(L){var u=Object.getOwnPropertyDescriptor(z,L);Object.defineProperty(r,L,u.get?u:{enumerable:!0,get:function(){return z[L]}})}),r}function commonjsRequire(z){throw new Error('Could not dynamically require "'+z+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}},__viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$4=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(r,L){module.exports=L()})(globalThis,()=>(()=>{var __webpack_modules__=[,(z,r,L)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.VerbosityLevel=r.Util=r.UnknownErrorException=r.UnexpectedResponseException=r.UNSUPPORTED_FEATURES=r.TextRenderingMode=r.StreamType=r.RenderingIntentFlag=r.PermissionFlag=r.PasswordResponses=r.PasswordException=r.PageActionEventType=r.OPS=r.MissingPDFException=r.LINE_FACTOR=r.LINE_DESCENT_FACTOR=r.InvalidPDFException=r.ImageKind=r.IDENTITY_MATRIX=r.FormatError=r.FontType=r.FeatureTest=r.FONT_IDENTITY_MATRIX=r.DocumentActionEventType=r.CMapCompressionType=r.BaseException=r.AnnotationType=r.AnnotationStateModelType=r.AnnotationReviewState=r.AnnotationReplyType=r.AnnotationMode=r.AnnotationMarkedState=r.AnnotationFlag=r.AnnotationFieldFlag=r.AnnotationEditorType=r.AnnotationEditorPrefix=r.AnnotationEditorParamsType=r.AnnotationBorderStyleType=r.AnnotationActionEventType=r.AbortException=void 0,r.arrayByteLength=st,r.arraysToBytes=dt,r.assert=h,r.bytesToString=F,r.createPromiseCapability=pt,r.createValidAbsoluteUrl=T,r.escapeString=Tt,r.getModificationDate=rt,r.getVerbosityLevel=nt,r.info=ct,r.isArrayBuffer=Ot,r.isArrayEqual=Zt,r.isAscii=Rt,r.objectFromMap=et,r.objectSize=ot,r.setVerbosityLevel=V,r.shadow=I,r.string32=Z,r.stringToBytes=B,r.stringToPDFString=Et,r.stringToUTF16BEString=Ft,r.stringToUTF8String=Xt,r.unreachable=j,r.utf8StringToString=xt,r.warn=bt,L(2);const u=[1,0,0,1,0,0];r.IDENTITY_MATRIX=u;const f=[.001,0,0,.001,0,0];r.FONT_IDENTITY_MATRIX=f;const O=1.35;r.LINE_FACTOR=O;const R=.35;r.LINE_DESCENT_FACTOR=R;const $={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};r.RenderingIntentFlag=$;const D={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};r.AnnotationMode=D;const d="pdfjs_internal_editor_";r.AnnotationEditorPrefix=d;const E={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};r.AnnotationEditorType=E;const x={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};r.AnnotationEditorParamsType=x;const y={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};r.PermissionFlag=y;const v={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};r.TextRenderingMode=v;const a={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};r.ImageKind=a;const t={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};r.AnnotationType=t;const e={MARKED:"Marked",REVIEW:"Review"};r.AnnotationStateModelType=e;const o={MARKED:"Marked",UNMARKED:"Unmarked"};r.AnnotationMarkedState=o;const _={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};r.AnnotationReviewState=_;const b={GROUP:"Group",REPLY:"R"};r.AnnotationReplyType=b;const l={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};r.AnnotationFlag=l;const n={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};r.AnnotationFieldFlag=n;const s={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};r.AnnotationBorderStyleType=s;const g={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};r.AnnotationActionEventType=g;const w={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};r.DocumentActionEventType=w;const S={O:"PageOpen",C:"PageClose"};r.PageActionEventType=S;const m={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};r.StreamType=m;const P={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};r.FontType=P;const tt={ERRORS:0,WARNINGS:1,INFOS:5};r.VerbosityLevel=tt;const it={NONE:0,BINARY:1,STREAM:2};r.CMapCompressionType=it;const Q={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};r.OPS=Q;const K={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};r.UNSUPPORTED_FEATURES=K;const q={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};r.PasswordResponses=q;let G=tt.WARNINGS;function V(J){Number.isInteger(J)&&(G=J)}function nt(){return G}function ct(J){G>=tt.INFOS&&console.log(`Info: ${J}`)}function bt(J){G>=tt.WARNINGS&&console.log(`Warning: ${J}`)}function j(J){throw new Error(J)}function h(J,W){J||j(W)}function c(J){if(!J)return!1;switch(J.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function T(J,W=null,H=null){if(!J)return null;try{if(H&&typeof J=="string"){if(H.addDefaultProtocol&&J.startsWith("www.")){const _t=J.match(/\./g);_t&&_t.length>=2&&(J=`http://${J}`)}if(H.tryConvertEncoding)try{J=Xt(J)}catch{}}const gt=W?new URL(J,W):new URL(J);if(c(gt))return gt}catch{}return null}function I(J,W,H){return Object.defineProperty(J,W,{value:H,enumerable:!0,configurable:!0,writable:!1}),H}const N=function(){function W(H,gt){this.constructor===W&&j("Cannot initialize BaseException."),this.message=H,this.name=gt}return W.prototype=new Error,W.constructor=W,W}();r.BaseException=N;class U extends N{constructor(W,H){super(W,"PasswordException"),this.code=H}}r.PasswordException=U;class Y extends N{constructor(W,H){super(W,"UnknownErrorException"),this.details=H}}r.UnknownErrorException=Y;class X extends N{constructor(W){super(W,"InvalidPDFException")}}r.InvalidPDFException=X;class i extends N{constructor(W){super(W,"MissingPDFException")}}r.MissingPDFException=i;class p extends N{constructor(W,H){super(W,"UnexpectedResponseException"),this.status=H}}r.UnexpectedResponseException=p;class A extends N{constructor(W){super(W,"FormatError")}}r.FormatError=A;class C extends N{constructor(W){super(W,"AbortException")}}r.AbortException=C;function F(J){(typeof J!="object"||J===null||J.length===void 0)&&j("Invalid argument for bytesToString");const W=J.length,H=8192;if(W<H)return String.fromCharCode.apply(null,J);const gt=[];for(let _t=0;_t<W;_t+=H){const yt=Math.min(_t+H,W),St=J.subarray(_t,yt);gt.push(String.fromCharCode.apply(null,St))}return gt.join("")}function B(J){typeof J!="string"&&j("Invalid argument for stringToBytes");const W=J.length,H=new Uint8Array(W);for(let gt=0;gt<W;++gt)H[gt]=J.charCodeAt(gt)&255;return H}function st(J){if(J.length!==void 0)return J.length;if(J.byteLength!==void 0)return J.byteLength;j("Invalid argument for arrayByteLength")}function dt(J){const W=J.length;if(W===1&&J[0]instanceof Uint8Array)return J[0];let H=0;for(let yt=0;yt<W;yt++)H+=st(J[yt]);let gt=0;const _t=new Uint8Array(H);for(let yt=0;yt<W;yt++){let St=J[yt];St instanceof Uint8Array||(typeof St=="string"?St=B(St):St=new Uint8Array(St));const wt=St.byteLength;_t.set(St,gt),gt+=wt}return _t}function Z(J){return String.fromCharCode(J>>24&255,J>>16&255,J>>8&255,J&255)}function ot(J){return Object.keys(J).length}function et(J){const W=Object.create(null);for(const[H,gt]of J)W[H]=gt;return W}function lt(){const J=new Uint8Array(4);return J[0]=1,new Uint32Array(J.buffer,0,1)[0]===1}function ft(){try{return new Function(""),!0}catch{return!1}}class M{static get isLittleEndian(){return I(this,"isLittleEndian",lt())}static get isEvalSupported(){return I(this,"isEvalSupported",ft())}static get isOffscreenCanvasSupported(){return I(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas!="undefined")}}r.FeatureTest=M;const ut=[...Array(256).keys()].map(J=>J.toString(16).padStart(2,"0"));class At{static makeHexColor(W,H,gt){return`#${ut[W]}${ut[H]}${ut[gt]}`}static scaleMinMax(W,H){let gt;W[0]?(W[0]<0&&(gt=H[0],H[0]=H[1],H[1]=gt),H[0]*=W[0],H[1]*=W[0],W[3]<0&&(gt=H[2],H[2]=H[3],H[3]=gt),H[2]*=W[3],H[3]*=W[3]):(gt=H[0],H[0]=H[2],H[2]=gt,gt=H[1],H[1]=H[3],H[3]=gt,W[1]<0&&(gt=H[2],H[2]=H[3],H[3]=gt),H[2]*=W[1],H[3]*=W[1],W[2]<0&&(gt=H[0],H[0]=H[1],H[1]=gt),H[0]*=W[2],H[1]*=W[2]),H[0]+=W[4],H[1]+=W[4],H[2]+=W[5],H[3]+=W[5]}static transform(W,H){return[W[0]*H[0]+W[2]*H[1],W[1]*H[0]+W[3]*H[1],W[0]*H[2]+W[2]*H[3],W[1]*H[2]+W[3]*H[3],W[0]*H[4]+W[2]*H[5]+W[4],W[1]*H[4]+W[3]*H[5]+W[5]]}static applyTransform(W,H){const gt=W[0]*H[0]+W[1]*H[2]+H[4],_t=W[0]*H[1]+W[1]*H[3]+H[5];return[gt,_t]}static applyInverseTransform(W,H){const gt=H[0]*H[3]-H[1]*H[2],_t=(W[0]*H[3]-W[1]*H[2]+H[2]*H[5]-H[4]*H[3])/gt,yt=(-W[0]*H[1]+W[1]*H[0]+H[4]*H[1]-H[5]*H[0])/gt;return[_t,yt]}static getAxialAlignedBoundingBox(W,H){const gt=At.applyTransform(W,H),_t=At.applyTransform(W.slice(2,4),H),yt=At.applyTransform([W[0],W[3]],H),St=At.applyTransform([W[2],W[1]],H);return[Math.min(gt[0],_t[0],yt[0],St[0]),Math.min(gt[1],_t[1],yt[1],St[1]),Math.max(gt[0],_t[0],yt[0],St[0]),Math.max(gt[1],_t[1],yt[1],St[1])]}static inverseTransform(W){const H=W[0]*W[3]-W[1]*W[2];return[W[3]/H,-W[1]/H,-W[2]/H,W[0]/H,(W[2]*W[5]-W[4]*W[3])/H,(W[4]*W[1]-W[5]*W[0])/H]}static apply3dTransform(W,H){return[W[0]*H[0]+W[1]*H[1]+W[2]*H[2],W[3]*H[0]+W[4]*H[1]+W[5]*H[2],W[6]*H[0]+W[7]*H[1]+W[8]*H[2]]}static singularValueDecompose2dScale(W){const H=[W[0],W[2],W[1],W[3]],gt=W[0]*H[0]+W[1]*H[2],_t=W[0]*H[1]+W[1]*H[3],yt=W[2]*H[0]+W[3]*H[2],St=W[2]*H[1]+W[3]*H[3],wt=(gt+St)/2,Dt=Math.sqrt((gt+St)**2-4*(gt*St-yt*_t))/2,kt=wt+Dt||1,Ct=wt-Dt||1;return[Math.sqrt(kt),Math.sqrt(Ct)]}static normalizeRect(W){const H=W.slice(0);return W[0]>W[2]&&(H[0]=W[2],H[2]=W[0]),W[1]>W[3]&&(H[1]=W[3],H[3]=W[1]),H}static intersect(W,H){const gt=Math.max(Math.min(W[0],W[2]),Math.min(H[0],H[2])),_t=Math.min(Math.max(W[0],W[2]),Math.max(H[0],H[2]));if(gt>_t)return null;const yt=Math.max(Math.min(W[1],W[3]),Math.min(H[1],H[3])),St=Math.min(Math.max(W[1],W[3]),Math.max(H[1],H[3]));return yt>St?null:[gt,yt,_t,St]}static bezierBoundingBox(W,H,gt,_t,yt,St,wt,Dt){const kt=[],Ct=[[],[]];let Lt,It,Ut,Pt,Nt,qt,zt,$t;for(let Vt=0;Vt<2;++Vt){if(Vt===0?(It=6*W-12*gt+6*yt,Lt=-3*W+9*gt-9*yt+3*wt,Ut=3*gt-3*W):(It=6*H-12*_t+6*St,Lt=-3*H+9*_t-9*St+3*Dt,Ut=3*_t-3*H),Math.abs(Lt)<1e-12){if(Math.abs(It)<1e-12)continue;Pt=-Ut/It,0<Pt&&Pt<1&&kt.push(Pt);continue}zt=It*It-4*Ut*Lt,$t=Math.sqrt(zt),!(zt<0)&&(Nt=(-It+$t)/(2*Lt),0<Nt&&Nt<1&&kt.push(Nt),qt=(-It-$t)/(2*Lt),0<qt&&qt<1&&kt.push(qt))}let Ht=kt.length,jt;const Wt=Ht;for(;Ht--;)Pt=kt[Ht],jt=1-Pt,Ct[0][Ht]=jt*jt*jt*W+3*jt*jt*Pt*gt+3*jt*Pt*Pt*yt+Pt*Pt*Pt*wt,Ct[1][Ht]=jt*jt*jt*H+3*jt*jt*Pt*_t+3*jt*Pt*Pt*St+Pt*Pt*Pt*Dt;return Ct[0][Wt]=W,Ct[1][Wt]=H,Ct[0][Wt+1]=wt,Ct[1][Wt+1]=Dt,Ct[0].length=Ct[1].length=Wt+2,[Math.min(...Ct[0]),Math.min(...Ct[1]),Math.max(...Ct[0]),Math.max(...Ct[1])]}}r.Util=At;const vt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Et(J){if(J[0]>="\xEF"){let H;if(J[0]==="\xFE"&&J[1]==="\xFF"?H="utf-16be":J[0]==="\xFF"&&J[1]==="\xFE"?H="utf-16le":J[0]==="\xEF"&&J[1]==="\xBB"&&J[2]==="\xBF"&&(H="utf-8"),H)try{const gt=new TextDecoder(H,{fatal:!0}),_t=B(J);return gt.decode(_t)}catch(gt){bt(`stringToPDFString: "${gt}".`)}}const W=[];for(let H=0,gt=J.length;H<gt;H++){const _t=vt[J.charCodeAt(H)];W.push(_t?String.fromCharCode(_t):J.charAt(H))}return W.join("")}function Tt(J){return J.replace(/([()\\\n\r])/g,W=>W===`
`?"\\n":W==="\r"?"\\r":`\\${W}`)}function Rt(J){return/^[\x00-\x7F]*$/.test(J)}function Ft(J){const W=["\xFE\xFF"];for(let H=0,gt=J.length;H<gt;H++){const _t=J.charCodeAt(H);W.push(String.fromCharCode(_t>>8&255),String.fromCharCode(_t&255))}return W.join("")}function Xt(J){return decodeURIComponent(escape(J))}function xt(J){return unescape(encodeURIComponent(J))}function Ot(J){return typeof J=="object"&&J!==null&&J.byteLength!==void 0}function Zt(J,W){if(J.length!==W.length)return!1;for(let H=0,gt=J.length;H<gt;H++)if(J[H]!==W[H])return!1;return!0}function rt(J=new Date){return[J.getUTCFullYear().toString(),(J.getUTCMonth()+1).toString().padStart(2,"0"),J.getUTCDate().toString().padStart(2,"0"),J.getUTCHours().toString().padStart(2,"0"),J.getUTCMinutes().toString().padStart(2,"0"),J.getUTCSeconds().toString().padStart(2,"0")].join("")}function pt(){const J=Object.create(null);let W=!1;return Object.defineProperty(J,"settled",{get(){return W}}),J.promise=new Promise(function(H,gt){J.resolve=function(_t){W=!0,H(_t)},J.reject=function(_t){W=!0,gt(_t)}}),J}},(z,r,L)=>{L(3)},(z,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.isNodeJS=void 0;const L=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");r.isNodeJS=L},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var z,L,u,f,O,R,$,D,d,he,x,y;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(5),_display_utils=__w_pdfjs_require__(8),_font_loader=__w_pdfjs_require__(11),_canvas=__w_pdfjs_require__(12),_worker_options=__w_pdfjs_require__(15),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(16),_metadata=__w_pdfjs_require__(17),_optional_content_config=__w_pdfjs_require__(18),_transport_stream=__w_pdfjs_require__(19),_xfa_text=__w_pdfjs_require__(20);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:a,NodeCMapReaderFactory:t,NodeStandardFontDataFactory:e}=__w_pdfjs_require__(21);exports.DefaultCanvasFactory=DefaultCanvasFactory=a,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=t,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=e}let createPDFNetworkStream;function setPDFNetworkStreamFactory(a){createPDFNetworkStream=a}function getDocument(a){const t=new PDFDocumentLoadingTask;let e;if(typeof a=="string"||a instanceof URL)e={url:a};else if((0,_util.isArrayBuffer)(a))e={data:a};else if(a instanceof PDFDataRangeTransport)e={range:a};else{if(typeof a!="object")throw new Error("Invalid parameter in getDocument, need either string, URL, TypedArray, or parameter object.");if(!a.url&&!a.data&&!a.range)throw new Error("Invalid parameter object: need either .data, .range or .url");e=a}const o=Object.create(null);let _=null,b=null;for(const n in e){const s=e[n];switch(n){case"url":if(typeof window!="undefined")try{o[n]=new URL(s,window.location).href;continue}catch(g){(0,_util.warn)(`Cannot create valid URL: "${g}".`)}else if(typeof s=="string"||s instanceof URL){o[n]=s.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":_=s;continue;case"worker":b=s;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer!="undefined"&&s instanceof Buffer)o[n]=new Uint8Array(s);else{if(s instanceof Uint8Array)break;if(typeof s=="string")o[n]=(0,_util.stringToBytes)(s);else if(typeof s=="object"&&s!==null&&!isNaN(s.length))o[n]=new Uint8Array(s);else if((0,_util.isArrayBuffer)(s))o[n]=new Uint8Array(s);else throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}continue}o[n]=s}if(o.CMapReaderFactory=o.CMapReaderFactory||DefaultCMapReaderFactory,o.StandardFontDataFactory=o.StandardFontDataFactory||DefaultStandardFontDataFactory,o.ignoreErrors=o.stopAtErrors!==!0,o.fontExtraProperties=o.fontExtraProperties===!0,o.pdfBug=o.pdfBug===!0,o.enableXfa=o.enableXfa===!0,(!Number.isInteger(o.rangeChunkSize)||o.rangeChunkSize<1)&&(o.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),(typeof o.docBaseUrl!="string"||(0,_display_utils.isDataScheme)(o.docBaseUrl))&&(o.docBaseUrl=null),(!Number.isInteger(o.maxImageSize)||o.maxImageSize<-1)&&(o.maxImageSize=-1),typeof o.cMapUrl!="string"&&(o.cMapUrl=null),typeof o.standardFontDataUrl!="string"&&(o.standardFontDataUrl=null),typeof o.useWorkerFetch!="boolean"&&(o.useWorkerFetch=o.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&o.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),typeof o.isEvalSupported!="boolean"&&(o.isEvalSupported=!0),typeof o.disableFontFace!="boolean"&&(o.disableFontFace=_is_node.isNodeJS),typeof o.useSystemFonts!="boolean"&&(o.useSystemFonts=!_is_node.isNodeJS&&!o.disableFontFace),(typeof o.ownerDocument!="object"||o.ownerDocument===null)&&(o.ownerDocument=globalThis.document),typeof o.disableRange!="boolean"&&(o.disableRange=!1),typeof o.disableStream!="boolean"&&(o.disableStream=!1),typeof o.disableAutoFetch!="boolean"&&(o.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(o.verbosity),!b){const n={verbosity:o.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};b=n.port?PDFWorker.fromPort(n):new PDFWorker(n),t._worker=b}const l=t.docId;return b.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");const n=_fetchDocument(b,o,_,l),s=new Promise(function(g){let w;_?w=new _transport_stream.PDFDataTransportStream({length:o.length,initialData:o.initialData,progressiveDone:o.progressiveDone,contentDispositionFilename:o.contentDispositionFilename,disableRange:o.disableRange,disableStream:o.disableStream},_):o.data||(w=createPDFNetworkStream({url:o.url,length:o.length,httpHeaders:o.httpHeaders,withCredentials:o.withCredentials,rangeChunkSize:o.rangeChunkSize,disableRange:o.disableRange,disableStream:o.disableStream})),g(w)});return Promise.all([n,s]).then(function([g,w]){if(t.destroyed)throw new Error("Loading aborted");const S=new _message_handler.MessageHandler(l,g,b.port),m=new WorkerTransport(S,t,w,o);t._transport=m,S.send("Ready",null)})}).catch(t._capability.reject),t}async function _fetchDocument(a,t,e,o){if(a.destroyed)throw new Error("Worker was destroyed");e&&(t.length=e.length,t.initialData=e.initialData,t.progressiveDone=e.progressiveDone,t.contentDispositionFilename=e.contentDispositionFilename);const _=await a.messageHandler.sendWithPromise("GetDocRequest",{docId:o,apiVersion:"2.16.105",source:{data:t.data,url:t.url,password:t.password,disableAutoFetch:t.disableAutoFetch,rangeChunkSize:t.rangeChunkSize,length:t.length},maxImageSize:t.maxImageSize,disableFontFace:t.disableFontFace,docBaseUrl:t.docBaseUrl,ignoreErrors:t.ignoreErrors,isEvalSupported:t.isEvalSupported,fontExtraProperties:t.fontExtraProperties,enableXfa:t.enableXfa,useSystemFonts:t.useSystemFonts,cMapUrl:t.useWorkerFetch?t.cMapUrl:null,standardFontDataUrl:t.useWorkerFetch?t.standardFontDataUrl:null});if(t.data&&(t.data=null),a.destroyed)throw new Error("Worker was destroyed");return _}const r=class{constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${ce(r,z)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}async destroy(){var t;this.destroyed=!0,await((t=this._transport)==null?void 0:t.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};let PDFDocumentLoadingTask=r;z=new WeakMap,at(PDFDocumentLoadingTask,z,0),exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(t,e,o=!1,_=null){this.length=t,this.initialData=e,this.progressiveDone=o,this.contentDispositionFilename=_,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const o of this._rangeListeners)o(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(const o of this._progressListeners)o(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(t,e){this._pdfInfo=t,this._transport=e,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:async()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),this.stats||{streamTypes:{},fontTypes:{}})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(t,e,o,_,b=!1){this._pageIndex=t,this._pageInfo=e,this._ownerDocument=_,this._transport=o,this._stats=b?new _display_utils.StatTimer:null,this._pdfBug=b,this.commonObjs=o.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:o=0,offsetY:_=0,dontFlip:b=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:t,rotation:e,offsetX:o,offsetY:_,dontFlip:b})}getAnnotations({intent:t="display"}={}){const e=this._transport.getRenderingIntent(t);let o=this._annotationPromises.get(e.cacheKey);return o||(o=this._transport.getAnnotations(this._pageIndex,e.renderingIntent),this._annotationPromises.set(e.cacheKey,o),o=o.then(_=>{for(const b of _)b.titleObj!==void 0&&Object.defineProperty(b,"title",{get(){return(0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),b.titleObj.str}}),b.contentsObj!==void 0&&Object.defineProperty(b,"contents",{get(){return(0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),b.contentsObj.str}});return _})),o}getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:e,intent:o="display",annotationMode:_=_util.AnnotationMode.ENABLE,transform:b=null,imageLayer:l=null,canvasFactory:n=null,background:s=null,optionalContentConfigPromise:g=null,annotationCanvasMap:w=null,pageColors:S=null,printAnnotationStorage:m=null}){var V,nt;((V=arguments[0])==null?void 0:V.renderInteractiveForms)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),arguments[0].renderInteractiveForms===!0&&_===_util.AnnotationMode.ENABLE&&(_=_util.AnnotationMode.ENABLE_FORMS)),((nt=arguments[0])==null?void 0:nt.includeAnnotationStorage)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),arguments[0].includeAnnotationStorage===!0&&_===_util.AnnotationMode.ENABLE&&(_=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const P=this._transport.getRenderingIntent(o,_,m);this.pendingCleanup=!1,g||(g=this._transport.getOptionalContentConfig());let tt=this._intentStates.get(P.cacheKey);tt||(tt=Object.create(null),this._intentStates.set(P.cacheKey,tt)),tt.streamReaderCancelTimeout&&(clearTimeout(tt.streamReaderCancelTimeout),tt.streamReaderCancelTimeout=null);const it=n||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),Q=!!(P.renderingIntent&_util.RenderingIntentFlag.PRINT);tt.displayReadyCapability||(tt.displayReadyCapability=(0,_util.createPromiseCapability)(),tt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(P));const K=ct=>{tt.renderTasks.delete(q),(this.cleanupAfterRender||Q)&&(this.pendingCleanup=!0),this._tryCleanup(),ct?(q.capability.reject(ct),this._abortOperatorList({intentState:tt,reason:ct instanceof Error?ct:new Error(ct)})):q.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},q=new InternalRenderTask({callback:K,params:{canvasContext:t,viewport:e,transform:b,imageLayer:l,background:s},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:w,operatorList:tt.operatorList,pageIndex:this._pageIndex,canvasFactory:it,useRequestAnimationFrame:!Q,pdfBug:this._pdfBug,pageColors:S});(tt.renderTasks||(tt.renderTasks=new Set)).add(q);const G=q.task;return Promise.all([tt.displayReadyCapability.promise,g]).then(([ct,bt])=>{if(this.pendingCleanup){K();return}this._stats&&this._stats.time("Rendering"),q.initializeGraphics({transparency:ct,optionalContentConfig:bt}),q.operatorListChanged()}).catch(K),G}getOperatorList({intent:t="display",annotationMode:e=_util.AnnotationMode.ENABLE,printAnnotationStorage:o=null}={}){function _(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(n))}const b=this._transport.getRenderingIntent(t,e,o,!0);let l=this._intentStates.get(b.cacheKey);l||(l=Object.create(null),this._intentStates.set(b.cacheKey,l));let n;return l.opListReadCapability||(n=Object.create(null),n.operatorListChanged=_,l.opListReadCapability=(0,_util.createPromiseCapability)(),(l.renderTasks||(l.renderTasks=new Set)).add(n),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(b)),l.opListReadCapability.promise}streamTextContent({disableCombineTextItems:t=!1,includeMarkedContent:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:t!==!0,includeMarkedContent:e===!0},{highWaterMark:100,size(_){return _.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(o=>_xfa_text.XfaText.textContent(o));const e=this.streamTextContent(t);return new Promise(function(o,_){function b(){l.read().then(function({value:s,done:g}){if(g){o(n);return}Object.assign(n.styles,s.styles),n.items.push(...s.items),b()},_)}const l=e.getReader(),n={items:[],styles:Object.create(null)};b()})}getStructTree(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const o of e.renderTasks)t.push(o.completed),o.cancel();this.objs.clear();for(const e of this._bitmaps)e.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(t)}cleanup(t=!1){return this.pendingCleanup=!0,this._tryCleanup(t)}_tryCleanup(t=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:e,operatorList:o}of this._intentStates.values())if(e.size>0||!o.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,t&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const e of this._bitmaps)e.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(t,e){const o=this._intentStates.get(e);!o||(this._stats&&this._stats.timeEnd("Page Request"),o.displayReadyCapability&&o.displayReadyCapability.resolve(t))}_renderPageChunk(t,e){for(let o=0,_=t.length;o<_;o++)e.operatorList.fnArray.push(t.fnArray[o]),e.operatorList.argsArray.push(t.argsArray[o]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const o of e.renderTasks)o.operatorListChanged();t.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageMap:o}){const b=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:o}).getReader(),l=this._intentStates.get(e);l.streamReader=b;const n=()=>{b.read().then(({value:s,done:g})=>{if(g){l.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(s,l),n())},s=>{if(l.streamReader=null,!this._transport.destroyed){if(l.operatorList){l.operatorList.lastChunk=!0;for(const g of l.renderTasks)g.operatorListChanged();this._tryCleanup()}if(l.displayReadyCapability)l.displayReadyCapability.reject(s);else if(l.opListReadCapability)l.opListReadCapability.reject(s);else throw s}})};n()}_abortOperatorList({intentState:t,reason:e,force:o=!1}){if(!!t.streamReader){if(!o){if(t.renderTasks.size>0)return;if(e instanceof _display_utils.RenderingCancelledException){t.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:t,reason:e,force:!0}),t.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT);return}}if(t.streamReader.cancel(new _util.AbortException(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[_,b]of this._intentStates)if(b===t){this._intentStates.delete(_);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(t,e){const o={data:structuredClone(t,e)};this._deferred.then(()=>{for(const _ of this._listeners)_.call(this,o)})}addEventListener(t,e){this._listeners.push(e)}removeEventListener(t,e){const o=this._listeners.indexOf(e);this._listeners.splice(o,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const a=(L=document==null?void 0:document.currentScript)==null?void 0:L.src;a&&(PDFWorkerUtil.fallbackWorkerSrc=a.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(a,t){let e;try{if(e=new URL(a),!e.origin||e.origin==="null")return!1}catch{return!1}const o=new URL(t,e);return e.origin===o.origin},PDFWorkerUtil.createCDNWrapper=function(a){const t=`importScripts("${a}");`;return URL.createObjectURL(new Blob([t]))}}const _PDFWorker=class{constructor({name:a=null,port:t=null,verbosity:e=(0,_util.getVerbosityLevel)()}={}){if(t&&k(_PDFWorker,u).has(t))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=a,this.destroyed=!1,this.verbosity=e,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,t){k(_PDFWorker,u).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(a){this._port=a,this._messageHandler=new _message_handler.MessageHandler("main","worker",a),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:a}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,a)||(a=PDFWorkerUtil.createCDNWrapper(new URL(a,window.location).href));const t=new Worker(a),e=new _message_handler.MessageHandler("main","worker",t),o=()=>{t.removeEventListener("error",_),e.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},_=()=>{this._webWorker||o()};t.addEventListener("error",_),e.on("test",l=>{if(t.removeEventListener("error",_),this.destroyed){o();return}l?(this._messageHandler=e,this._port=t,this._webWorker=t,this._readyCapability.resolve(),e.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),e.destroy(),t.terminate())}),e.on("ready",l=>{if(t.removeEventListener("error",_),this.destroyed){o();return}try{b()}catch{this._setupFakeWorker()}});const b=()=>{const l=new Uint8Array;e.send("test",l,[l.buffer])};b();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(a=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new LoopbackPort;this._port=t;const e=`fake${PDFWorkerUtil.fakeWorkerId++}`,o=new _message_handler.MessageHandler(e+"_worker",e,t);a.setup(o,t);const _=new _message_handler.MessageHandler(e,e+"_worker",t);this._messageHandler=_,this._readyCapability.resolve(),_.send("configure",{verbosity:this.verbosity})}).catch(a=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${a.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),k(_PDFWorker,u).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(a){if(!(a!=null&&a.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return k(this,u).has(a.port)?k(this,u).get(a.port):new _PDFWorker(a)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var a;try{return((a=globalThis.pdfjsWorker)==null?void 0:a.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};let PDFWorker=_PDFWorker;u=new WeakMap,at(PDFWorker,u,new WeakMap),exports.PDFWorker=PDFWorker,PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};class WorkerTransport{constructor(t,e,o,_){at(this,f,null);at(this,O,new Map);at(this,R,new Map);at(this,$,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:e.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:_.ownerDocument,styleElement:_.styleElement}),this._params=_,_.useWorkerFetch||(this.CMapReaderFactory=new _.CMapReaderFactory({baseUrl:_.cMapUrl,isCompressed:_.cMapPacked}),this.StandardFontDataFactory=new _.StandardFontDataFactory({baseUrl:_.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=o,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return k(this,f)}getRenderingIntent(t,e=_util.AnnotationMode.ENABLE,o=null,_=!1){let b=_util.RenderingIntentFlag.DISPLAY,l=null;switch(t){case"any":b=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":b=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${t}`)}switch(e){case _util.AnnotationMode.DISABLE:b+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:b+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:b+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,l=(b&_util.RenderingIntentFlag.PRINT&&o instanceof _annotation_storage.PrintAnnotationStorage?o:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${e}`)}return _&&(b+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:b,cacheKey:`${b}_${_annotation_storage.AnnotationStorage.getHash(l)}`,annotationStorageMap:l}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const o of k(this,O).values())t.push(o._destroy());k(this,O).clear(),k(this,R).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),mt(this,$,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(o,_)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=b=>{this._lastProgress={loaded:b.loaded,total:b.total}},_.onPull=()=>{this._fullReader.read().then(function({value:b,done:l}){if(l){_.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(b),"GetReader - expected an ArrayBuffer."),_.enqueue(new Uint8Array(b),1,[b])}).catch(b=>{_.error(b)})},_.onCancel=b=>{this._fullReader.cancel(b),_.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("ReaderHeadersReady",o=>{const _=(0,_util.createPromiseCapability)(),b=this._fullReader;return b.headersReady.then(()=>{var l;(!b.isStreamingSupported||!b.isRangeSupported)&&(this._lastProgress&&((l=e.onProgress)==null||l.call(e,this._lastProgress)),b.onProgress=n=>{var s;(s=e.onProgress)==null||s.call(e,{loaded:n.loaded,total:n.total})}),_.resolve({isStreamingSupported:b.isStreamingSupported,isRangeSupported:b.isRangeSupported,contentLength:b.contentLength})},_.reject),_.promise}),t.on("GetRangeReader",(o,_)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const b=this._networkStream.getRangeReader(o.begin,o.end);if(!b){_.close();return}_.onPull=()=>{b.read().then(function({value:l,done:n}){if(n){_.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(l),"GetRangeReader - expected an ArrayBuffer."),_.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{_.error(l)})},_.onCancel=l=>{b.cancel(l),_.ready.catch(n=>{if(!this.destroyed)throw n})}}),t.on("GetDoc",({pdfInfo:o})=>{this._numPages=o.numPages,this._htmlForXfa=o.htmlForXfa,delete o.htmlForXfa,e._capability.resolve(new PDFDocumentProxy(o,this))}),t.on("DocException",function(o){let _;switch(o.name){case"PasswordException":_=new _util.PasswordException(o.message,o.code);break;case"InvalidPDFException":_=new _util.InvalidPDFException(o.message);break;case"MissingPDFException":_=new _util.MissingPDFException(o.message);break;case"UnexpectedResponseException":_=new _util.UnexpectedResponseException(o.message,o.status);break;case"UnknownErrorException":_=new _util.UnknownErrorException(o.message,o.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}e._capability.reject(_)}),t.on("PasswordRequest",o=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),e.onPassword){const _=b=>{b instanceof Error?this._passwordCapability.reject(b):this._passwordCapability.resolve({password:b})};try{e.onPassword(_,o.code)}catch(b){this._passwordCapability.reject(b)}}else this._passwordCapability.reject(new _util.PasswordException(o.message,o.code));return this._passwordCapability.promise}),t.on("DataLoaded",o=>{var _;(_=e.onProgress)==null||_.call(e,{loaded:o.length,total:o.length}),this.downloadInfoCapability.resolve(o)}),t.on("StartRenderPage",o=>{if(this.destroyed)return;k(this,O).get(o.pageIndex)._startRenderPage(o.transparency,o.cacheKey)}),t.on("commonobj",([o,_,b])=>{var l;if(!this.destroyed&&!this.commonObjs.has(o))switch(_){case"Font":const n=this._params;if("error"in b){const w=b.error;(0,_util.warn)(`Error during font loading: ${w}`),this.commonObjs.resolve(o,w);break}let s=null;n.pdfBug&&((l=globalThis.FontInspector)==null?void 0:l.enabled)&&(s={registerFont(w,S){globalThis.FontInspector.fontAdded(w,S)}});const g=new _font_loader.FontFaceObject(b,{isEvalSupported:n.isEvalSupported,disableFontFace:n.disableFontFace,ignoreErrors:n.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:s});this.fontLoader.bind(g).catch(w=>t.sendWithPromise("FontFallback",{id:o})).finally(()=>{!n.fontExtraProperties&&g.data&&(g.data=null),this.commonObjs.resolve(o,g)});break;case"FontPath":case"Image":this.commonObjs.resolve(o,b);break;default:throw new Error(`Got unknown common object type ${_}`)}}),t.on("obj",([o,_,b,l])=>{var s;if(this.destroyed)return;const n=k(this,O).get(_);if(!n.objs.has(o))switch(b){case"Image":n.objs.resolve(o,l);const g=8e6;if(l){let w;if(l.bitmap){const{bitmap:S,width:m,height:P}=l;w=m*P*4,n._bitmaps.add(S)}else w=((s=l.data)==null?void 0:s.length)||0;w>g&&(n.cleanupAfterRender=!0)}break;case"Pattern":n.objs.resolve(o,l);break;default:throw new Error(`Got unknown object type ${b}`)}}),t.on("DocProgress",o=>{var _;this.destroyed||(_=e.onProgress)==null||_.call(e,{loaded:o.loaded,total:o.total})}),t.on("DocStats",o=>{this.destroyed||mt(this,f,Object.freeze({streamTypes:Object.freeze(o.streamTypes),fontTypes:Object.freeze(o.fontTypes)}))}),t.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),t.on("FetchBuiltInCMap",o=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(o):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),t.on("FetchStandardFontData",o=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(o):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:t}){var e,o;this.destroyed||(o=(e=this.loadingTask).onUnsupportedFeature)==null||o.call(e,t)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,o=k(this,R).get(e);if(o)return o;const _=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(b=>{if(this.destroyed)throw new Error("Transport destroyed");const l=new PDFPageProxy(e,b,this,this._params.ownerDocument,this._params.pdfBug);return k(this,O).set(e,l),l});return k(this,R).set(e,_),_}getPageIndex(t){return typeof t!="object"||t===null||!Number.isInteger(t.num)||t.num<0||!Number.isInteger(t.gen)||t.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen})}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}saveDocument(){var t,e;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:(e=(t=this._fullReader)==null?void 0:t.filename)!=null?e:null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(t=>new _optional_content_config.OptionalContentConfig(t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return k(this,$)||mt(this,$,this.messageHandler.sendWithPromise("GetMetadata",null).then(t=>{var e,o,_,b;return{info:t[0],metadata:t[1]?new _metadata.Metadata(t[1]):null,contentDispositionFilename:(o=(e=this._fullReader)==null?void 0:e.filename)!=null?o:null,contentLength:(b=(_=this._fullReader)==null?void 0:_.contentLength)!=null?b:null}}))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(await this.messageHandler.sendWithPromise("Cleanup",null),!this.destroyed){for(const e of k(this,O).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),mt(this,$,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null}}get loadingParams(){const t=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:t.disableAutoFetch,enableXfa:t.enableXfa})}}f=new WeakMap,O=new WeakMap,R=new WeakMap,$=new WeakMap;class PDFObjects{constructor(){at(this,d);at(this,D,Object.create(null))}get(t,e=null){if(e){const _=ht(this,d,he).call(this,t);return _.capability.promise.then(()=>e(_.data)),null}const o=k(this,D)[t];if(!(o!=null&&o.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${t}.`);return o.data}has(t){const e=k(this,D)[t];return(e==null?void 0:e.capability.settled)||!1}resolve(t,e=null){const o=ht(this,d,he).call(this,t);o.data=e,o.capability.resolve()}clear(){mt(this,D,Object.create(null))}}D=new WeakMap,d=new WeakSet,he=function(t){const e=k(this,D)[t];return e||(k(this,D)[t]={capability:(0,_util.createPromiseCapability)(),data:null})};class RenderTask{constructor(t){at(this,x,null);mt(this,x,t),this.onContinue=null}get promise(){return k(this,x).capability.promise}cancel(){k(this,x).cancel()}get separateAnnots(){const{separateAnnots:t}=k(this,x).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=k(this,x);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}x=new WeakMap,exports.RenderTask=RenderTask;const v=class{constructor({callback:t,params:e,objs:o,commonObjs:_,annotationCanvasMap:b,operatorList:l,pageIndex:n,canvasFactory:s,useRequestAnimationFrame:g=!1,pdfBug:w=!1,pageColors:S=null}){this.callback=t,this.params=e,this.objs=o,this.commonObjs=_,this.annotationCanvasMap=b,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=n,this.canvasFactory=s,this._pdfBug=w,this.pageColors=S,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=g===!0&&typeof window!="undefined",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var s;if(this.cancelled)return;if(this._canvas){if(k(v,y).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");k(v,y).add(this._canvas)}this._pdfBug&&((s=globalThis.StepperManager)==null?void 0:s.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:o,viewport:_,transform:b,imageLayer:l,background:n}=this.params;this.gfx=new _canvas.CanvasGraphics(o,this.commonObjs,this.objs,this.canvasFactory,l,e,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:b,viewport:_,transparency:t,background:n}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(t=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&k(v,y).delete(this._canvas),this.callback(t||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&k(v,y).delete(this._canvas),this.callback())))}};let InternalRenderTask=v;y=new WeakMap,at(InternalRenderTask,y,new WeakSet);const version="2.16.105";exports.version=version;const build="172ccdbe5";exports.build=build},(z,r,L)=>{var D,Pe,E;Object.defineProperty(r,"__esModule",{value:!0}),r.PrintAnnotationStorage=r.AnnotationStorage=void 0;var u=L(1),f=L(6),O=L(10);class R{constructor(){at(this,D);this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(y,v){const a=this._storage.get(y);return a===void 0?v:Object.assign(v,a)}getRawValue(y){return this._storage.get(y)}remove(y){if(this._storage.delete(y),this._storage.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const v of this._storage.values())if(v instanceof f.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(y,v){const a=this._storage.get(y);let t=!1;if(a!==void 0)for(const[e,o]of Object.entries(v))a[e]!==o&&(t=!0,a[e]=o);else t=!0,this._storage.set(y,v);t&&ht(this,D,Pe).call(this),v instanceof f.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(v.constructor._type)}has(y){return this._storage.has(y)}getAll(){return this._storage.size>0?(0,u.objectFromMap)(this._storage):null}get size(){return this._storage.size}resetModified(){this._modified&&(this._modified=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new $(this)}get serializable(){if(this._storage.size===0)return null;const y=new Map;for(const[v,a]of this._storage){const t=a instanceof f.AnnotationEditor?a.serialize():a;t&&y.set(v,t)}return y}static getHash(y){if(!y)return"";const v=new O.MurmurHash3_64;for(const[a,t]of y)v.update(`${a}:${JSON.stringify(t)}`);return v.hexdigest()}}D=new WeakSet,Pe=function(){this._modified||(this._modified=!0,typeof this.onSetModified=="function"&&this.onSetModified())},r.AnnotationStorage=R;class $ extends R{constructor(v){super();at(this,E,null);mt(this,E,structuredClone(v.serializable))}get print(){(0,u.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return k(this,E)}}E=new WeakMap,r.PrintAnnotationStorage=$},(z,r,L)=>{var R,$,D,d,E,x;Object.defineProperty(r,"__esModule",{value:!0}),r.AnnotationEditor=void 0;var u=L(7),f=L(1);const y=class{constructor(a){at(this,R,this.focusin.bind(this));at(this,$,this.focusout.bind(this));at(this,D,!1);at(this,d,!1);at(this,E,!1);at(this,x,y._zIndex++);this.constructor===y&&(0,f.unreachable)("Cannot initialize AnnotationEditor."),this.parent=a.parent,this.id=a.id,this.width=this.height=null,this.pageIndex=a.parent.pageIndex,this.name=a.name,this.div=null;const[t,e]=this.parent.viewportBaseDimensions;this.x=a.x/t,this.y=a.y/e,this.rotation=this.parent.viewport.rotation,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,f.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=k(this,x)}focusin(a){k(this,D)?mt(this,D,!1):this.parent.setSelected(this)}focusout(a){if(!this.isAttachedToDOM)return;const t=a.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(a.preventDefault(),this.parent.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.parent.addToAnnotationStorage(this)}dragstart(a){const t=this.parent.div.getBoundingClientRect();this.startX=a.clientX-t.x,this.startY=a.clientY-t.y,a.dataTransfer.setData("text/plain",this.id),a.dataTransfer.effectAllowed="move"}setAt(a,t,e,o){const[_,b]=this.parent.viewportBaseDimensions;[e,o]=this.screenToPageTranslation(e,o),this.x=(a+e)/_,this.y=(t+o)/b,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(a,t){const[e,o]=this.parent.viewportBaseDimensions;[a,t]=this.screenToPageTranslation(a,t),this.x+=a/e,this.y+=t/o,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(a,t){const{rotation:e}=this.parent.viewport;switch(e){case 90:return[t,-a];case 180:return[-a,-t];case 270:return[-t,a];default:return[a,t]}}setDims(a,t){const[e,o]=this.parent.viewportBaseDimensions;this.div.style.width=`${100*a/e}%`,this.div.style.height=`${100*t/o}%`}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",k(this,R)),this.div.addEventListener("focusout",k(this,$));const[a,t]=this.getInitialTranslation();return this.translate(a,t),(0,u.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(a){const t=u.KeyboardManager.platform.isMac;if(a.button!==0||a.ctrlKey&&t){a.preventDefault();return}a.ctrlKey&&!t||a.shiftKey||a.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this),mt(this,D,!0)}getRect(a,t){const[e,o]=this.parent.viewportBaseDimensions,[_,b]=this.parent.pageDimensions,l=_*a/e,n=b*t/o,s=this.x*_,g=this.y*b,w=this.width*_,S=this.height*b;switch(this.rotation){case 0:return[s+l,b-g-n-S,s+l+w,b-g-n];case 90:return[s+n,b-g+l,s+n+S,b-g+l+w];case 180:return[s-l-w,b-g+n,s-l,b-g+n+S];case 270:return[s-n-S,b-g-l-w,s-n,b-g-l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(a,t){const[e,o,_,b]=a,l=_-e,n=b-o;switch(this.rotation){case 0:return[e,t-b,l,n];case 90:return[e,t-o,n,l];case 180:return[_,t-o,l,n];case 270:return[_,t-b,n,l];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){mt(this,E,!0)}disableEditMode(){mt(this,E,!1)}isInEditMode(){return k(this,E)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var a;(a=this.div)==null||a.addEventListener("focusin",k(this,R))}serialize(){(0,f.unreachable)("An editor must be serializable")}static deserialize(a,t){const e=new this.prototype.constructor({parent:t,id:t.getNextId()});e.rotation=a.rotation;const[o,_]=t.pageDimensions,[b,l,n,s]=e.getRectInCurrentCoords(a.rect,_);return e.x=b/o,e.y=l/_,e.width=n/o,e.height=s/_,e}remove(){this.div.removeEventListener("focusin",k(this,R)),this.div.removeEventListener("focusout",k(this,$)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var a;(a=this.div)==null||a.classList.add("selectedEditor")}unselect(){var a;(a=this.div)==null||a.classList.remove("selectedEditor")}updateParams(a,t){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return k(this,d)}set isEditing(a){mt(this,d,a),a?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}};let O=y;R=new WeakMap,$=new WeakMap,D=new WeakMap,d=new WeakMap,E=new WeakMap,x=new WeakMap,Mt(O,"_colorManager",new u.ColorManager),Mt(O,"_zIndex",1),r.AnnotationEditor=O},(z,r,L)=>{var v,a,t,e,o,_,ke,n,g,w,S,m,P,tt,it,Q,K,q,G,V,nt,ct,bt,j,h,c,Fe,I,de,U,Bt,X,Jt,p,Re,C,Me,B,ue,dt,Qt,ot,ee;Object.defineProperty(r,"__esModule",{value:!0}),r.KeyboardManager=r.CommandManager=r.ColorManager=r.AnnotationEditorUIManager=void 0,r.bindEvents=O,r.opacityToHex=R;var u=L(1),f=L(8);function O(ft,M,ut){for(const At of ut)M.addEventListener(At,ft[At].bind(ft))}function R(ft){return Math.round(Math.min(255,Math.max(1,255*ft))).toString(16).padStart(2,"0")}class ${constructor(){at(this,v,0)}getId(){return`${u.AnnotationEditorPrefix}${ce(this,v)._++}`}}v=new WeakMap;class D{constructor(M=128){at(this,a,[]);at(this,t,!1);at(this,e,void 0);at(this,o,-1);mt(this,e,M)}add({cmd:M,undo:ut,mustExec:At,type:vt=NaN,overwriteIfSameType:Et=!1,keepUndo:Tt=!1}){if(At&&M(),k(this,t))return;const Rt={cmd:M,undo:ut,type:vt};if(k(this,o)===-1){k(this,a).length>0&&(k(this,a).length=0),mt(this,o,0),k(this,a).push(Rt);return}if(Et&&k(this,a)[k(this,o)].type===vt){Tt&&(Rt.undo=k(this,a)[k(this,o)].undo),k(this,a)[k(this,o)]=Rt;return}const Ft=k(this,o)+1;Ft===k(this,e)?k(this,a).splice(0,1):(mt(this,o,Ft),Ft<k(this,a).length&&k(this,a).splice(Ft)),k(this,a).push(Rt)}undo(){k(this,o)!==-1&&(mt(this,t,!0),k(this,a)[k(this,o)].undo(),mt(this,t,!1),mt(this,o,k(this,o)-1))}redo(){k(this,o)<k(this,a).length-1&&(mt(this,o,k(this,o)+1),mt(this,t,!0),k(this,a)[k(this,o)].cmd(),mt(this,t,!1))}hasSomethingToUndo(){return k(this,o)!==-1}hasSomethingToRedo(){return k(this,o)<k(this,a).length-1}destroy(){mt(this,a,null)}}a=new WeakMap,t=new WeakMap,e=new WeakMap,o=new WeakMap,r.CommandManager=D;const l=class{constructor(M){at(this,_);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const ut=l.platform.isMac;for(const[At,vt]of M)for(const Et of At){const Tt=Et.startsWith("mac+");ut&&Tt?(this.callbacks.set(Et.slice(4),vt),this.allKeys.add(Et.split("+").at(-1))):!ut&&!Tt&&(this.callbacks.set(Et,vt),this.allKeys.add(Et.split("+").at(-1)))}}static get platform(){const M=typeof navigator!="undefined"?navigator.platform:"";return(0,u.shadow)(this,"platform",{isWin:M.includes("Win"),isMac:M.includes("Mac")})}exec(M,ut){if(!this.allKeys.has(ut.key))return;const At=this.callbacks.get(ht(this,_,ke).call(this,ut));!At||(At.bind(M)(),ut.stopPropagation(),ut.preventDefault())}};let d=l;_=new WeakSet,ke=function(M){M.altKey&&this.buffer.push("alt"),M.ctrlKey&&this.buffer.push("ctrl"),M.metaKey&&this.buffer.push("meta"),M.shiftKey&&this.buffer.push("shift"),this.buffer.push(M.key);const ut=this.buffer.join("+");return this.buffer.length=0,ut},r.KeyboardManager=d;class E{constructor(){at(this,n,null)}copy(M){!M||(Array.isArray(M)?mt(this,n,M.map(ut=>ut.serialize())):mt(this,n,[M.serialize()]),mt(this,n,k(this,n).filter(ut=>!!ut)),k(this,n).length===0&&mt(this,n,null))}paste(){return k(this,n)}isEmpty(){return k(this,n)===null}destroy(){mt(this,n,null)}}n=new WeakMap;const s=class{get _colors(){const M=new Map([["CanvasText",null],["Canvas",null]]);return(0,f.getColorValues)(M),(0,u.shadow)(this,"_colors",M)}convert(M){const ut=(0,f.getRGB)(M);if(!window.matchMedia("(forced-colors: active)").matches)return ut;for(const[At,vt]of this._colors)if(vt.every((Et,Tt)=>Et===ut[Tt]))return s._colorsMapping.get(At);return ut}getHexCode(M){const ut=this._colors.get(M);return ut?u.Util.makeHexColor(...ut):M}};let x=s;Mt(x,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]])),r.ColorManager=x;const lt=class{constructor(M,ut){at(this,c);at(this,I);at(this,U);at(this,X);at(this,p);at(this,C);at(this,B);at(this,dt);at(this,ot);at(this,g,null);at(this,w,new Map);at(this,S,new Map);at(this,m,new E);at(this,P,new D);at(this,tt,0);at(this,it,null);at(this,Q,null);at(this,K,new $);at(this,q,!1);at(this,G,u.AnnotationEditorType.NONE);at(this,V,new Set);at(this,nt,this.keydown.bind(this));at(this,ct,this.onEditingAction.bind(this));at(this,bt,this.onPageChanging.bind(this));at(this,j,{isEditing:!1,isEmpty:!0,hasEmptyClipboard:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});at(this,h,null);mt(this,h,M),mt(this,Q,ut),k(this,Q)._on("editingaction",k(this,ct)),k(this,Q)._on("pagechanging",k(this,bt))}destroy(){ht(this,I,de).call(this),k(this,Q)._off("editingaction",k(this,ct)),k(this,Q)._off("pagechanging",k(this,bt));for(const M of k(this,S).values())M.destroy();k(this,S).clear(),k(this,w).clear(),mt(this,g,null),k(this,V).clear(),k(this,m).destroy(),k(this,P).destroy()}onPageChanging({pageNumber:M}){mt(this,tt,M-1)}focusMainContainer(){k(this,h).focus()}keydown(M){var ut;(ut=this.getActive())!=null&&ut.shouldGetKeyboardEvents()||lt._keyboardManager.exec(this,M)}onEditingAction(M){["undo","redo","cut","copy","paste","delete","selectAll"].includes(M.name)&&this[M.name]()}setEditingState(M){M?(ht(this,c,Fe).call(this),ht(this,U,Bt).call(this,{isEditing:k(this,G)!==u.AnnotationEditorType.NONE,isEmpty:ht(this,dt,Qt).call(this),hasSomethingToUndo:k(this,P).hasSomethingToUndo(),hasSomethingToRedo:k(this,P).hasSomethingToRedo(),hasSelectedEditor:!1,hasEmptyClipboard:k(this,m).isEmpty()})):(ht(this,I,de).call(this),ht(this,U,Bt).call(this,{isEditing:!1}))}registerEditorTypes(M){mt(this,it,M);for(const ut of k(this,it))ht(this,X,Jt).call(this,ut.defaultPropertiesToUpdate)}getId(){return k(this,K).getId()}addLayer(M){k(this,S).set(M.pageIndex,M),k(this,q)?M.enable():M.disable()}removeLayer(M){k(this,S).delete(M.pageIndex)}updateMode(M){if(mt(this,G,M),M===u.AnnotationEditorType.NONE)this.setEditingState(!1),ht(this,C,Me).call(this);else{this.setEditingState(!0),ht(this,p,Re).call(this);for(const ut of k(this,S).values())ut.updateMode(M)}}updateToolbar(M){M!==k(this,G)&&k(this,Q).dispatch("switchannotationeditormode",{source:this,mode:M})}updateParams(M,ut){for(const At of k(this,V))At.updateParams(M,ut);for(const At of k(this,it))At.updateDefaultParams(M,ut)}getEditors(M){const ut=[];for(const At of k(this,w).values())At.pageIndex===M&&ut.push(At);return ut}getEditor(M){return k(this,w).get(M)}addEditor(M){k(this,w).set(M.id,M)}removeEditor(M){k(this,w).delete(M.id),this.unselect(M)}setActiveEditor(M){k(this,g)!==M&&(mt(this,g,M),M&&ht(this,X,Jt).call(this,M.propertiesToUpdate))}toggleSelected(M){if(k(this,V).has(M)){k(this,V).delete(M),M.unselect(),ht(this,U,Bt).call(this,{hasSelectedEditor:this.hasSelection});return}k(this,V).add(M),M.select(),ht(this,X,Jt).call(this,M.propertiesToUpdate),ht(this,U,Bt).call(this,{hasSelectedEditor:!0})}setSelected(M){for(const ut of k(this,V))ut!==M&&ut.unselect();k(this,V).clear(),k(this,V).add(M),M.select(),ht(this,X,Jt).call(this,M.propertiesToUpdate),ht(this,U,Bt).call(this,{hasSelectedEditor:!0})}isSelected(M){return k(this,V).has(M)}unselect(M){M.unselect(),k(this,V).delete(M),ht(this,U,Bt).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return k(this,V).size!==0}undo(){k(this,P).undo(),ht(this,U,Bt).call(this,{hasSomethingToUndo:k(this,P).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:ht(this,dt,Qt).call(this)})}redo(){k(this,P).redo(),ht(this,U,Bt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:k(this,P).hasSomethingToRedo(),isEmpty:ht(this,dt,Qt).call(this)})}addCommands(M){k(this,P).add(M),ht(this,U,Bt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:ht(this,dt,Qt).call(this)})}delete(){if(k(this,g)&&k(this,g).commitOrRemove(),!this.hasSelection)return;const M=[...k(this,V)],ut=()=>{for(const vt of M)vt.remove()},At=()=>{for(const vt of M)ht(this,B,ue).call(this,vt)};this.addCommands({cmd:ut,undo:At,mustExec:!0})}copy(){if(k(this,g)&&k(this,g).commitOrRemove(),this.hasSelection){const M=[];for(const ut of k(this,V))ut.isEmpty()||M.push(ut);if(M.length===0)return;k(this,m).copy(M),ht(this,U,Bt).call(this,{hasEmptyClipboard:!1})}}cut(){this.copy(),this.delete()}paste(){if(k(this,m).isEmpty())return;this.unselectAll();const M=k(this,S).get(k(this,tt)),ut=k(this,m).paste().map(Et=>M.deserialize(Et)),At=()=>{for(const Et of ut)ht(this,B,ue).call(this,Et);ht(this,ot,ee).call(this,ut)},vt=()=>{for(const Et of ut)Et.remove()};this.addCommands({cmd:At,undo:vt,mustExec:!0})}selectAll(){for(const M of k(this,V))M.commit();ht(this,ot,ee).call(this,k(this,w).values())}unselectAll(){if(k(this,g)){k(this,g).commitOrRemove();return}if(ht(this,ot,ee).size!==0){for(const M of k(this,V))M.unselect();k(this,V).clear(),ht(this,U,Bt).call(this,{hasSelectedEditor:!1})}}isActive(M){return k(this,g)===M}getActive(){return k(this,g)}getMode(){return k(this,G)}};let y=lt;g=new WeakMap,w=new WeakMap,S=new WeakMap,m=new WeakMap,P=new WeakMap,tt=new WeakMap,it=new WeakMap,Q=new WeakMap,K=new WeakMap,q=new WeakMap,G=new WeakMap,V=new WeakMap,nt=new WeakMap,ct=new WeakMap,bt=new WeakMap,j=new WeakMap,h=new WeakMap,c=new WeakSet,Fe=function(){k(this,h).addEventListener("keydown",k(this,nt))},I=new WeakSet,de=function(){k(this,h).removeEventListener("keydown",k(this,nt))},U=new WeakSet,Bt=function(M){Object.entries(M).some(([At,vt])=>k(this,j)[At]!==vt)&&k(this,Q).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(k(this,j),M)})},X=new WeakSet,Jt=function(M){k(this,Q).dispatch("annotationeditorparamschanged",{source:this,details:M})},p=new WeakSet,Re=function(){if(!k(this,q)){mt(this,q,!0);for(const M of k(this,S).values())M.enable()}},C=new WeakSet,Me=function(){if(this.unselectAll(),k(this,q)){mt(this,q,!1);for(const M of k(this,S).values())M.disable()}},B=new WeakSet,ue=function(M){const ut=k(this,S).get(M.pageIndex);ut?ut.addOrRebuild(M):this.addEditor(M)},dt=new WeakSet,Qt=function(){if(k(this,w).size===0)return!0;if(k(this,w).size===1)for(const M of k(this,w).values())return M.isEmpty();return!1},ot=new WeakSet,ee=function(M){k(this,V).clear();for(const ut of M)ut.isEmpty()||(k(this,V).add(ut),ut.select());ht(this,U,Bt).call(this,{hasSelectedEditor:!0})},Mt(y,"_keyboardManager",new d([[["ctrl+a","mac+meta+a"],lt.prototype.selectAll],[["ctrl+c","mac+meta+c"],lt.prototype.copy],[["ctrl+v","mac+meta+v"],lt.prototype.paste],[["ctrl+x","mac+meta+x"],lt.prototype.cut],[["ctrl+z","mac+meta+z"],lt.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],lt.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],lt.prototype.delete],[["Escape","mac+Escape"],lt.prototype.unselectAll]])),r.AnnotationEditorUIManager=y},(z,r,L)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.StatTimer=r.RenderingCancelledException=r.PixelsPerInch=r.PageViewport=r.PDFDateString=r.DOMStandardFontDataFactory=r.DOMSVGFactory=r.DOMCanvasFactory=r.DOMCMapReaderFactory=r.AnnotationPrefix=void 0,r.deprecated=s,r.getColorValues=P,r.getCurrentTransform=tt,r.getCurrentTransformInverse=it,r.getFilenameFromUrl=o,r.getPdfFilenameFromUrl=_,r.getRGB=m,r.getXfaPageViewport=S,r.isDataScheme=t,r.isPdfFile=e,r.isValidFetchUrl=l,r.loadScript=n;var u=L(9),f=L(1);const O="http://www.w3.org/2000/svg",R="pdfjs_internal_id_";r.AnnotationPrefix=R;const Q=class{};let $=Q;Mt($,"CSS",96),Mt($,"PDF",72),Mt($,"PDF_TO_CSS_UNITS",Q.CSS/Q.PDF),r.PixelsPerInch=$;class D extends u.BaseCanvasFactory{constructor({ownerDocument:q=globalThis.document}={}){super(),this._document=q}_createCanvas(q,G){const V=this._document.createElement("canvas");return V.width=q,V.height=G,V}}r.DOMCanvasFactory=D;async function d(K,q=!1){if(l(K,document.baseURI)){const G=await fetch(K);if(!G.ok)throw new Error(G.statusText);return q?new Uint8Array(await G.arrayBuffer()):(0,f.stringToBytes)(await G.text())}return new Promise((G,V)=>{const nt=new XMLHttpRequest;nt.open("GET",K,!0),q&&(nt.responseType="arraybuffer"),nt.onreadystatechange=()=>{if(nt.readyState===XMLHttpRequest.DONE){if(nt.status===200||nt.status===0){let ct;if(q&&nt.response?ct=new Uint8Array(nt.response):!q&&nt.responseText&&(ct=(0,f.stringToBytes)(nt.responseText)),ct){G(ct);return}}V(new Error(nt.statusText))}},nt.send(null)})}class E extends u.BaseCMapReaderFactory{_fetchData(q,G){return d(q,this.isCompressed).then(V=>({cMapData:V,compressionType:G}))}}r.DOMCMapReaderFactory=E;class x extends u.BaseStandardFontDataFactory{_fetchData(q){return d(q,!0)}}r.DOMStandardFontDataFactory=x;class y extends u.BaseSVGFactory{_createSVG(q){return document.createElementNS(O,q)}}r.DOMSVGFactory=y;class v{constructor({viewBox:q,scale:G,rotation:V,offsetX:nt=0,offsetY:ct=0,dontFlip:bt=!1}){this.viewBox=q,this.scale=G,this.rotation=V,this.offsetX=nt,this.offsetY=ct;const j=(q[2]+q[0])/2,h=(q[3]+q[1])/2;let c,T,I,N;switch(V%=360,V<0&&(V+=360),V){case 180:c=-1,T=0,I=0,N=1;break;case 90:c=0,T=1,I=1,N=0;break;case 270:c=0,T=-1,I=-1,N=0;break;case 0:c=1,T=0,I=0,N=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}bt&&(I=-I,N=-N);let U,Y,X,i;c===0?(U=Math.abs(h-q[1])*G+nt,Y=Math.abs(j-q[0])*G+ct,X=Math.abs(q[3]-q[1])*G,i=Math.abs(q[2]-q[0])*G):(U=Math.abs(j-q[0])*G+nt,Y=Math.abs(h-q[1])*G+ct,X=Math.abs(q[2]-q[0])*G,i=Math.abs(q[3]-q[1])*G),this.transform=[c*G,T*G,I*G,N*G,U-c*G*j-I*G*h,Y-T*G*j-N*G*h],this.width=X,this.height=i}clone({scale:q=this.scale,rotation:G=this.rotation,offsetX:V=this.offsetX,offsetY:nt=this.offsetY,dontFlip:ct=!1}={}){return new v({viewBox:this.viewBox.slice(),scale:q,rotation:G,offsetX:V,offsetY:nt,dontFlip:ct})}convertToViewportPoint(q,G){return f.Util.applyTransform([q,G],this.transform)}convertToViewportRectangle(q){const G=f.Util.applyTransform([q[0],q[1]],this.transform),V=f.Util.applyTransform([q[2],q[3]],this.transform);return[G[0],G[1],V[0],V[1]]}convertToPdfPoint(q,G){return f.Util.applyInverseTransform([q,G],this.transform)}}r.PageViewport=v;class a extends f.BaseException{constructor(q,G){super(q,"RenderingCancelledException"),this.type=G}}r.RenderingCancelledException=a;function t(K){const q=K.length;let G=0;for(;G<q&&K[G].trim()==="";)G++;return K.substring(G,G+5).toLowerCase()==="data:"}function e(K){return typeof K=="string"&&/\.pdf$/i.test(K)}function o(K){const q=K.indexOf("#"),G=K.indexOf("?"),V=Math.min(q>0?q:K.length,G>0?G:K.length);return K.substring(K.lastIndexOf("/",V)+1,V)}function _(K,q="document.pdf"){if(typeof K!="string")return q;if(t(K))return(0,f.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),q;const G=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,V=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,nt=G.exec(K);let ct=V.exec(nt[1])||V.exec(nt[2])||V.exec(nt[3]);if(ct&&(ct=ct[0],ct.includes("%")))try{ct=V.exec(decodeURIComponent(ct))[0]}catch{}return ct||q}class b{constructor(){this.started=Object.create(null),this.times=[]}time(q){q in this.started&&(0,f.warn)(`Timer is already running for ${q}`),this.started[q]=Date.now()}timeEnd(q){q in this.started||(0,f.warn)(`Timer has not been started for ${q}`),this.times.push({name:q,start:this.started[q],end:Date.now()}),delete this.started[q]}toString(){const q=[];let G=0;for(const V of this.times){const nt=V.name;nt.length>G&&(G=nt.length)}for(const V of this.times){const nt=V.end-V.start;q.push(`${V.name.padEnd(G)} ${nt}ms
`)}return q.join("")}}r.StatTimer=b;function l(K,q){try{const{protocol:G}=q?new URL(K,q):new URL(K);return G==="http:"||G==="https:"}catch{return!1}}function n(K,q=!1){return new Promise((G,V)=>{const nt=document.createElement("script");nt.src=K,nt.onload=function(ct){q&&nt.remove(),G(ct)},nt.onerror=function(){V(new Error(`Cannot load script at: ${nt.src}`))},(document.head||document.documentElement).append(nt)})}function s(K){console.log("Deprecated API usage: "+K)}let g;class w{static toDateObject(q){if(!q||typeof q!="string")return null;g||(g=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const G=g.exec(q);if(!G)return null;const V=parseInt(G[1],10);let nt=parseInt(G[2],10);nt=nt>=1&&nt<=12?nt-1:0;let ct=parseInt(G[3],10);ct=ct>=1&&ct<=31?ct:1;let bt=parseInt(G[4],10);bt=bt>=0&&bt<=23?bt:0;let j=parseInt(G[5],10);j=j>=0&&j<=59?j:0;let h=parseInt(G[6],10);h=h>=0&&h<=59?h:0;const c=G[7]||"Z";let T=parseInt(G[8],10);T=T>=0&&T<=23?T:0;let I=parseInt(G[9],10)||0;return I=I>=0&&I<=59?I:0,c==="-"?(bt+=T,j+=I):c==="+"&&(bt-=T,j-=I),new Date(Date.UTC(V,nt,ct,bt,j,h))}}r.PDFDateString=w;function S(K,{scale:q=1,rotation:G=0}){const{width:V,height:nt}=K.attributes.style,ct=[0,0,parseInt(V),parseInt(nt)];return new v({viewBox:ct,scale:q,rotation:G})}function m(K){if(K.startsWith("#")){const q=parseInt(K.slice(1),16);return[(q&16711680)>>16,(q&65280)>>8,q&255]}return K.startsWith("rgb(")?K.slice(4,-1).split(",").map(q=>parseInt(q)):K.startsWith("rgba(")?K.slice(5,-1).split(",").map(q=>parseInt(q)).slice(0,3):((0,f.warn)(`Not a valid color format: "${K}"`),[0,0,0])}function P(K){const q=document.createElement("span");q.style.visibility="hidden",document.body.append(q);for(const G of K.keys()){q.style.color=G;const V=window.getComputedStyle(q).color;K.set(G,m(V))}q.remove()}function tt(K){const{a:q,b:G,c:V,d:nt,e:ct,f:bt}=K.getTransform();return[q,G,V,nt,ct,bt]}function it(K){const{a:q,b:G,c:V,d:nt,e:ct,f:bt}=K.getTransform().invertSelf();return[q,G,V,nt,ct,bt]}},(z,r,L)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BaseStandardFontDataFactory=r.BaseSVGFactory=r.BaseCanvasFactory=r.BaseCMapReaderFactory=void 0;var u=L(1);class f{constructor(){this.constructor===f&&(0,u.unreachable)("Cannot initialize BaseCanvasFactory.")}create(d,E){if(d<=0||E<=0)throw new Error("Invalid canvas size");const x=this._createCanvas(d,E);return{canvas:x,context:x.getContext("2d")}}reset(d,E,x){if(!d.canvas)throw new Error("Canvas is not specified");if(E<=0||x<=0)throw new Error("Invalid canvas size");d.canvas.width=E,d.canvas.height=x}destroy(d){if(!d.canvas)throw new Error("Canvas is not specified");d.canvas.width=0,d.canvas.height=0,d.canvas=null,d.context=null}_createCanvas(d,E){(0,u.unreachable)("Abstract method `_createCanvas` called.")}}r.BaseCanvasFactory=f;class O{constructor({baseUrl:d=null,isCompressed:E=!1}){this.constructor===O&&(0,u.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=d,this.isCompressed=E}async fetch({name:d}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!d)throw new Error("CMap name must be specified.");const E=this.baseUrl+d+(this.isCompressed?".bcmap":""),x=this.isCompressed?u.CMapCompressionType.BINARY:u.CMapCompressionType.NONE;return this._fetchData(E,x).catch(y=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${E}`)})}_fetchData(d,E){(0,u.unreachable)("Abstract method `_fetchData` called.")}}r.BaseCMapReaderFactory=O;class R{constructor({baseUrl:d=null}){this.constructor===R&&(0,u.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=d}async fetch({filename:d}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!d)throw new Error("Font filename must be specified.");const E=`${this.baseUrl}${d}`;return this._fetchData(E).catch(x=>{throw new Error(`Unable to load font data at: ${E}`)})}_fetchData(d){(0,u.unreachable)("Abstract method `_fetchData` called.")}}r.BaseStandardFontDataFactory=R;class ${constructor(){this.constructor===$&&(0,u.unreachable)("Cannot initialize BaseSVGFactory.")}create(d,E,x=!1){if(d<=0||E<=0)throw new Error("Invalid SVG dimensions");const y=this._createSVG("svg:svg");return y.setAttribute("version","1.1"),x||(y.setAttribute("width",`${d}px`),y.setAttribute("height",`${E}px`)),y.setAttribute("preserveAspectRatio","none"),y.setAttribute("viewBox",`0 0 ${d} ${E}`),y}createElement(d){if(typeof d!="string")throw new Error("Invalid SVG element type");return this._createSVG(d)}_createSVG(d){(0,u.unreachable)("Abstract method `_createSVG` called.")}}r.BaseSVGFactory=$},(z,r,L)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.MurmurHash3_64=void 0;var u=L(1);const f=3285377520,O=4294901760,R=65535;class ${constructor(d){this.h1=d?d&4294967295:f,this.h2=d?d&4294967295:f}update(d){let E,x;if(typeof d=="string"){E=new Uint8Array(d.length*2),x=0;for(let g=0,w=d.length;g<w;g++){const S=d.charCodeAt(g);S<=255?E[x++]=S:(E[x++]=S>>>8,E[x++]=S&255)}}else if((0,u.isArrayBuffer)(d))E=d.slice(),x=E.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const y=x>>2,v=x-y*4,a=new Uint32Array(E.buffer,0,y);let t=0,e=0,o=this.h1,_=this.h2;const b=3432918353,l=461845907,n=b&R,s=l&R;for(let g=0;g<y;g++)g&1?(t=a[g],t=t*b&O|t*n&R,t=t<<15|t>>>17,t=t*l&O|t*s&R,o^=t,o=o<<13|o>>>19,o=o*5+3864292196):(e=a[g],e=e*b&O|e*n&R,e=e<<15|e>>>17,e=e*l&O|e*s&R,_^=e,_=_<<13|_>>>19,_=_*5+3864292196);switch(t=0,v){case 3:t^=E[y*4+2]<<16;case 2:t^=E[y*4+1]<<8;case 1:t^=E[y*4],t=t*b&O|t*n&R,t=t<<15|t>>>17,t=t*l&O|t*s&R,y&1?o^=t:_^=t}this.h1=o,this.h2=_}hexdigest(){let d=this.h1,E=this.h2;d^=E>>>1,d=d*3981806797&O|d*36045&R,E=E*4283543511&O|((E<<16|d>>>16)*2950163797&O)>>>16,d^=E>>>1,d=d*444984403&O|d*60499&R,E=E*3301882366&O|((E<<16|d>>>16)*3120437893&O)>>>16,d^=E>>>1;const x=(d>>>0).toString(16),y=(E>>>0).toString(16);return x.padStart(8,"0")+y.padStart(8,"0")}}r.MurmurHash3_64=$},(z,r,L)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.FontLoader=r.FontFaceObject=void 0;var u=L(1);class f{constructor({docId:D,onUnsupportedFeature:d,ownerDocument:E=globalThis.document,styleElement:x=null}){this.constructor===f&&(0,u.unreachable)("Cannot initialize BaseFontLoader."),this.docId=D,this._onUnsupportedFeature=d,this._document=E,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(D){this.nativeFontFaces.push(D),this._document.fonts.add(D)}insertRule(D){let d=this.styleElement;d||(d=this.styleElement=this._document.createElement("style"),d.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].append(d));const E=d.sheet;E.insertRule(D,E.cssRules.length)}clear(){for(const D of this.nativeFontFaces)this._document.fonts.delete(D);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(D){if(D.attached||D.missingFile)return;if(D.attached=!0,this.isFontLoadingAPISupported){const E=D.createNativeFontFace();if(E){this.addNativeFontFace(E);try{await E.loaded}catch(x){throw this._onUnsupportedFeature({featureId:u.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,u.warn)(`Failed to load font '${E.family}': '${x}'.`),D.disableFontFace=!0,x}}return}const d=D.createFontFaceRule();if(d){if(this.insertRule(d),this.isSyncFontLoadingSupported)return;await new Promise(E=>{const x=this._queueLoadingCallback(E);this._prepareFontLoadEvent([d],[D],x)})}}_queueLoadingCallback(D){(0,u.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){var d;const D=!!((d=this._document)!=null&&d.fonts);return(0,u.shadow)(this,"isFontLoadingAPISupported",D)}get isSyncFontLoadingSupported(){(0,u.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,u.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(D,d,E){(0,u.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let O;r.FontLoader=O,r.FontLoader=O=class extends f{constructor(D){super(D),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let D=!1;if(typeof navigator=="undefined")D=!0;else{const d=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);(d==null?void 0:d[1])>=14&&(D=!0)}return(0,u.shadow)(this,"isSyncFontLoadingSupported",D)}_queueLoadingCallback(D){function d(){for((0,u.assert)(!x.done,"completeRequest() cannot be called twice."),x.done=!0;E.requests.length>0&&E.requests[0].done;){const y=E.requests.shift();setTimeout(y.callback,0)}}const E=this.loadingContext,x={id:`pdfjs-font-loading-${E.nextRequestId++}`,done:!1,complete:d,callback:D};return E.requests.push(x),x}get _loadTestFont(){const D=function(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")};return(0,u.shadow)(this,"_loadTestFont",D())}_prepareFontLoadEvent(D,d,E){function x(it,Q){return it.charCodeAt(Q)<<24|it.charCodeAt(Q+1)<<16|it.charCodeAt(Q+2)<<8|it.charCodeAt(Q+3)&255}function y(it,Q,K,q){const G=it.substring(0,Q),V=it.substring(Q+K);return G+q+V}let v,a;const t=this._document.createElement("canvas");t.width=1,t.height=1;const e=t.getContext("2d");let o=0;function _(it,Q){if(o++,o>30){(0,u.warn)("Load test font never loaded."),Q();return}if(e.font="30px "+it,e.fillText(".",0,20),e.getImageData(0,0,1,1).data[3]>0){Q();return}setTimeout(_.bind(null,it,Q))}const b=`lt${Date.now()}${this.loadTestFontId++}`;let l=this._loadTestFont;l=y(l,976,b.length,b);const s=16,g=1482184792;let w=x(l,s);for(v=0,a=b.length-3;v<a;v+=4)w=w-g+x(b,v)|0;v<b.length&&(w=w-g+x(b+"XXX",v)|0),l=y(l,s,4,(0,u.string32)(w));const S=`url(data:font/opentype;base64,${btoa(l)});`,m=`@font-face {font-family:"${b}";src:${S}}`;this.insertRule(m);const P=[];for(const it of d)P.push(it.loadedName);P.push(b);const tt=this._document.createElement("div");tt.style.visibility="hidden",tt.style.width=tt.style.height="10px",tt.style.position="absolute",tt.style.top=tt.style.left="0px";for(const it of P){const Q=this._document.createElement("span");Q.textContent="Hi",Q.style.fontFamily=it,tt.append(Q)}this._document.body.append(tt),_(b,()=>{tt.remove(),E.complete()})}};class R{constructor(D,{isEvalSupported:d=!0,disableFontFace:E=!1,ignoreErrors:x=!1,onUnsupportedFeature:y,fontRegistry:v=null}){this.compiledGlyphs=Object.create(null);for(const a in D)this[a]=D[a];this.isEvalSupported=d!==!1,this.disableFontFace=E===!0,this.ignoreErrors=x===!0,this._onUnsupportedFeature=y,this.fontRegistry=v}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let D;if(!this.cssFontInfo)D=new FontFace(this.loadedName,this.data,{});else{const d={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(d.style=`oblique ${this.cssFontInfo.italicAngle}deg`),D=new FontFace(this.cssFontInfo.fontFamily,this.data,d)}return this.fontRegistry&&this.fontRegistry.registerFont(this),D}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const D=(0,u.bytesToString)(this.data),d=`url(data:${this.mimetype};base64,${btoa(D)});`;let E;if(!this.cssFontInfo)E=`@font-face {font-family:"${this.loadedName}";src:${d}}`;else{let x=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(x+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),E=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${x}src:${d}}`}return this.fontRegistry&&this.fontRegistry.registerFont(this,d),E}getPathGenerator(D,d){if(this.compiledGlyphs[d]!==void 0)return this.compiledGlyphs[d];let E;try{E=D.get(this.loadedName+"_path_"+d)}catch(x){if(!this.ignoreErrors)throw x;return this._onUnsupportedFeature({featureId:u.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,u.warn)(`getPathGenerator - ignoring character: "${x}".`),this.compiledGlyphs[d]=function(y,v){}}if(this.isEvalSupported&&u.FeatureTest.isEvalSupported){const x=[];for(const y of E){const v=y.args!==void 0?y.args.join(","):"";x.push("c.",y.cmd,"(",v,`);
`)}return this.compiledGlyphs[d]=new Function("c","size",x.join(""))}return this.compiledGlyphs[d]=function(x,y){for(const v of E)v.cmd==="scale"&&(v.args=[y,-y]),x[v.cmd].apply(x,v.args)}}}r.FontFaceObject=R},(z,r,L)=>{var nt,fe;Object.defineProperty(r,"__esModule",{value:!0}),r.CanvasGraphics=void 0;var u=L(8),f=L(1),O=L(13),R=L(14),$=L(3);const D=16,d=100,E=4096,x=15,y=10,v=$.isNodeJS&&typeof Path2D=="undefined"?-1:1e3,a=16;function t(j,h){if(j._removeMirroring)throw new Error("Context is already forwarding operations.");j.__originalSave=j.save,j.__originalRestore=j.restore,j.__originalRotate=j.rotate,j.__originalScale=j.scale,j.__originalTranslate=j.translate,j.__originalTransform=j.transform,j.__originalSetTransform=j.setTransform,j.__originalResetTransform=j.resetTransform,j.__originalClip=j.clip,j.__originalMoveTo=j.moveTo,j.__originalLineTo=j.lineTo,j.__originalBezierCurveTo=j.bezierCurveTo,j.__originalRect=j.rect,j.__originalClosePath=j.closePath,j.__originalBeginPath=j.beginPath,j._removeMirroring=()=>{j.save=j.__originalSave,j.restore=j.__originalRestore,j.rotate=j.__originalRotate,j.scale=j.__originalScale,j.translate=j.__originalTranslate,j.transform=j.__originalTransform,j.setTransform=j.__originalSetTransform,j.resetTransform=j.__originalResetTransform,j.clip=j.__originalClip,j.moveTo=j.__originalMoveTo,j.lineTo=j.__originalLineTo,j.bezierCurveTo=j.__originalBezierCurveTo,j.rect=j.__originalRect,j.closePath=j.__originalClosePath,j.beginPath=j.__originalBeginPath,delete j._removeMirroring},j.save=function(){h.save(),this.__originalSave()},j.restore=function(){h.restore(),this.__originalRestore()},j.translate=function(T,I){h.translate(T,I),this.__originalTranslate(T,I)},j.scale=function(T,I){h.scale(T,I),this.__originalScale(T,I)},j.transform=function(T,I,N,U,Y,X){h.transform(T,I,N,U,Y,X),this.__originalTransform(T,I,N,U,Y,X)},j.setTransform=function(T,I,N,U,Y,X){h.setTransform(T,I,N,U,Y,X),this.__originalSetTransform(T,I,N,U,Y,X)},j.resetTransform=function(){h.resetTransform(),this.__originalResetTransform()},j.rotate=function(T){h.rotate(T),this.__originalRotate(T)},j.clip=function(T){h.clip(T),this.__originalClip(T)},j.moveTo=function(c,T){h.moveTo(c,T),this.__originalMoveTo(c,T)},j.lineTo=function(c,T){h.lineTo(c,T),this.__originalLineTo(c,T)},j.bezierCurveTo=function(c,T,I,N,U,Y){h.bezierCurveTo(c,T,I,N,U,Y),this.__originalBezierCurveTo(c,T,I,N,U,Y)},j.rect=function(c,T,I,N){h.rect(c,T,I,N),this.__originalRect(c,T,I,N)},j.closePath=function(){h.closePath(),this.__originalClosePath()},j.beginPath=function(){h.beginPath(),this.__originalBeginPath()}}class e{constructor(h){this.canvasFactory=h,this.cache=Object.create(null)}getCanvas(h,c,T){let I;return this.cache[h]!==void 0?(I=this.cache[h],this.canvasFactory.reset(I,c,T)):(I=this.canvasFactory.create(c,T),this.cache[h]=I),I}delete(h){delete this.cache[h]}clear(){for(const h in this.cache){const c=this.cache[h];this.canvasFactory.destroy(c),delete this.cache[h]}}}function o(j,h,c,T,I,N,U,Y,X,i){const[p,A,C,F,B,st]=(0,u.getCurrentTransform)(j);if(A===0&&C===0){const ot=U*p+B,et=Math.round(ot),lt=Y*F+st,ft=Math.round(lt),M=(U+X)*p+B,ut=Math.abs(Math.round(M)-et)||1,At=(Y+i)*F+st,vt=Math.abs(Math.round(At)-ft)||1;return j.setTransform(Math.sign(p),0,0,Math.sign(F),et,ft),j.drawImage(h,c,T,I,N,0,0,ut,vt),j.setTransform(p,A,C,F,B,st),[ut,vt]}if(p===0&&F===0){const ot=Y*C+B,et=Math.round(ot),lt=U*A+st,ft=Math.round(lt),M=(Y+i)*C+B,ut=Math.abs(Math.round(M)-et)||1,At=(U+X)*A+st,vt=Math.abs(Math.round(At)-ft)||1;return j.setTransform(0,Math.sign(A),Math.sign(C),0,et,ft),j.drawImage(h,c,T,I,N,0,0,vt,ut),j.setTransform(p,A,C,F,B,st),[vt,ut]}j.drawImage(h,c,T,I,N,U,Y,X,i);const dt=Math.hypot(p,A),Z=Math.hypot(C,F);return[dt*X,Z*i]}function _(j){const{width:h,height:c}=j;if(h>v||c>v)return null;const T=1e3,I=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),N=h+1;let U=new Uint8Array(N*(c+1)),Y,X,i;const p=h+7&-8;let A=new Uint8Array(p*c),C=0;for(const Z of j.data){let ot=128;for(;ot>0;)A[C++]=Z&ot?0:255,ot>>=1}let F=0;for(C=0,A[C]!==0&&(U[0]=1,++F),X=1;X<h;X++)A[C]!==A[C+1]&&(U[X]=A[C]?2:1,++F),C++;for(A[C]!==0&&(U[X]=2,++F),Y=1;Y<c;Y++){C=Y*p,i=Y*N,A[C-p]!==A[C]&&(U[i]=A[C]?1:8,++F);let Z=(A[C]?4:0)+(A[C-p]?8:0);for(X=1;X<h;X++)Z=(Z>>2)+(A[C+1]?4:0)+(A[C-p+1]?8:0),I[Z]&&(U[i+X]=I[Z],++F),C++;if(A[C-p]!==A[C]&&(U[i+X]=A[C]?2:4,++F),F>T)return null}for(C=p*(c-1),i=Y*N,A[C]!==0&&(U[i]=8,++F),X=1;X<h;X++)A[C]!==A[C+1]&&(U[i+X]=A[C]?4:8,++F),C++;if(A[C]!==0&&(U[i+X]=4,++F),F>T)return null;const B=new Int32Array([0,N,-1,0,-N,0,0,0,1]),st=new Path2D;for(Y=0;F&&Y<=c;Y++){let Z=Y*N;const ot=Z+h;for(;Z<ot&&!U[Z];)Z++;if(Z===ot)continue;st.moveTo(Z%N,Y);const et=Z;let lt=U[Z];do{const ft=B[lt];do Z+=ft;while(!U[Z]);const M=U[Z];M!==5&&M!==10?(lt=M,U[Z]=0):(lt=M&51*lt>>4,U[Z]&=lt>>2|lt<<2),st.lineTo(Z%N,Z/N|0),U[Z]||--F}while(et!==Z);--Y}return A=null,U=null,function(Z){Z.save(),Z.scale(1/h,-1/c),Z.translate(0,-c),Z.fill(st),Z.beginPath(),Z.restore()}}class b{constructor(h,c){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=f.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=f.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=f.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,h,c])}clone(){const h=Object.create(this);return h.clipBox=this.clipBox.slice(),h}setCurrentPoint(h,c){this.x=h,this.y=c}updatePathMinMax(h,c,T){[c,T]=f.Util.applyTransform([c,T],h),this.minX=Math.min(this.minX,c),this.minY=Math.min(this.minY,T),this.maxX=Math.max(this.maxX,c),this.maxY=Math.max(this.maxY,T)}updateRectMinMax(h,c){const T=f.Util.applyTransform(c,h),I=f.Util.applyTransform(c.slice(2),h);this.minX=Math.min(this.minX,T[0],I[0]),this.minY=Math.min(this.minY,T[1],I[1]),this.maxX=Math.max(this.maxX,T[0],I[0]),this.maxY=Math.max(this.maxY,T[1],I[1])}updateScalingPathMinMax(h,c){f.Util.scaleMinMax(h,c),this.minX=Math.min(this.minX,c[0]),this.maxX=Math.max(this.maxX,c[1]),this.minY=Math.min(this.minY,c[2]),this.maxY=Math.max(this.maxY,c[3])}updateCurvePathMinMax(h,c,T,I,N,U,Y,X,i,p){const A=f.Util.bezierBoundingBox(c,T,I,N,U,Y,X,i);if(p){p[0]=Math.min(p[0],A[0],A[2]),p[1]=Math.max(p[1],A[0],A[2]),p[2]=Math.min(p[2],A[1],A[3]),p[3]=Math.max(p[3],A[1],A[3]);return}this.updateRectMinMax(h,A)}getPathBoundingBox(h=O.PathType.FILL,c=null){const T=[this.minX,this.minY,this.maxX,this.maxY];if(h===O.PathType.STROKE){c||(0,f.unreachable)("Stroke bounding box must include transform.");const I=f.Util.singularValueDecompose2dScale(c),N=I[0]*this.lineWidth/2,U=I[1]*this.lineWidth/2;T[0]-=N,T[1]-=U,T[2]+=N,T[3]+=U}return T}updateClipFromPath(){const h=f.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(h||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(h){this.clipBox=h,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(h=O.PathType.FILL,c=null){return f.Util.intersect(this.clipBox,this.getPathBoundingBox(h,c))}}function l(j,h,c=null){if(typeof ImageData!="undefined"&&h instanceof ImageData){j.putImageData(h,0,0);return}const T=h.height,I=h.width,N=T%a,U=(T-N)/a,Y=N===0?U:U+1,X=j.createImageData(I,a);let i=0,p;const A=h.data,C=X.data;let F,B,st,dt,Z,ot,et,lt;if(c)switch(c.length){case 1:Z=c[0],ot=c[0],et=c[0],lt=c[0];break;case 4:Z=c[0],ot=c[1],et=c[2],lt=c[3];break}if(h.kind===f.ImageKind.GRAYSCALE_1BPP){const ft=A.byteLength,M=new Uint32Array(C.buffer,0,C.byteLength>>2),ut=M.length,At=I+7>>3;let vt=4294967295,Et=f.FeatureTest.isLittleEndian?4278190080:255;for(lt&&lt[0]===255&&lt[255]===0&&([vt,Et]=[Et,vt]),F=0;F<Y;F++){for(st=F<U?a:N,p=0,B=0;B<st;B++){const Tt=ft-i;let Rt=0;const Ft=Tt>At?I:Tt*8-7,Xt=Ft&-8;let xt=0,Ot=0;for(;Rt<Xt;Rt+=8)Ot=A[i++],M[p++]=Ot&128?vt:Et,M[p++]=Ot&64?vt:Et,M[p++]=Ot&32?vt:Et,M[p++]=Ot&16?vt:Et,M[p++]=Ot&8?vt:Et,M[p++]=Ot&4?vt:Et,M[p++]=Ot&2?vt:Et,M[p++]=Ot&1?vt:Et;for(;Rt<Ft;Rt++)xt===0&&(Ot=A[i++],xt=128),M[p++]=Ot&xt?vt:Et,xt>>=1}for(;p<ut;)M[p++]=0;j.putImageData(X,0,F*a)}}else if(h.kind===f.ImageKind.RGBA_32BPP){const ft=!!(Z||ot||et);for(B=0,dt=I*a*4,F=0;F<U;F++){if(C.set(A.subarray(i,i+dt)),i+=dt,ft)for(let M=0;M<dt;M+=4)Z&&(C[M+0]=Z[C[M+0]]),ot&&(C[M+1]=ot[C[M+1]]),et&&(C[M+2]=et[C[M+2]]);j.putImageData(X,0,B),B+=a}if(F<Y){if(dt=I*N*4,C.set(A.subarray(i,i+dt)),ft)for(let M=0;M<dt;M+=4)Z&&(C[M+0]=Z[C[M+0]]),ot&&(C[M+1]=ot[C[M+1]]),et&&(C[M+2]=et[C[M+2]]);j.putImageData(X,0,B)}}else if(h.kind===f.ImageKind.RGB_24BPP){const ft=!!(Z||ot||et);for(st=a,dt=I*st,F=0;F<Y;F++){for(F>=U&&(st=N,dt=I*st),p=0,B=dt;B--;)C[p++]=A[i++],C[p++]=A[i++],C[p++]=A[i++],C[p++]=255;if(ft)for(let M=0;M<p;M+=4)Z&&(C[M+0]=Z[C[M+0]]),ot&&(C[M+1]=ot[C[M+1]]),et&&(C[M+2]=et[C[M+2]]);j.putImageData(X,0,F*a)}}else throw new Error(`bad image kind: ${h.kind}`)}function n(j,h){if(h.bitmap){j.drawImage(h.bitmap,0,0);return}const c=h.height,T=h.width,I=c%a,N=(c-I)/a,U=I===0?N:N+1,Y=j.createImageData(T,a);let X=0;const i=h.data,p=Y.data;for(let A=0;A<U;A++){const C=A<N?a:I;({srcPos:X}=(0,R.applyMaskImageData)({src:i,srcPos:X,dest:p,width:T,height:C})),j.putImageData(Y,0,A*a)}}function s(j,h){const c=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let T=0,I=c.length;T<I;T++){const N=c[T];j[N]!==void 0&&(h[N]=j[N])}j.setLineDash!==void 0&&(h.setLineDash(j.getLineDash()),h.lineDashOffset=j.lineDashOffset)}function g(j,h){j.strokeStyle=j.fillStyle=h||"#000000",j.fillRule="nonzero",j.globalAlpha=1,j.lineWidth=1,j.lineCap="butt",j.lineJoin="miter",j.miterLimit=10,j.globalCompositeOperation="source-over",j.font="10px sans-serif",j.setLineDash!==void 0&&(j.setLineDash([]),j.lineDashOffset=0)}function w(j,h,c,T){const I=j.length;for(let N=3;N<I;N+=4){const U=j[N];if(U===0)j[N-3]=h,j[N-2]=c,j[N-1]=T;else if(U<255){const Y=255-U;j[N-3]=j[N-3]*U+h*Y>>8,j[N-2]=j[N-2]*U+c*Y>>8,j[N-1]=j[N-1]*U+T*Y>>8}}}function S(j,h,c){const T=j.length,I=1/255;for(let N=3;N<T;N+=4){const U=c?c[j[N]]:j[N];h[N]=h[N]*U*I|0}}function m(j,h,c){const T=j.length;for(let I=3;I<T;I+=4){const N=j[I-3]*77+j[I-2]*152+j[I-1]*28;h[I]=c?h[I]*c[N>>8]>>8:h[I]*N>>16}}function P(j,h,c,T,I,N,U,Y,X,i,p){const A=!!N,C=A?N[0]:0,F=A?N[1]:0,B=A?N[2]:0;let st;I==="Luminosity"?st=m:st=S;const Z=Math.min(T,Math.ceil(1048576/c));for(let ot=0;ot<T;ot+=Z){const et=Math.min(Z,T-ot),lt=j.getImageData(Y-i,ot+(X-p),c,et),ft=h.getImageData(Y,ot+X,c,et);A&&w(lt.data,C,F,B),st(lt.data,ft.data,U),h.putImageData(ft,Y,ot+X)}}function tt(j,h,c,T){const I=T[0],N=T[1],U=T[2]-I,Y=T[3]-N;U===0||Y===0||(P(h.context,c,U,Y,h.subtype,h.backdrop,h.transferMap,I,N,h.offsetX,h.offsetY),j.save(),j.globalAlpha=1,j.globalCompositeOperation="source-over",j.setTransform(1,0,0,1,0,0),j.drawImage(c.canvas,0,0),j.restore())}function it(j,h){const c=f.Util.singularValueDecompose2dScale(j);c[0]=Math.fround(c[0]),c[1]=Math.fround(c[1]);const T=Math.fround((globalThis.devicePixelRatio||1)*u.PixelsPerInch.PDF_TO_CSS_UNITS);return h!==void 0?h:c[0]<=T||c[1]<=T}const Q=["butt","round","square"],K=["miter","round","bevel"],q={},G={},bt=class{constructor(h,c,T,I,N,U,Y,X){at(this,nt);this.ctx=h,this.current=new b(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=c,this.objs=T,this.canvasFactory=I,this.imageLayer=N,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=U,this.cachedCanvases=new e(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=Y,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=(X==null?void 0:X.background)||null,this.foregroundColor=(X==null?void 0:X.foreground)||null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(h,c=null){return typeof h=="string"?h.startsWith("g_")?this.commonObjs.get(h):this.objs.get(h):c}beginDrawing({transform:h,viewport:c,transparency:T=!1,background:I=null}){const N=this.ctx.canvas.width,U=this.ctx.canvas.height,Y=I||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const X=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const i=this.backgroundColor=this.ctx.fillStyle;let p=!0,A=Y;if(this.ctx.fillStyle=Y,A=this.ctx.fillStyle,p=typeof A=="string"&&/^#[0-9A-Fa-f]{6}$/.test(A),X==="#000000"&&i==="#ffffff"||X===i||!p)this.foregroundColor=this.backgroundColor=null;else{const[C,F,B]=(0,u.getRGB)(A),st=Z=>(Z/=255,Z<=.03928?Z/12.92:((Z+.055)/1.055)**2.4),dt=Math.round(.2126*st(C)+.7152*st(F)+.0722*st(B));this.selectColor=(Z,ot,et)=>{const lt=.2126*st(Z)+.7152*st(ot)+.0722*st(et);return Math.round(lt)===dt?i:X}}}if(this.ctx.fillStyle=this.backgroundColor||Y,this.ctx.fillRect(0,0,N,U),this.ctx.restore(),T){const X=this.cachedCanvases.getCanvas("transparent",N,U);this.compositeCtx=this.ctx,this.transparentCanvas=X.canvas,this.ctx=X.context,this.ctx.save(),this.ctx.transform(...(0,u.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),g(this.ctx,this.foregroundColor),h&&(this.ctx.transform(...h),this.outputScaleX=h[0],this.outputScaleY=h[0]),this.ctx.transform(...c.transform),this.viewportScale=c.scale,this.baseTransform=(0,u.getCurrentTransform)(this.ctx),this.imageLayer&&((0,u.deprecated)("The `imageLayer` functionality will be removed in the future."),this.imageLayer.beginLayout())}executeOperatorList(h,c,T,I){const N=h.argsArray,U=h.fnArray;let Y=c||0;const X=N.length;if(X===Y)return Y;const i=X-Y>y&&typeof T=="function",p=i?Date.now()+x:0;let A=0;const C=this.commonObjs,F=this.objs;let B;for(;;){if(I!==void 0&&Y===I.nextBreakPoint)return I.breakIt(Y,T),Y;if(B=U[Y],B!==f.OPS.dependency)this[B].apply(this,N[Y]);else for(const st of N[Y]){const dt=st.startsWith("g_")?C:F;if(!dt.has(st))return dt.get(st,T),Y}if(Y++,Y===X)return Y;if(i&&++A>y){if(Date.now()>p)return T(),Y;A=0}}}endDrawing(){ht(this,nt,fe).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const h of this._cachedBitmapsMap.values()){for(const c of h.values())typeof HTMLCanvasElement!="undefined"&&c instanceof HTMLCanvasElement&&(c.width=c.height=0);h.clear()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(h,c){const T=h.width,I=h.height;let N=Math.max(Math.hypot(c[0],c[1]),1),U=Math.max(Math.hypot(c[2],c[3]),1),Y=T,X=I,i="prescale1",p,A;for(;N>2&&Y>1||U>2&&X>1;){let C=Y,F=X;N>2&&Y>1&&(C=Math.ceil(Y/2),N/=Y/C),U>2&&X>1&&(F=Math.ceil(X/2),U/=X/F),p=this.cachedCanvases.getCanvas(i,C,F),A=p.context,A.clearRect(0,0,C,F),A.drawImage(h,0,0,Y,X,0,0,C,F),h=p.canvas,Y=C,X=F,i=i==="prescale1"?"prescale2":"prescale1"}return{img:h,paintWidth:Y,paintHeight:X}}_createMaskCanvas(h){const c=this.ctx,{width:T,height:I}=h,N=this.current.fillColor,U=this.current.patternFill,Y=(0,u.getCurrentTransform)(c);let X,i,p,A;if((h.bitmap||h.data)&&h.count>1){const ut=h.bitmap||h.data.buffer,At=Y.slice(0,4);i=JSON.stringify(U?At:[At,N]),X=this._cachedBitmapsMap.get(ut),X||(X=new Map,this._cachedBitmapsMap.set(ut,X));const vt=X.get(i);if(vt&&!U){const Et=Math.round(Math.min(Y[0],Y[2])+Y[4]),Tt=Math.round(Math.min(Y[1],Y[3])+Y[5]);return{canvas:vt,offsetX:Et,offsetY:Tt}}p=vt}p||(A=this.cachedCanvases.getCanvas("maskCanvas",T,I),n(A.context,h));let C=f.Util.transform(Y,[1/T,0,0,-1/I,0,0]);C=f.Util.transform(C,[1,0,0,1,0,-I]);const F=f.Util.applyTransform([0,0],C),B=f.Util.applyTransform([T,I],C),st=f.Util.normalizeRect([F[0],F[1],B[0],B[1]]),dt=Math.round(st[2]-st[0])||1,Z=Math.round(st[3]-st[1])||1,ot=this.cachedCanvases.getCanvas("fillCanvas",dt,Z),et=ot.context,lt=Math.min(F[0],B[0]),ft=Math.min(F[1],B[1]);et.translate(-lt,-ft),et.transform(...C),p||(p=this._scaleImage(A.canvas,(0,u.getCurrentTransformInverse)(et)),p=p.img,X&&U&&X.set(i,p)),et.imageSmoothingEnabled=it((0,u.getCurrentTransform)(et),h.interpolate),o(et,p,0,0,p.width,p.height,0,0,T,I),et.globalCompositeOperation="source-in";const M=f.Util.transform((0,u.getCurrentTransformInverse)(et),[1,0,0,1,-lt,-ft]);return et.fillStyle=U?N.getPattern(c,this,M,O.PathType.FILL):N,et.fillRect(0,0,T,I),X&&!U&&(this.cachedCanvases.delete("fillCanvas"),X.set(i,ot.canvas)),{canvas:ot.canvas,offsetX:Math.round(lt),offsetY:Math.round(ft)}}setLineWidth(h){h!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=h,this.ctx.lineWidth=h}setLineCap(h){this.ctx.lineCap=Q[h]}setLineJoin(h){this.ctx.lineJoin=K[h]}setMiterLimit(h){this.ctx.miterLimit=h}setDash(h,c){const T=this.ctx;T.setLineDash!==void 0&&(T.setLineDash(h),T.lineDashOffset=c)}setRenderingIntent(h){}setFlatness(h){}setGState(h){for(let c=0,T=h.length;c<T;c++){const I=h[c],N=I[0],U=I[1];switch(N){case"LW":this.setLineWidth(U);break;case"LC":this.setLineCap(U);break;case"LJ":this.setLineJoin(U);break;case"ML":this.setMiterLimit(U);break;case"D":this.setDash(U[0],U[1]);break;case"RI":this.setRenderingIntent(U);break;case"FL":this.setFlatness(U);break;case"Font":this.setFont(U[0],U[1]);break;case"CA":this.current.strokeAlpha=I[1];break;case"ca":this.current.fillAlpha=I[1],this.ctx.globalAlpha=I[1];break;case"BM":this.ctx.globalCompositeOperation=U;break;case"SMask":this.current.activeSMask=U?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=U}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const h=this.inSMaskMode;this.current.activeSMask&&!h?this.beginSMaskMode():!this.current.activeSMask&&h&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const h=this.ctx.canvas.width,c=this.ctx.canvas.height,T="smaskGroupAt"+this.groupLevel,I=this.cachedCanvases.getCanvas(T,h,c);this.suspendedCtx=this.ctx,this.ctx=I.context;const N=this.ctx;N.setTransform(...(0,u.getCurrentTransform)(this.suspendedCtx)),s(this.suspendedCtx,N),t(N,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),s(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(h){if(!this.current.activeSMask)return;h?(h[0]=Math.floor(h[0]),h[1]=Math.floor(h[1]),h[2]=Math.ceil(h[2]),h[3]=Math.ceil(h[3])):h=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const c=this.current.activeSMask,T=this.suspendedCtx;tt(T,c,this.ctx,h),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(s(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const h=this.current;this.stateStack.push(h),this.current=h.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),s(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(h,c,T,I,N,U){this.ctx.transform(h,c,T,I,N,U),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(h,c,T){const I=this.ctx,N=this.current;let U=N.x,Y=N.y,X,i;const p=(0,u.getCurrentTransform)(I),A=p[0]===0&&p[3]===0||p[1]===0&&p[2]===0,C=A?T.slice(0):null;for(let F=0,B=0,st=h.length;F<st;F++)switch(h[F]|0){case f.OPS.rectangle:U=c[B++],Y=c[B++];const dt=c[B++],Z=c[B++],ot=U+dt,et=Y+Z;I.moveTo(U,Y),dt===0||Z===0?I.lineTo(ot,et):(I.lineTo(ot,Y),I.lineTo(ot,et),I.lineTo(U,et)),A||N.updateRectMinMax(p,[U,Y,ot,et]),I.closePath();break;case f.OPS.moveTo:U=c[B++],Y=c[B++],I.moveTo(U,Y),A||N.updatePathMinMax(p,U,Y);break;case f.OPS.lineTo:U=c[B++],Y=c[B++],I.lineTo(U,Y),A||N.updatePathMinMax(p,U,Y);break;case f.OPS.curveTo:X=U,i=Y,U=c[B+4],Y=c[B+5],I.bezierCurveTo(c[B],c[B+1],c[B+2],c[B+3],U,Y),N.updateCurvePathMinMax(p,X,i,c[B],c[B+1],c[B+2],c[B+3],U,Y,C),B+=6;break;case f.OPS.curveTo2:X=U,i=Y,I.bezierCurveTo(U,Y,c[B],c[B+1],c[B+2],c[B+3]),N.updateCurvePathMinMax(p,X,i,U,Y,c[B],c[B+1],c[B+2],c[B+3],C),U=c[B+2],Y=c[B+3],B+=4;break;case f.OPS.curveTo3:X=U,i=Y,U=c[B+2],Y=c[B+3],I.bezierCurveTo(c[B],c[B+1],U,Y,U,Y),N.updateCurvePathMinMax(p,X,i,c[B],c[B+1],U,Y,U,Y,C),B+=4;break;case f.OPS.closePath:I.closePath();break}A&&N.updateScalingPathMinMax(p,C),N.setCurrentPoint(U,Y)}closePath(){this.ctx.closePath()}stroke(h){h=typeof h!="undefined"?h:!0;const c=this.ctx,T=this.current.strokeColor;c.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof T=="object"&&(T==null?void 0:T.getPattern)?(c.save(),c.strokeStyle=T.getPattern(c,this,(0,u.getCurrentTransformInverse)(c),O.PathType.STROKE),this.rescaleAndStroke(!1),c.restore()):this.rescaleAndStroke(!0)),h&&this.consumePath(this.current.getClippedPathBoundingBox()),c.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(h){h=typeof h!="undefined"?h:!0;const c=this.ctx,T=this.current.fillColor,I=this.current.patternFill;let N=!1;I&&(c.save(),c.fillStyle=T.getPattern(c,this,(0,u.getCurrentTransformInverse)(c),O.PathType.FILL),N=!0);const U=this.current.getClippedPathBoundingBox();this.contentVisible&&U!==null&&(this.pendingEOFill?(c.fill("evenodd"),this.pendingEOFill=!1):c.fill()),N&&c.restore(),h&&this.consumePath(U)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=q}eoClip(){this.pendingClip=G}beginText(){this.current.textMatrix=f.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const h=this.pendingTextPaths,c=this.ctx;if(h===void 0){c.beginPath();return}c.save(),c.beginPath();for(const T of h)c.setTransform(...T.transform),c.translate(T.x,T.y),T.addToPath(c,T.fontSize);c.restore(),c.clip(),c.beginPath(),delete this.pendingTextPaths}setCharSpacing(h){this.current.charSpacing=h}setWordSpacing(h){this.current.wordSpacing=h}setHScale(h){this.current.textHScale=h/100}setLeading(h){this.current.leading=-h}setFont(h,c){const T=this.commonObjs.get(h),I=this.current;if(!T)throw new Error(`Can't find font for ${h}`);if(I.fontMatrix=T.fontMatrix||f.FONT_IDENTITY_MATRIX,(I.fontMatrix[0]===0||I.fontMatrix[3]===0)&&(0,f.warn)("Invalid font matrix for font "+h),c<0?(c=-c,I.fontDirection=-1):I.fontDirection=1,this.current.font=T,this.current.fontSize=c,T.isType3Font)return;const N=T.loadedName||"sans-serif";let U="normal";T.black?U="900":T.bold&&(U="bold");const Y=T.italic?"italic":"normal",X=`"${N}", ${T.fallbackName}`;let i=c;c<D?i=D:c>d&&(i=d),this.current.fontSizeScale=c/i,this.ctx.font=`${Y} ${U} ${i}px ${X}`}setTextRenderingMode(h){this.current.textRenderingMode=h}setTextRise(h){this.current.textRise=h}moveText(h,c){this.current.x=this.current.lineX+=h,this.current.y=this.current.lineY+=c}setLeadingMoveText(h,c){this.setLeading(-c),this.moveText(h,c)}setTextMatrix(h,c,T,I,N,U){this.current.textMatrix=[h,c,T,I,N,U],this.current.textMatrixScale=Math.hypot(h,c),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(h,c,T,I){const N=this.ctx,U=this.current,Y=U.font,X=U.textRenderingMode,i=U.fontSize/U.fontSizeScale,p=X&f.TextRenderingMode.FILL_STROKE_MASK,A=!!(X&f.TextRenderingMode.ADD_TO_PATH_FLAG),C=U.patternFill&&!Y.missingFile;let F;(Y.disableFontFace||A||C)&&(F=Y.getPathGenerator(this.commonObjs,h)),Y.disableFontFace||C?(N.save(),N.translate(c,T),N.beginPath(),F(N,i),I&&N.setTransform(...I),(p===f.TextRenderingMode.FILL||p===f.TextRenderingMode.FILL_STROKE)&&N.fill(),(p===f.TextRenderingMode.STROKE||p===f.TextRenderingMode.FILL_STROKE)&&N.stroke(),N.restore()):((p===f.TextRenderingMode.FILL||p===f.TextRenderingMode.FILL_STROKE)&&N.fillText(h,c,T),(p===f.TextRenderingMode.STROKE||p===f.TextRenderingMode.FILL_STROKE)&&N.strokeText(h,c,T)),A&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,u.getCurrentTransform)(N),x:c,y:T,fontSize:i,addToPath:F})}get isFontSubpixelAAEnabled(){const{context:h}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);h.scale(1.5,1),h.fillText("I",0,10);const c=h.getImageData(0,0,10,10).data;let T=!1;for(let I=3;I<c.length;I+=4)if(c[I]>0&&c[I]<255){T=!0;break}return(0,f.shadow)(this,"isFontSubpixelAAEnabled",T)}showText(h){const c=this.current,T=c.font;if(T.isType3Font)return this.showType3Text(h);const I=c.fontSize;if(I===0)return;const N=this.ctx,U=c.fontSizeScale,Y=c.charSpacing,X=c.wordSpacing,i=c.fontDirection,p=c.textHScale*i,A=h.length,C=T.vertical,F=C?1:-1,B=T.defaultVMetrics,st=I*c.fontMatrix[0],dt=c.textRenderingMode===f.TextRenderingMode.FILL&&!T.disableFontFace&&!c.patternFill;N.save(),N.transform(...c.textMatrix),N.translate(c.x,c.y+c.textRise),i>0?N.scale(p,-1):N.scale(p,1);let Z;if(c.patternFill){N.save();const M=c.fillColor.getPattern(N,this,(0,u.getCurrentTransformInverse)(N),O.PathType.FILL);Z=(0,u.getCurrentTransform)(N),N.restore(),N.fillStyle=M}let ot=c.lineWidth;const et=c.textMatrixScale;if(et===0||ot===0){const M=c.textRenderingMode&f.TextRenderingMode.FILL_STROKE_MASK;(M===f.TextRenderingMode.STROKE||M===f.TextRenderingMode.FILL_STROKE)&&(ot=this.getSinglePixelWidth())}else ot/=et;U!==1&&(N.scale(U,U),ot/=U),N.lineWidth=ot;let lt=0,ft;for(ft=0;ft<A;++ft){const M=h[ft];if(typeof M=="number"){lt+=F*M*I/1e3;continue}let ut=!1;const At=(M.isSpace?X:0)+Y,vt=M.fontChar,Et=M.accent;let Tt,Rt,Ft=M.width;if(C){const xt=M.vmetric||B,Ot=-(M.vmetric?xt[1]:Ft*.5)*st,Zt=xt[2]*st;Ft=xt?-xt[0]:Ft,Tt=Ot/U,Rt=(lt+Zt)/U}else Tt=lt/U,Rt=0;if(T.remeasure&&Ft>0){const xt=N.measureText(vt).width*1e3/I*U;if(Ft<xt&&this.isFontSubpixelAAEnabled){const Ot=Ft/xt;ut=!0,N.save(),N.scale(Ot,1),Tt/=Ot}else Ft!==xt&&(Tt+=(Ft-xt)/2e3*I/U)}if(this.contentVisible&&(M.isInFont||T.missingFile)){if(dt&&!Et)N.fillText(vt,Tt,Rt);else if(this.paintChar(vt,Tt,Rt,Z),Et){const xt=Tt+I*Et.offset.x/U,Ot=Rt-I*Et.offset.y/U;this.paintChar(Et.fontChar,xt,Ot,Z)}}let Xt;C?Xt=Ft*st-At*i:Xt=Ft*st+At*i,lt+=Xt,ut&&N.restore()}C?c.y-=lt:c.x+=lt*p,N.restore(),this.compose()}showType3Text(h){const c=this.ctx,T=this.current,I=T.font,N=T.fontSize,U=T.fontDirection,Y=I.vertical?1:-1,X=T.charSpacing,i=T.wordSpacing,p=T.textHScale*U,A=T.fontMatrix||f.FONT_IDENTITY_MATRIX,C=h.length,F=T.textRenderingMode===f.TextRenderingMode.INVISIBLE;let B,st,dt,Z;if(!(F||N===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,c.save(),c.transform(...T.textMatrix),c.translate(T.x,T.y),c.scale(p,U),B=0;B<C;++B){if(st=h[B],typeof st=="number"){Z=Y*st*N/1e3,this.ctx.translate(Z,0),T.x+=Z*p;continue}const ot=(st.isSpace?i:0)+X,et=I.charProcOperatorList[st.operatorListId];if(!et){(0,f.warn)(`Type3 character "${st.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=st,this.save(),c.scale(N,N),c.transform(...A),this.executeOperatorList(et),this.restore()),dt=f.Util.applyTransform([st.width,0],A)[0]*N+ot,c.translate(dt,0),T.x+=dt*p}c.restore(),this.processingType3=null}}setCharWidth(h,c){}setCharWidthAndBounds(h,c,T,I,N,U){this.ctx.rect(T,I,N-T,U-I),this.ctx.clip(),this.endPath()}getColorN_Pattern(h){let c;if(h[0]==="TilingPattern"){const T=h[1],I=this.baseTransform||(0,u.getCurrentTransform)(this.ctx),N={createCanvasGraphics:U=>new bt(U,this.commonObjs,this.objs,this.canvasFactory)};c=new O.TilingPattern(h,T,this.ctx,N,I)}else c=this._getPattern(h[1],h[2]);return c}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(h,c,T){var N;const I=((N=this.selectColor)==null?void 0:N.call(this,h,c,T))||f.Util.makeHexColor(h,c,T);this.ctx.strokeStyle=I,this.current.strokeColor=I}setFillRGBColor(h,c,T){var N;const I=((N=this.selectColor)==null?void 0:N.call(this,h,c,T))||f.Util.makeHexColor(h,c,T);this.ctx.fillStyle=I,this.current.fillColor=I,this.current.patternFill=!1}_getPattern(h,c=null){let T;return this.cachedPatterns.has(h)?T=this.cachedPatterns.get(h):(T=(0,O.getShadingPattern)(this.objs.get(h)),this.cachedPatterns.set(h,T)),c&&(T.matrix=c),T}shadingFill(h){if(!this.contentVisible)return;const c=this.ctx;this.save();const T=this._getPattern(h);c.fillStyle=T.getPattern(c,this,(0,u.getCurrentTransformInverse)(c),O.PathType.SHADING);const I=(0,u.getCurrentTransformInverse)(c);if(I){const N=c.canvas,U=N.width,Y=N.height,X=f.Util.applyTransform([0,0],I),i=f.Util.applyTransform([0,Y],I),p=f.Util.applyTransform([U,0],I),A=f.Util.applyTransform([U,Y],I),C=Math.min(X[0],i[0],p[0],A[0]),F=Math.min(X[1],i[1],p[1],A[1]),B=Math.max(X[0],i[0],p[0],A[0]),st=Math.max(X[1],i[1],p[1],A[1]);this.ctx.fillRect(C,F,B-C,st-F)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,f.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,f.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(h,c){if(!!this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(h)&&h.length===6&&this.transform(...h),this.baseTransform=(0,u.getCurrentTransform)(this.ctx),c)){const T=c[2]-c[0],I=c[3]-c[1];this.ctx.rect(c[0],c[1],T,I),this.current.updateRectMinMax((0,u.getCurrentTransform)(this.ctx),c),this.clip(),this.endPath()}}paintFormXObjectEnd(){!this.contentVisible||(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(h){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const c=this.ctx;h.isolated||(0,f.info)("TODO: Support non-isolated groups."),h.knockout&&(0,f.warn)("Knockout groups not supported.");const T=(0,u.getCurrentTransform)(c);if(h.matrix&&c.transform(...h.matrix),!h.bbox)throw new Error("Bounding box is required.");let I=f.Util.getAxialAlignedBoundingBox(h.bbox,(0,u.getCurrentTransform)(c));const N=[0,0,c.canvas.width,c.canvas.height];I=f.Util.intersect(I,N)||[0,0,0,0];const U=Math.floor(I[0]),Y=Math.floor(I[1]);let X=Math.max(Math.ceil(I[2])-U,1),i=Math.max(Math.ceil(I[3])-Y,1),p=1,A=1;X>E&&(p=X/E,X=E),i>E&&(A=i/E,i=E),this.current.startNewPathAndClipBox([0,0,X,i]);let C="groupAt"+this.groupLevel;h.smask&&(C+="_smask_"+this.smaskCounter++%2);const F=this.cachedCanvases.getCanvas(C,X,i),B=F.context;B.scale(1/p,1/A),B.translate(-U,-Y),B.transform(...T),h.smask?this.smaskStack.push({canvas:F.canvas,context:B,offsetX:U,offsetY:Y,scaleX:p,scaleY:A,subtype:h.smask.subtype,backdrop:h.smask.backdrop,transferMap:h.smask.transferMap||null,startTransformInverse:null}):(c.setTransform(1,0,0,1,0,0),c.translate(U,Y),c.scale(p,A),c.save()),s(c,B),this.ctx=B,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(c),this.groupLevel++}endGroup(h){if(!this.contentVisible)return;this.groupLevel--;const c=this.ctx,T=this.groupStack.pop();if(this.ctx=T,this.ctx.imageSmoothingEnabled=!1,h.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const I=(0,u.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...I);const N=f.Util.getAxialAlignedBoundingBox([0,0,c.canvas.width,c.canvas.height],I);this.ctx.drawImage(c.canvas,0,0),this.ctx.restore(),this.compose(N)}}beginAnnotation(h,c,T,I,N){if(ht(this,nt,fe).call(this),g(this.ctx,this.foregroundColor),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(c)&&c.length===4){const U=c[2]-c[0],Y=c[3]-c[1];if(N&&this.annotationCanvasMap){T=T.slice(),T[4]-=c[0],T[5]-=c[1],c=c.slice(),c[0]=c[1]=0,c[2]=U,c[3]=Y;const[X,i]=f.Util.singularValueDecompose2dScale((0,u.getCurrentTransform)(this.ctx)),{viewportScale:p}=this,A=Math.ceil(U*this.outputScaleX*p),C=Math.ceil(Y*this.outputScaleY*p);this.annotationCanvas=this.canvasFactory.create(A,C);const{canvas:F,context:B}=this.annotationCanvas;this.annotationCanvasMap.set(h,F),this.annotationCanvas.savedCtx=this.ctx,this.ctx=B,this.ctx.setTransform(X,0,0,-i,0,Y*i),g(this.ctx,this.foregroundColor)}else g(this.ctx,this.foregroundColor),this.ctx.rect(c[0],c[1],U,Y),this.ctx.clip(),this.endPath()}this.current=new b(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...T),this.transform(...I)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(h){if(!this.contentVisible)return;const c=h.count;h=this.getObject(h.data,h),h.count=c;const T=this.ctx,I=this.processingType3;if(I&&(I.compiled===void 0&&(I.compiled=_(h)),I.compiled)){I.compiled(T);return}const N=this._createMaskCanvas(h),U=N.canvas;T.save(),T.setTransform(1,0,0,1,0,0),T.drawImage(U,N.offsetX,N.offsetY),T.restore(),this.compose()}paintImageMaskXObjectRepeat(h,c,T=0,I=0,N,U){if(!this.contentVisible)return;h=this.getObject(h.data,h);const Y=this.ctx;Y.save();const X=(0,u.getCurrentTransform)(Y);Y.transform(c,T,I,N,0,0);const i=this._createMaskCanvas(h);Y.setTransform(1,0,0,1,0,0);for(let p=0,A=U.length;p<A;p+=2){const C=f.Util.transform(X,[c,T,I,N,U[p],U[p+1]]),[F,B]=f.Util.applyTransform([0,0],C);Y.drawImage(i.canvas,F,B)}Y.restore(),this.compose()}paintImageMaskXObjectGroup(h){if(!this.contentVisible)return;const c=this.ctx,T=this.current.fillColor,I=this.current.patternFill;for(const N of h){const{data:U,width:Y,height:X,transform:i}=N,p=this.cachedCanvases.getCanvas("maskCanvas",Y,X),A=p.context;A.save();const C=this.getObject(U,N);n(A,C),A.globalCompositeOperation="source-in",A.fillStyle=I?T.getPattern(A,this,(0,u.getCurrentTransformInverse)(c),O.PathType.FILL):T,A.fillRect(0,0,Y,X),A.restore(),c.save(),c.transform(...i),c.scale(1,-1),o(c,p.canvas,0,0,Y,X,0,-1,1,1),c.restore()}this.compose()}paintImageXObject(h){if(!this.contentVisible)return;const c=this.getObject(h);if(!c){(0,f.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(c)}paintImageXObjectRepeat(h,c,T,I){if(!this.contentVisible)return;const N=this.getObject(h);if(!N){(0,f.warn)("Dependent image isn't ready yet");return}const U=N.width,Y=N.height,X=[];for(let i=0,p=I.length;i<p;i+=2)X.push({transform:[c,0,0,T,I[i],I[i+1]],x:0,y:0,w:U,h:Y});this.paintInlineImageXObjectGroup(N,X)}paintInlineImageXObject(h){if(!this.contentVisible)return;const c=h.width,T=h.height,I=this.ctx;this.save(),I.scale(1/c,-1/T);let N;if(typeof HTMLElement=="function"&&h instanceof HTMLElement||!h.data)N=h;else{const i=this.cachedCanvases.getCanvas("inlineImage",c,T),p=i.context;l(p,h,this.current.transferMaps),N=i.canvas}const U=this._scaleImage(N,(0,u.getCurrentTransformInverse)(I));I.imageSmoothingEnabled=it((0,u.getCurrentTransform)(I),h.interpolate);const[Y,X]=o(I,U.img,0,0,U.paintWidth,U.paintHeight,0,-T,c,T);if(this.imageLayer){const[i,p]=f.Util.applyTransform([0,-T],(0,u.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:h,left:i,top:p,width:Y,height:X})}this.compose(),this.restore()}paintInlineImageXObjectGroup(h,c){if(!this.contentVisible)return;const T=this.ctx,I=h.width,N=h.height,U=this.cachedCanvases.getCanvas("inlineImage",I,N),Y=U.context;l(Y,h,this.current.transferMaps);for(const X of c){if(T.save(),T.transform(...X.transform),T.scale(1,-1),o(T,U.canvas,X.x,X.y,X.w,X.h,0,-1,1,1),this.imageLayer){const[i,p]=f.Util.applyTransform([X.x,X.y],(0,u.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:h,left:i,top:p,width:I,height:N})}T.restore()}this.compose()}paintSolidColorImageMask(){!this.contentVisible||(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(h){}markPointProps(h,c){}beginMarkedContent(h){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(h,c){h==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(c)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(h){const c=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(h);const T=this.ctx;this.pendingClip&&(c||(this.pendingClip===G?T.clip("evenodd"):T.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),T.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const h=(0,u.getCurrentTransform)(this.ctx);if(h[1]===0&&h[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(h[0]),Math.abs(h[3]));else{const c=Math.abs(h[0]*h[3]-h[2]*h[1]),T=Math.hypot(h[0],h[2]),I=Math.hypot(h[1],h[3]);this._cachedGetSinglePixelWidth=Math.max(T,I)/c}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:h}=this.current,c=(0,u.getCurrentTransform)(this.ctx);let T,I;if(c[1]===0&&c[2]===0){const N=Math.abs(c[0]),U=Math.abs(c[3]);if(h===0)T=1/N,I=1/U;else{const Y=N*h,X=U*h;T=Y<1?1/Y:1,I=X<1?1/X:1}}else{const N=Math.abs(c[0]*c[3]-c[2]*c[1]),U=Math.hypot(c[0],c[1]),Y=Math.hypot(c[2],c[3]);if(h===0)T=Y/N,I=U/N;else{const X=h*N;T=Y>X?Y/X:1,I=U>X?U/X:1}}this._cachedScaleForStroking=[T,I]}return this._cachedScaleForStroking}rescaleAndStroke(h){const{ctx:c}=this,{lineWidth:T}=this.current,[I,N]=this.getScaleForStroking();if(c.lineWidth=T||1,I===1&&N===1){c.stroke();return}let U,Y,X;h&&(U=(0,u.getCurrentTransform)(c),Y=c.getLineDash().slice(),X=c.lineDashOffset),c.scale(I,N);const i=Math.max(I,N);c.setLineDash(c.getLineDash().map(p=>p/i)),c.lineDashOffset/=i,c.stroke(),h&&(c.setTransform(...U),c.setLineDash(Y),c.lineDashOffset=X)}isContentVisible(){for(let h=this.markedContentStack.length-1;h>=0;h--)if(!this.markedContentStack[h].visible)return!1;return!0}};let V=bt;nt=new WeakSet,fe=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},r.CanvasGraphics=V;for(const j in f.OPS)V.prototype[j]!==void 0&&(V.prototype[f.OPS[j]]=V.prototype[j])},(z,r,L)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.TilingPattern=r.PathType=void 0,r.getShadingPattern=a;var u=L(1),f=L(8),O=L(3);const R={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};r.PathType=R;function $(o,_){if(!_||O.isNodeJS)return;const b=_[2]-_[0],l=_[3]-_[1],n=new Path2D;n.rect(_[0],_[1],b,l),o.clip(n)}class D{constructor(){this.constructor===D&&(0,u.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,u.unreachable)("Abstract method `getPattern` called.")}}class d extends D{constructor(_){super(),this._type=_[1],this._bbox=_[2],this._colorStops=_[3],this._p0=_[4],this._p1=_[5],this._r0=_[6],this._r1=_[7],this.matrix=null}_createGradient(_){let b;this._type==="axial"?b=_.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(b=_.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const l of this._colorStops)b.addColorStop(l[0],l[1]);return b}getPattern(_,b,l,n){let s;if(n===R.STROKE||n===R.FILL){const g=b.current.getClippedPathBoundingBox(n,(0,f.getCurrentTransform)(_))||[0,0,0,0],w=Math.ceil(g[2]-g[0])||1,S=Math.ceil(g[3]-g[1])||1,m=b.cachedCanvases.getCanvas("pattern",w,S,!0),P=m.context;P.clearRect(0,0,P.canvas.width,P.canvas.height),P.beginPath(),P.rect(0,0,P.canvas.width,P.canvas.height),P.translate(-g[0],-g[1]),l=u.Util.transform(l,[1,0,0,1,g[0],g[1]]),P.transform(...b.baseTransform),this.matrix&&P.transform(...this.matrix),$(P,this._bbox),P.fillStyle=this._createGradient(P),P.fill(),s=_.createPattern(m.canvas,"no-repeat");const tt=new DOMMatrix(l);try{s.setTransform(tt)}catch(it){(0,u.warn)(`RadialAxialShadingPattern.getPattern: "${it==null?void 0:it.message}".`)}}else $(_,this._bbox),s=this._createGradient(_);return s}}function E(o,_,b,l,n,s,g,w){const S=_.coords,m=_.colors,P=o.data,tt=o.width*4;let it;S[b+1]>S[l+1]&&(it=b,b=l,l=it,it=s,s=g,g=it),S[l+1]>S[n+1]&&(it=l,l=n,n=it,it=g,g=w,w=it),S[b+1]>S[l+1]&&(it=b,b=l,l=it,it=s,s=g,g=it);const Q=(S[b]+_.offsetX)*_.scaleX,K=(S[b+1]+_.offsetY)*_.scaleY,q=(S[l]+_.offsetX)*_.scaleX,G=(S[l+1]+_.offsetY)*_.scaleY,V=(S[n]+_.offsetX)*_.scaleX,nt=(S[n+1]+_.offsetY)*_.scaleY;if(K>=nt)return;const ct=m[s],bt=m[s+1],j=m[s+2],h=m[g],c=m[g+1],T=m[g+2],I=m[w],N=m[w+1],U=m[w+2],Y=Math.round(K),X=Math.round(nt);let i,p,A,C,F,B,st,dt;for(let Z=Y;Z<=X;Z++){if(Z<G){let M;Z<K?M=0:M=(K-Z)/(K-G),i=Q-(Q-q)*M,p=ct-(ct-h)*M,A=bt-(bt-c)*M,C=j-(j-T)*M}else{let M;Z>nt?M=1:G===nt?M=0:M=(G-Z)/(G-nt),i=q-(q-V)*M,p=h-(h-I)*M,A=c-(c-N)*M,C=T-(T-U)*M}let ot;Z<K?ot=0:Z>nt?ot=1:ot=(K-Z)/(K-nt),F=Q-(Q-V)*ot,B=ct-(ct-I)*ot,st=bt-(bt-N)*ot,dt=j-(j-U)*ot;const et=Math.round(Math.min(i,F)),lt=Math.round(Math.max(i,F));let ft=tt*Z+et*4;for(let M=et;M<=lt;M++)ot=(i-M)/(i-F),ot<0?ot=0:ot>1&&(ot=1),P[ft++]=p-(p-B)*ot|0,P[ft++]=A-(A-st)*ot|0,P[ft++]=C-(C-dt)*ot|0,P[ft++]=255}}function x(o,_,b){const l=_.coords,n=_.colors;let s,g;switch(_.type){case"lattice":const w=_.verticesPerRow,S=Math.floor(l.length/w)-1,m=w-1;for(s=0;s<S;s++){let P=s*w;for(let tt=0;tt<m;tt++,P++)E(o,b,l[P],l[P+1],l[P+w],n[P],n[P+1],n[P+w]),E(o,b,l[P+w+1],l[P+1],l[P+w],n[P+w+1],n[P+1],n[P+w])}break;case"triangles":for(s=0,g=l.length;s<g;s+=3)E(o,b,l[s],l[s+1],l[s+2],n[s],n[s+1],n[s+2]);break;default:throw new Error("illegal figure")}}class y extends D{constructor(_){super(),this._coords=_[2],this._colors=_[3],this._figures=_[4],this._bounds=_[5],this._bbox=_[7],this._background=_[8],this.matrix=null}_createMeshCanvas(_,b,l){const w=Math.floor(this._bounds[0]),S=Math.floor(this._bounds[1]),m=Math.ceil(this._bounds[2])-w,P=Math.ceil(this._bounds[3])-S,tt=Math.min(Math.ceil(Math.abs(m*_[0]*1.1)),3e3),it=Math.min(Math.ceil(Math.abs(P*_[1]*1.1)),3e3),Q=m/tt,K=P/it,q={coords:this._coords,colors:this._colors,offsetX:-w,offsetY:-S,scaleX:1/Q,scaleY:1/K},G=tt+2*2,V=it+2*2,nt=l.getCanvas("mesh",G,V,!1),ct=nt.context,bt=ct.createImageData(tt,it);if(b){const h=bt.data;for(let c=0,T=h.length;c<T;c+=4)h[c]=b[0],h[c+1]=b[1],h[c+2]=b[2],h[c+3]=255}for(const h of this._figures)x(bt,h,q);return ct.putImageData(bt,2,2),{canvas:nt.canvas,offsetX:w-2*Q,offsetY:S-2*K,scaleX:Q,scaleY:K}}getPattern(_,b,l,n){$(_,this._bbox);let s;if(n===R.SHADING)s=u.Util.singularValueDecompose2dScale((0,f.getCurrentTransform)(_));else if(s=u.Util.singularValueDecompose2dScale(b.baseTransform),this.matrix){const w=u.Util.singularValueDecompose2dScale(this.matrix);s=[s[0]*w[0],s[1]*w[1]]}const g=this._createMeshCanvas(s,n===R.SHADING?null:this._background,b.cachedCanvases);return n!==R.SHADING&&(_.setTransform(...b.baseTransform),this.matrix&&_.transform(...this.matrix)),_.translate(g.offsetX,g.offsetY),_.scale(g.scaleX,g.scaleY),_.createPattern(g.canvas,"no-repeat")}}class v extends D{getPattern(){return"hotpink"}}function a(o){switch(o[0]){case"RadialAxial":return new d(o);case"Mesh":return new y(o);case"Dummy":return new v}throw new Error(`Unknown IR type: ${o[0]}`)}const t={COLORED:1,UNCOLORED:2};class e{static get MAX_PATTERN_SIZE(){return(0,u.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(_,b,l,n,s){this.operatorList=_[2],this.matrix=_[3]||[1,0,0,1,0,0],this.bbox=_[4],this.xstep=_[5],this.ystep=_[6],this.paintType=_[7],this.tilingType=_[8],this.color=b,this.ctx=l,this.canvasGraphicsFactory=n,this.baseTransform=s}createPatternCanvas(_){const b=this.operatorList,l=this.bbox,n=this.xstep,s=this.ystep,g=this.paintType,w=this.tilingType,S=this.color,m=this.canvasGraphicsFactory;(0,u.info)("TilingType: "+w);const P=l[0],tt=l[1],it=l[2],Q=l[3],K=u.Util.singularValueDecompose2dScale(this.matrix),q=u.Util.singularValueDecompose2dScale(this.baseTransform),G=[K[0]*q[0],K[1]*q[1]],V=this.getSizeAndScale(n,this.ctx.canvas.width,G[0]),nt=this.getSizeAndScale(s,this.ctx.canvas.height,G[1]),ct=_.cachedCanvases.getCanvas("pattern",V.size,nt.size,!0),bt=ct.context,j=m.createCanvasGraphics(bt);j.groupLevel=_.groupLevel,this.setFillAndStrokeStyleToContext(j,g,S);let h=P,c=tt,T=it,I=Q;return P<0&&(h=0,T+=Math.abs(P)),tt<0&&(c=0,I+=Math.abs(tt)),bt.translate(-(V.scale*h),-(nt.scale*c)),j.transform(V.scale,0,0,nt.scale,0,0),bt.save(),this.clipBbox(j,h,c,T,I),j.baseTransform=(0,f.getCurrentTransform)(j.ctx),j.executeOperatorList(b),j.endDrawing(),{canvas:ct.canvas,scaleX:V.scale,scaleY:nt.scale,offsetX:h,offsetY:c}}getSizeAndScale(_,b,l){_=Math.abs(_);const n=Math.max(e.MAX_PATTERN_SIZE,b);let s=Math.ceil(_*l);return s>=n?s=n:l=s/_,{scale:l,size:s}}clipBbox(_,b,l,n,s){const g=n-b,w=s-l;_.ctx.rect(b,l,g,w),_.current.updateRectMinMax((0,f.getCurrentTransform)(_.ctx),[b,l,n,s]),_.clip(),_.endPath()}setFillAndStrokeStyleToContext(_,b,l){const n=_.ctx,s=_.current;switch(b){case t.COLORED:const g=this.ctx;n.fillStyle=g.fillStyle,n.strokeStyle=g.strokeStyle,s.fillColor=g.fillStyle,s.strokeColor=g.strokeStyle;break;case t.UNCOLORED:const w=u.Util.makeHexColor(l[0],l[1],l[2]);n.fillStyle=w,n.strokeStyle=w,s.fillColor=w,s.strokeColor=w;break;default:throw new u.FormatError(`Unsupported paint type: ${b}`)}}getPattern(_,b,l,n){let s=l;n!==R.SHADING&&(s=u.Util.transform(s,b.baseTransform),this.matrix&&(s=u.Util.transform(s,this.matrix)));const g=this.createPatternCanvas(b);let w=new DOMMatrix(s);w=w.translate(g.offsetX,g.offsetY),w=w.scale(1/g.scaleX,1/g.scaleY);const S=_.createPattern(g.canvas,"repeat");try{S.setTransform(w)}catch(m){(0,u.warn)(`TilingPattern.getPattern: "${m==null?void 0:m.message}".`)}return S}}r.TilingPattern=e},(z,r,L)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.applyMaskImageData=f;var u=L(1);function f({src:O,srcPos:R=0,dest:$,destPos:D=0,width:d,height:E,inverseDecode:x=!1}){const y=u.FeatureTest.isLittleEndian?4278190080:255,[v,a]=x?[0,y]:[y,0],t=d>>3,e=d&7,o=O.length;$=new Uint32Array($.buffer);for(let _=0;_<E;_++){for(const l=R+t;R<l;R++){const n=R<o?O[R]:255;$[D++]=n&128?a:v,$[D++]=n&64?a:v,$[D++]=n&32?a:v,$[D++]=n&16?a:v,$[D++]=n&8?a:v,$[D++]=n&4?a:v,$[D++]=n&2?a:v,$[D++]=n&1?a:v}if(e===0)continue;const b=R<o?O[R++]:255;for(let l=0;l<e;l++)$[D++]=b&1<<7-l?a:v}return{srcPos:R,destPos:D}}},(z,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.GlobalWorkerOptions=void 0;const L=Object.create(null);r.GlobalWorkerOptions=L,L.workerPort=L.workerPort===void 0?null:L.workerPort,L.workerSrc=L.workerSrc===void 0?"":L.workerSrc},(z,r,L)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.MessageHandler=void 0;var u=L(1);const f={UNKNOWN:0,DATA:1,ERROR:2},O={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function R(D){switch(D instanceof Error||typeof D=="object"&&D!==null||(0,u.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),D.name){case"AbortException":return new u.AbortException(D.message);case"MissingPDFException":return new u.MissingPDFException(D.message);case"PasswordException":return new u.PasswordException(D.message,D.code);case"UnexpectedResponseException":return new u.UnexpectedResponseException(D.message,D.status);case"UnknownErrorException":return new u.UnknownErrorException(D.message,D.details);default:return new u.UnknownErrorException(D.message,D.toString())}}class ${constructor(d,E,x){this.sourceName=d,this.targetName=E,this.comObj=x,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=y=>{const v=y.data;if(v.targetName!==this.sourceName)return;if(v.stream){this._processStreamMessage(v);return}if(v.callback){const t=v.callbackId,e=this.callbackCapabilities[t];if(!e)throw new Error(`Cannot resolve callback ${t}`);if(delete this.callbackCapabilities[t],v.callback===f.DATA)e.resolve(v.data);else if(v.callback===f.ERROR)e.reject(R(v.reason));else throw new Error("Unexpected callback case");return}const a=this.actionHandler[v.action];if(!a)throw new Error(`Unknown action from worker: ${v.action}`);if(v.callbackId){const t=this.sourceName,e=v.sourceName;new Promise(function(o){o(a(v.data))}).then(function(o){x.postMessage({sourceName:t,targetName:e,callback:f.DATA,callbackId:v.callbackId,data:o})},function(o){x.postMessage({sourceName:t,targetName:e,callback:f.ERROR,callbackId:v.callbackId,reason:R(o)})});return}if(v.streamId){this._createStreamSink(v);return}a(v.data)},x.addEventListener("message",this._onComObjOnMessage)}on(d,E){const x=this.actionHandler;if(x[d])throw new Error(`There is already an actionName called "${d}"`);x[d]=E}send(d,E,x){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:d,data:E},x)}sendWithPromise(d,E,x){const y=this.callbackId++,v=(0,u.createPromiseCapability)();this.callbackCapabilities[y]=v;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:d,callbackId:y,data:E},x)}catch(a){v.reject(a)}return v.promise}sendWithStream(d,E,x,y){const v=this.streamId++,a=this.sourceName,t=this.targetName,e=this.comObj;return new ReadableStream({start:o=>{const _=(0,u.createPromiseCapability)();return this.streamControllers[v]={controller:o,startCall:_,pullCall:null,cancelCall:null,isClosed:!1},e.postMessage({sourceName:a,targetName:t,action:d,streamId:v,data:E,desiredSize:o.desiredSize},y),_.promise},pull:o=>{const _=(0,u.createPromiseCapability)();return this.streamControllers[v].pullCall=_,e.postMessage({sourceName:a,targetName:t,stream:O.PULL,streamId:v,desiredSize:o.desiredSize}),_.promise},cancel:o=>{(0,u.assert)(o instanceof Error,"cancel must have a valid reason");const _=(0,u.createPromiseCapability)();return this.streamControllers[v].cancelCall=_,this.streamControllers[v].isClosed=!0,e.postMessage({sourceName:a,targetName:t,stream:O.CANCEL,streamId:v,reason:R(o)}),_.promise}},x)}_createStreamSink(d){const E=d.streamId,x=this.sourceName,y=d.sourceName,v=this.comObj,a=this,t=this.actionHandler[d.action],e={enqueue(o,_=1,b){if(this.isCancelled)return;const l=this.desiredSize;this.desiredSize-=_,l>0&&this.desiredSize<=0&&(this.sinkCapability=(0,u.createPromiseCapability)(),this.ready=this.sinkCapability.promise),v.postMessage({sourceName:x,targetName:y,stream:O.ENQUEUE,streamId:E,chunk:o},b)},close(){this.isCancelled||(this.isCancelled=!0,v.postMessage({sourceName:x,targetName:y,stream:O.CLOSE,streamId:E}),delete a.streamSinks[E])},error(o){(0,u.assert)(o instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,v.postMessage({sourceName:x,targetName:y,stream:O.ERROR,streamId:E,reason:R(o)}))},sinkCapability:(0,u.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:d.desiredSize,ready:null};e.sinkCapability.resolve(),e.ready=e.sinkCapability.promise,this.streamSinks[E]=e,new Promise(function(o){o(t(d.data,e))}).then(function(){v.postMessage({sourceName:x,targetName:y,stream:O.START_COMPLETE,streamId:E,success:!0})},function(o){v.postMessage({sourceName:x,targetName:y,stream:O.START_COMPLETE,streamId:E,reason:R(o)})})}_processStreamMessage(d){const E=d.streamId,x=this.sourceName,y=d.sourceName,v=this.comObj,a=this.streamControllers[E],t=this.streamSinks[E];switch(d.stream){case O.START_COMPLETE:d.success?a.startCall.resolve():a.startCall.reject(R(d.reason));break;case O.PULL_COMPLETE:d.success?a.pullCall.resolve():a.pullCall.reject(R(d.reason));break;case O.PULL:if(!t){v.postMessage({sourceName:x,targetName:y,stream:O.PULL_COMPLETE,streamId:E,success:!0});break}t.desiredSize<=0&&d.desiredSize>0&&t.sinkCapability.resolve(),t.desiredSize=d.desiredSize,new Promise(function(e){e(t.onPull&&t.onPull())}).then(function(){v.postMessage({sourceName:x,targetName:y,stream:O.PULL_COMPLETE,streamId:E,success:!0})},function(e){v.postMessage({sourceName:x,targetName:y,stream:O.PULL_COMPLETE,streamId:E,reason:R(e)})});break;case O.ENQUEUE:if((0,u.assert)(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(d.chunk);break;case O.CLOSE:if((0,u.assert)(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),this._deleteStreamController(a,E);break;case O.ERROR:(0,u.assert)(a,"error should have stream controller"),a.controller.error(R(d.reason)),this._deleteStreamController(a,E);break;case O.CANCEL_COMPLETE:d.success?a.cancelCall.resolve():a.cancelCall.reject(R(d.reason)),this._deleteStreamController(a,E);break;case O.CANCEL:if(!t)break;new Promise(function(e){e(t.onCancel&&t.onCancel(R(d.reason)))}).then(function(){v.postMessage({sourceName:x,targetName:y,stream:O.CANCEL_COMPLETE,streamId:E,success:!0})},function(e){v.postMessage({sourceName:x,targetName:y,stream:O.CANCEL_COMPLETE,streamId:E,reason:R(e)})}),t.sinkCapability.reject(R(d.reason)),t.isCancelled=!0,delete this.streamSinks[E];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(d,E){await Promise.allSettled([d.startCall&&d.startCall.promise,d.pullCall&&d.pullCall.promise,d.cancelCall&&d.cancelCall.promise]),delete this.streamControllers[E]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}r.MessageHandler=$},(z,r,L)=>{var O,R;Object.defineProperty(r,"__esModule",{value:!0}),r.Metadata=void 0;var u=L(1);class f{constructor({parsedData:D,rawData:d}){at(this,O,void 0);at(this,R,void 0);mt(this,O,D),mt(this,R,d)}getRaw(){return k(this,R)}get(D){var d;return(d=k(this,O).get(D))!=null?d:null}getAll(){return(0,u.objectFromMap)(k(this,O))}has(D){return k(this,O).has(D)}}O=new WeakMap,R=new WeakMap,r.Metadata=f},(z,r,L)=>{var $,D,d,E,x,y,pe;Object.defineProperty(r,"__esModule",{value:!0}),r.OptionalContentConfig=void 0;var u=L(1);const f=Symbol("INTERNAL");class O{constructor(t,e){at(this,$,!0);this.name=t,this.intent=e}get visible(){return k(this,$)}_setVisible(t,e){t!==f&&(0,u.unreachable)("Internal method `_setVisible` called."),mt(this,$,e)}}$=new WeakMap;class R{constructor(t){at(this,y);at(this,D,!0);at(this,d,new Map);at(this,E,null);at(this,x,null);if(this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,mt(this,x,t.order);for(const e of t.groups)k(this,d).set(e.id,new O(e.name,e.intent));if(t.baseState==="OFF")for(const e of k(this,d).values())e._setVisible(f,!1);for(const e of t.on)k(this,d).get(e)._setVisible(f,!0);for(const e of t.off)k(this,d).get(e)._setVisible(f,!1);mt(this,E,new Map);for(const[e,o]of k(this,d))k(this,E).set(e,o.visible)}}isVisible(t){if(k(this,d).size===0)return!0;if(!t)return(0,u.warn)("Optional content group not defined."),!0;if(t.type==="OCG")return k(this,d).has(t.id)?k(this,d).get(t.id).visible:((0,u.warn)(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return ht(this,y,pe).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!k(this,d).has(e))return(0,u.warn)(`Optional content group not found: ${e}`),!0;if(k(this,d).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!k(this,d).has(e))return(0,u.warn)(`Optional content group not found: ${e}`),!0;if(!k(this,d).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!k(this,d).has(e))return(0,u.warn)(`Optional content group not found: ${e}`),!0;if(!k(this,d).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!k(this,d).has(e))return(0,u.warn)(`Optional content group not found: ${e}`),!0;if(k(this,d).get(e).visible)return!1}return!0}return(0,u.warn)(`Unknown optional content policy ${t.policy}.`),!0}return(0,u.warn)(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0){if(!k(this,d).has(t)){(0,u.warn)(`Optional content group not found: ${t}`);return}k(this,d).get(t)._setVisible(f,!!e),mt(this,D,null)}get hasInitialVisibility(){if(k(this,D)!==null)return k(this,D);for(const[t,e]of k(this,d)){const o=k(this,E).get(t);if(e.visible!==o)return mt(this,D,!1)}return mt(this,D,!0)}getOrder(){return k(this,d).size?k(this,x)?k(this,x).slice():[...k(this,d).keys()]:null}getGroups(){return k(this,d).size>0?(0,u.objectFromMap)(k(this,d)):null}getGroup(t){return k(this,d).get(t)||null}}D=new WeakMap,d=new WeakMap,E=new WeakMap,x=new WeakMap,y=new WeakSet,pe=function(t){const e=t.length;if(e<2)return!0;const o=t[0];for(let _=1;_<e;_++){const b=t[_];let l;if(Array.isArray(b))l=ht(this,y,pe).call(this,b);else if(k(this,d).has(b))l=k(this,d).get(b).visible;else return(0,u.warn)(`Optional content group not found: ${b}`),!0;switch(o){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return o==="And"},r.OptionalContentConfig=R},(z,r,L)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.PDFDataTransportStream=void 0;var u=L(1),f=L(8);class O{constructor(d,E){(0,u.assert)(E,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=d.progressiveDone||!1,this._contentDispositionFilename=d.contentDispositionFilename||null;const x=d.initialData;if((x==null?void 0:x.length)>0){const y=new Uint8Array(x).buffer;this._queuedChunks.push(y)}this._pdfDataRangeTransport=E,this._isStreamingSupported=!d.disableStream,this._isRangeSupported=!d.disableRange,this._contentLength=d.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((y,v)=>{this._onReceiveData({begin:y,chunk:v})}),this._pdfDataRangeTransport.addProgressListener((y,v)=>{this._onProgress({loaded:y,total:v})}),this._pdfDataRangeTransport.addProgressiveReadListener(y=>{this._onReceiveData({chunk:y})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(d){const E=new Uint8Array(d.chunk).buffer;if(d.begin===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(E):this._queuedChunks.push(E);else{const x=this._rangeReaders.some(function(y){return y._begin!==d.begin?!1:(y._enqueue(E),!0)});(0,u.assert)(x,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var d,E;return(E=(d=this._fullRequestReader)==null?void 0:d._loaded)!=null?E:0}_onProgress(d){if(d.total===void 0){const E=this._rangeReaders[0];E!=null&&E.onProgress&&E.onProgress({loaded:d.loaded})}else{const E=this._fullRequestReader;E!=null&&E.onProgress&&E.onProgress({loaded:d.loaded,total:d.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(d){const E=this._rangeReaders.indexOf(d);E>=0&&this._rangeReaders.splice(E,1)}getFullReader(){(0,u.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const d=this._queuedChunks;return this._queuedChunks=null,new R(this,d,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(d,E){if(E<=this._progressiveDataLength)return null;const x=new $(this,d,E);return this._pdfDataRangeTransport.requestDataRange(d,E),this._rangeReaders.push(x),x}cancelAllRequests(d){this._fullRequestReader&&this._fullRequestReader.cancel(d);for(const E of this._rangeReaders.slice(0))E.cancel(d);this._pdfDataRangeTransport.abort()}}r.PDFDataTransportStream=O;class R{constructor(d,E,x=!1,y=null){this._stream=d,this._done=x||!1,this._filename=(0,f.isPdfFile)(y)?y:null,this._queuedChunks=E||[],this._loaded=0;for(const v of this._queuedChunks)this._loaded+=v.byteLength;this._requests=[],this._headersReady=Promise.resolve(),d._fullRequestReader=this,this.onProgress=null}_enqueue(d){this._done||(this._requests.length>0?this._requests.shift().resolve({value:d,done:!1}):this._queuedChunks.push(d),this._loaded+=d.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const d=(0,u.createPromiseCapability)();return this._requests.push(d),d.promise}cancel(d){this._done=!0;for(const E of this._requests)E.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class ${constructor(d,E,x){this._stream=d,this._begin=E,this._end=x,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(d){if(!this._done){if(this._requests.length===0)this._queuedChunk=d;else{this._requests.shift().resolve({value:d,done:!1});for(const x of this._requests)x.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const E=this._queuedChunk;return this._queuedChunk=null,{value:E,done:!1}}if(this._done)return{value:void 0,done:!0};const d=(0,u.createPromiseCapability)();return this._requests.push(d),d.promise}cancel(d){this._done=!0;for(const E of this._requests)E.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(z,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.XfaText=void 0;class L{static textContent(f){const O=[],R={items:O,styles:Object.create(null)};function $(D){var x;if(!D)return;let d=null;const E=D.name;if(E==="#text")d=D.value;else if(L.shouldBuildText(E))(x=D==null?void 0:D.attributes)!=null&&x.textContent?d=D.attributes.textContent:D.value&&(d=D.value);else return;if(d!==null&&O.push({str:d}),!!D.children)for(const y of D.children)$(y)}return $(f),R}static shouldBuildText(f){return!(f==="textarea"||f==="input"||f==="option"||f==="select")}}r.XfaText=L},(z,r,L)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.NodeStandardFontDataFactory=r.NodeCanvasFactory=r.NodeCMapReaderFactory=void 0;var u=L(9);const f=function(D){return new Promise((d,E)=>{require$$4.readFile(D,(y,v)=>{if(y||!v){E(new Error(y));return}d(new Uint8Array(v))})})};class O extends u.BaseCanvasFactory{_createCanvas(d,E){return require$$4.createCanvas(d,E)}}r.NodeCanvasFactory=O;class R extends u.BaseCMapReaderFactory{_fetchData(d,E){return f(d).then(x=>({cMapData:x,compressionType:E}))}}r.NodeCMapReaderFactory=R;class $ extends u.BaseStandardFontDataFactory{_fetchData(d){return f(d)}}r.NodeStandardFontDataFactory=$},(z,r,L)=>{var D,d,E,x,y,v,a,t,e,ge,_,Oe,l,me,s,De;Object.defineProperty(r,"__esModule",{value:!0}),r.AnnotationEditorLayer=void 0;var u=L(7),f=L(1),O=L(23),R=L(24);const w=class{constructor(m){at(this,e);at(this,_);at(this,l);at(this,s);at(this,D,void 0);at(this,d,!1);at(this,E,this.pointerup.bind(this));at(this,x,this.pointerdown.bind(this));at(this,y,new Map);at(this,v,!1);at(this,a,!1);at(this,t,void 0);w._initialized||(w._initialized=!0,O.FreeTextEditor.initialize(m.l10n),R.InkEditor.initialize(m.l10n),m.uiManager.registerEditorTypes([O.FreeTextEditor,R.InkEditor])),mt(this,t,m.uiManager),this.annotationStorage=m.annotationStorage,this.pageIndex=m.pageIndex,this.div=m.div,mt(this,D,m.accessibilityManager),k(this,t).addLayer(this)}updateToolbar(m){k(this,t).updateToolbar(m)}updateMode(m=k(this,t).getMode()){ht(this,s,De).call(this),m===f.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),k(this,t).unselectAll()}addInkEditorIfNeeded(m){if(!m&&k(this,t).getMode()!==f.AnnotationEditorType.INK)return;if(!m){for(const tt of k(this,y).values())if(tt.isEmpty()){tt.setInBackground();return}}ht(this,l,me).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(m){k(this,t).setEditingState(m)}addCommands(m){k(this,t).addCommands(m)}enable(){this.div.style.pointerEvents="auto";for(const m of k(this,y).values())m.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const m of k(this,y).values())m.disableEditing()}setActiveEditor(m){k(this,t).getActive()!==m&&k(this,t).setActiveEditor(m)}enableClick(){this.div.addEventListener("pointerdown",k(this,x)),this.div.addEventListener("pointerup",k(this,E))}disableClick(){this.div.removeEventListener("pointerdown",k(this,x)),this.div.removeEventListener("pointerup",k(this,E))}attach(m){k(this,y).set(m.id,m)}detach(m){var P;k(this,y).delete(m.id),(P=k(this,D))==null||P.removePointerInTextLayer(m.contentDiv)}remove(m){k(this,t).removeEditor(m),this.detach(m),this.annotationStorage.remove(m.id),m.div.style.display="none",setTimeout(()=>{m.div.style.display="",m.div.remove(),m.isAttachedToDOM=!1,document.activeElement===document.body&&k(this,t).focusMainContainer()},0),k(this,a)||this.addInkEditorIfNeeded(!1)}add(m){if(ht(this,e,ge).call(this,m),k(this,t).addEditor(m),this.attach(m),!m.isAttachedToDOM){const P=m.render();this.div.append(P),m.isAttachedToDOM=!0}this.moveEditorInDOM(m),m.onceAdded(),this.addToAnnotationStorage(m)}moveEditorInDOM(m){var P;(P=k(this,D))==null||P.moveElementInDOM(this.div,m.div,m.contentDiv,!0)}addToAnnotationStorage(m){!m.isEmpty()&&!this.annotationStorage.has(m.id)&&this.annotationStorage.setValue(m.id,m)}addOrRebuild(m){m.needsToBeRebuilt()?m.rebuild():this.add(m)}addANewEditor(m){const P=()=>{this.addOrRebuild(m)},tt=()=>{m.remove()};this.addCommands({cmd:P,undo:tt,mustExec:!0})}addUndoableEditor(m){const P=()=>{this.addOrRebuild(m)},tt=()=>{m.remove()};this.addCommands({cmd:P,undo:tt,mustExec:!1})}getNextId(){return k(this,t).getId()}deserialize(m){switch(m.annotationType){case f.AnnotationEditorType.FREETEXT:return O.FreeTextEditor.deserialize(m,this);case f.AnnotationEditorType.INK:return R.InkEditor.deserialize(m,this)}return null}setSelected(m){k(this,t).setSelected(m)}toggleSelected(m){k(this,t).toggleSelected(m)}isSelected(m){return k(this,t).isSelected(m)}unselect(m){k(this,t).unselect(m)}pointerup(m){const P=u.KeyboardManager.platform.isMac;if(!(m.button!==0||m.ctrlKey&&P)&&m.target===this.div&&!!k(this,v)){if(mt(this,v,!1),!k(this,d)){mt(this,d,!0);return}ht(this,l,me).call(this,m)}}pointerdown(m){const P=u.KeyboardManager.platform.isMac;if(m.button!==0||m.ctrlKey&&P||m.target!==this.div)return;mt(this,v,!0);const tt=k(this,t).getActive();mt(this,d,!tt||tt.isEmpty())}drop(m){const P=m.dataTransfer.getData("text/plain"),tt=k(this,t).getEditor(P);if(!tt)return;m.preventDefault(),m.dataTransfer.dropEffect="move",ht(this,e,ge).call(this,tt);const it=this.div.getBoundingClientRect(),Q=m.clientX-it.x,K=m.clientY-it.y;tt.translate(Q-tt.startX,K-tt.startY),this.moveEditorInDOM(tt),tt.div.focus()}dragover(m){m.preventDefault()}destroy(){var m,P;((m=k(this,t).getActive())==null?void 0:m.parent)===this&&k(this,t).setActiveEditor(null);for(const tt of k(this,y).values())(P=k(this,D))==null||P.removePointerInTextLayer(tt.contentDiv),tt.isAttachedToDOM=!1,tt.div.remove(),tt.parent=null;this.div=null,k(this,y).clear(),k(this,t).removeLayer(this)}render(m){this.viewport=m.viewport,(0,u.bindEvents)(this,this.div,["dragover","drop"]),this.setDimensions();for(const P of k(this,t).getEditors(this.pageIndex))this.add(P);this.updateMode()}update(m){this.viewport=m.viewport,this.setDimensions(),this.updateMode()}get scaleFactor(){return this.viewport.scale}get pageDimensions(){const[m,P,tt,it]=this.viewport.viewBox,Q=tt-m,K=it-P;return[Q,K]}get viewportBaseDimensions(){const{width:m,height:P,rotation:tt}=this.viewport;return tt%180===0?[m,P]:[P,m]}setDimensions(){const{width:m,height:P,rotation:tt}=this.viewport,it=tt%180!==0,Q=Math.floor(m)+"px",K=Math.floor(P)+"px";this.div.style.width=it?K:Q,this.div.style.height=it?Q:K,this.div.setAttribute("data-main-rotation",tt)}};let $=w;D=new WeakMap,d=new WeakMap,E=new WeakMap,x=new WeakMap,y=new WeakMap,v=new WeakMap,a=new WeakMap,t=new WeakMap,e=new WeakSet,ge=function(m){var P;m.parent!==this&&(this.attach(m),m.pageIndex=this.pageIndex,(P=m.parent)==null||P.detach(m),m.parent=this,m.div&&m.isAttachedToDOM&&(m.div.remove(),this.div.append(m.div)))},_=new WeakSet,Oe=function(m){switch(k(this,t).getMode()){case f.AnnotationEditorType.FREETEXT:return new O.FreeTextEditor(m);case f.AnnotationEditorType.INK:return new R.InkEditor(m)}return null},l=new WeakSet,me=function(m){const P=this.getNextId(),tt=ht(this,_,Oe).call(this,{parent:this,id:P,x:m.offsetX,y:m.offsetY});return tt&&this.add(tt),tt},s=new WeakSet,De=function(){mt(this,a,!0);for(const m of k(this,y).values())m.isEmpty()&&m.remove();mt(this,a,!1)},Mt($,"_initialized",!1),r.AnnotationEditorLayer=$},(z,r,L)=>{var $,D,d,E,x,y,v,a,Ie,e,Le,_,Ne,l,_e;Object.defineProperty(r,"__esModule",{value:!0}),r.FreeTextEditor=void 0;var u=L(1),f=L(7),O=L(6);const s=class extends O.AnnotationEditor{constructor(S){super(oe(te({},S),{name:"freeTextEditor"}));at(this,a);at(this,e);at(this,_);at(this,l);at(this,$,this.editorDivBlur.bind(this));at(this,D,this.editorDivFocus.bind(this));at(this,d,this.editorDivKeydown.bind(this));at(this,E,void 0);at(this,x,"");at(this,y,!1);at(this,v,void 0);mt(this,E,S.color||s._defaultColor||O.AnnotationEditor._defaultLineColor),mt(this,v,S.fontSize||s._defaultFontSize)}static initialize(S){this._l10nPromise=new Map(["free_text_default_content","editor_free_text_aria_label"].map(P=>[P,S.get(P)]));const m=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(m.getPropertyValue("--freetext-padding"))}static updateDefaultParams(S,m){switch(S){case u.AnnotationEditorParamsType.FREETEXT_SIZE:s._defaultFontSize=m;break;case u.AnnotationEditorParamsType.FREETEXT_COLOR:s._defaultColor=m;break}}updateParams(S,m){switch(S){case u.AnnotationEditorParamsType.FREETEXT_SIZE:ht(this,a,Ie).call(this,m);break;case u.AnnotationEditorParamsType.FREETEXT_COLOR:ht(this,e,Le).call(this,m);break}}static get defaultPropertiesToUpdate(){return[[u.AnnotationEditorParamsType.FREETEXT_SIZE,s._defaultFontSize],[u.AnnotationEditorParamsType.FREETEXT_COLOR,s._defaultColor||O.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[u.AnnotationEditorParamsType.FREETEXT_SIZE,k(this,v)],[u.AnnotationEditorParamsType.FREETEXT_COLOR,k(this,E)]]}getInitialTranslation(){return[-s._internalPadding*this.parent.scaleFactor,-(s._internalPadding+k(this,v))*this.parent.scaleFactor]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(u.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.enableEditing(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.editorDiv.addEventListener("keydown",k(this,d)),this.editorDiv.addEventListener("focus",k(this,D)),this.editorDiv.addEventListener("blur",k(this,$)))}disableEditMode(){!this.isInEditMode()||(this.parent.setEditingState(!0),super.disableEditMode(),this.disableEditing(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",k(this,d)),this.editorDiv.removeEventListener("focus",k(this,D)),this.editorDiv.removeEventListener("blur",k(this,$)),this.div.focus(),this.isEditing=!1)}focusin(S){super.focusin(S),S.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),super.remove()}commit(){super.commit(),k(this,y)||(mt(this,y,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),mt(this,x,ht(this,_,Ne).call(this).trimEnd()),ht(this,l,_e).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(S){this.enableEditMode(),this.editorDiv.focus()}keydown(S){S.target===this.div&&S.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(S){s._keyboardManager.exec(this,S)}editorDivFocus(S){this.isEditing=!0}editorDivBlur(S){this.isEditing=!1}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let S,m;this.width&&(S=this.x,m=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",`${this.id}-editor`),this.enableEditing(),s._l10nPromise.get("editor_free_text_aria_label").then(tt=>{var it;return(it=this.editorDiv)==null?void 0:it.setAttribute("aria-label",tt)}),s._l10nPromise.get("free_text_default_content").then(tt=>{var it;return(it=this.editorDiv)==null?void 0:it.setAttribute("default-content",tt)}),this.editorDiv.contentEditable=!0;const{style:P}=this.editorDiv;if(P.fontSize=`calc(${k(this,v)}px * var(--scale-factor))`,P.color=k(this,E),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,f.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[tt,it]=this.parent.viewportBaseDimensions;this.setAt(S*tt,m*it,this.width*tt,this.height*it);for(const Q of k(this,x).split(`
`)){const K=document.createElement("div");K.append(Q?document.createTextNode(Q):document.createElement("br")),this.editorDiv.append(K)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(S,m){const P=super.deserialize(S,m);return mt(P,v,S.fontSize),mt(P,E,u.Util.makeHexColor(...S.color)),mt(P,x,S.value),P}serialize(){if(this.isEmpty())return null;const S=s._internalPadding*this.parent.scaleFactor,m=this.getRect(S,S),P=O.AnnotationEditor._colorManager.convert(getComputedStyle(this.editorDiv).color);return{annotationType:u.AnnotationEditorType.FREETEXT,color:P,fontSize:k(this,v),value:k(this,x),pageIndex:this.parent.pageIndex,rect:m,rotation:this.rotation}}};let R=s;$=new WeakMap,D=new WeakMap,d=new WeakMap,E=new WeakMap,x=new WeakMap,y=new WeakMap,v=new WeakMap,a=new WeakSet,Ie=function(S){const m=tt=>{this.editorDiv.style.fontSize=`calc(${tt}px * var(--scale-factor))`,this.translate(0,-(tt-k(this,v))*this.parent.scaleFactor),mt(this,v,tt),ht(this,l,_e).call(this)},P=k(this,v);this.parent.addCommands({cmd:()=>{m(S)},undo:()=>{m(P)},mustExec:!0,type:u.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},e=new WeakSet,Le=function(S){const m=k(this,E);this.parent.addCommands({cmd:()=>{mt(this,E,S),this.editorDiv.style.color=S},undo:()=>{mt(this,E,m),this.editorDiv.style.color=m},mustExec:!0,type:u.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},_=new WeakSet,Ne=function(){const S=this.editorDiv.getElementsByTagName("div");if(S.length===0)return this.editorDiv.innerText;const m=[];for(let P=0,tt=S.length;P<tt;P++){const Q=S[P].firstChild;(Q==null?void 0:Q.nodeName)==="#text"?m.push(Q.data):m.push("")}return m.join(`
`)},l=new WeakSet,_e=function(){const[S,m]=this.parent.viewportBaseDimensions,P=this.div.getBoundingClientRect();this.width=P.width/S,this.height=P.height/m},Mt(R,"_freeTextDefaultContent",""),Mt(R,"_l10nPromise"),Mt(R,"_internalPadding",0),Mt(R,"_defaultColor",null),Mt(R,"_defaultFontSize",10),Mt(R,"_keyboardManager",new f.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],s.prototype.commitOrRemove]])),Mt(R,"_type","freetext"),r.FreeTextEditor=R},(z,r,L)=>{var d,E,x,y,v,a,t,e,o,_,b,l,n,s,g,je,S,Ue,P,Be,it,qe,K,be,G,We,nt,He,bt,Ge,h,Gt,T,Ae,N,ne,Y,se,i,Yt,A,ye,F,ie,st,ve,Z,Xe,et,ze,ft,$e,ut,Se,vt,re,Tt,Kt,Ft,Ee;Object.defineProperty(r,"__esModule",{value:!0}),r.InkEditor=void 0,Object.defineProperty(r,"fitCurve",{enumerable:!0,get:function(){return O.fitCurve}});var u=L(1),f=L(6),O=L(25),R=L(7);const $=16,xt=class extends f.AnnotationEditor{constructor(rt){super(oe(te({},rt),{name:"inkEditor"}));at(this,g);at(this,S);at(this,P);at(this,it);at(this,K);at(this,G);at(this,nt);at(this,bt);at(this,h);at(this,T);at(this,N);at(this,Y);at(this,i);at(this,A);at(this,F);at(this,Z);at(this,et);at(this,ft);at(this,ut);at(this,vt);at(this,Tt);at(this,Ft);at(this,d,0);at(this,E,0);at(this,x,0);at(this,y,this.canvasPointermove.bind(this));at(this,v,this.canvasPointerleave.bind(this));at(this,a,this.canvasPointerup.bind(this));at(this,t,this.canvasPointerdown.bind(this));at(this,e,!1);at(this,o,!1);at(this,_,null);at(this,b,null);at(this,l,0);at(this,n,0);at(this,s,null);this.color=rt.color||null,this.thickness=rt.thickness||null,this.opacity=rt.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(rt){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink_aria_label"].map(pt=>[pt,rt.get(pt)]))}static updateDefaultParams(rt,pt){switch(rt){case u.AnnotationEditorParamsType.INK_THICKNESS:xt._defaultThickness=pt;break;case u.AnnotationEditorParamsType.INK_COLOR:xt._defaultColor=pt;break;case u.AnnotationEditorParamsType.INK_OPACITY:xt._defaultOpacity=pt/100;break}}updateParams(rt,pt){switch(rt){case u.AnnotationEditorParamsType.INK_THICKNESS:ht(this,g,je).call(this,pt);break;case u.AnnotationEditorParamsType.INK_COLOR:ht(this,S,Ue).call(this,pt);break;case u.AnnotationEditorParamsType.INK_OPACITY:ht(this,P,Be).call(this,pt);break}}static get defaultPropertiesToUpdate(){return[[u.AnnotationEditorParamsType.INK_THICKNESS,xt._defaultThickness],[u.AnnotationEditorParamsType.INK_COLOR,xt._defaultColor||f.AnnotationEditor._defaultLineColor],[u.AnnotationEditorParamsType.INK_OPACITY,Math.round(xt._defaultOpacity*100)]]}get propertiesToUpdate(){var rt;return[[u.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||xt._defaultThickness],[u.AnnotationEditorParamsType.INK_COLOR,this.color||xt._defaultColor||f.AnnotationEditor._defaultLineColor],[u.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*((rt=this.opacity)!=null?rt:xt._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(ht(this,N,ne).call(this),ht(this,Y,se).call(this)),this.isAttachedToDOM||(this.parent.add(this),ht(this,i,Yt).call(this)),ht(this,Tt,Kt).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,k(this,b).disconnect(),mt(this,b,null),super.remove())}enableEditMode(){k(this,e)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",k(this,t)),this.canvas.addEventListener("pointerup",k(this,a)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",k(this,t)),this.canvas.removeEventListener("pointerup",k(this,a)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){k(this,e)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),mt(this,e,!0),this.div.classList.add("disabled"),ht(this,Tt,Kt).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus())}focusin(rt){super.focusin(rt),this.enableEditMode()}canvasPointerdown(rt){rt.button!==0||!this.isInEditMode()||k(this,e)||(this.setInForeground(),rt.type!=="mouse"&&this.div.focus(),rt.stopPropagation(),this.canvas.addEventListener("pointerleave",k(this,v)),this.canvas.addEventListener("pointermove",k(this,y)),ht(this,G,We).call(this,rt.offsetX,rt.offsetY))}canvasPointermove(rt){rt.stopPropagation(),ht(this,nt,He).call(this,rt.offsetX,rt.offsetY)}canvasPointerup(rt){rt.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&(rt.stopPropagation(),ht(this,T,Ae).call(this,rt),this.setInBackground())}canvasPointerleave(rt){ht(this,T,Ae).call(this,rt),this.setInBackground()}render(){if(this.div)return this.div;let rt,pt;this.width&&(rt=this.x,pt=this.y),super.render(),xt._l10nPromise.get("editor_ink_aria_label").then(_t=>{var yt;return(yt=this.div)==null?void 0:yt.setAttribute("aria-label",_t)});const[J,W,H,gt]=ht(this,it,qe).call(this);if(this.setAt(J,W,0,0),this.setDims(H,gt),ht(this,N,ne).call(this),this.width){const[_t,yt]=this.parent.viewportBaseDimensions;this.setAt(rt*_t,pt*yt,this.width*_t,this.height*yt),mt(this,o,!0),ht(this,i,Yt).call(this),this.setDims(this.width*_t,this.height*yt),ht(this,h,Gt).call(this),ht(this,Ft,Ee).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return ht(this,Y,se).call(this),this.div}setDimensions(rt,pt){const J=Math.round(rt),W=Math.round(pt);if(k(this,l)===J&&k(this,n)===W)return;mt(this,l,J),mt(this,n,W),this.canvas.style.visibility="hidden",k(this,d)&&Math.abs(k(this,d)-rt/pt)>.01&&(pt=Math.ceil(rt/k(this,d)),this.setDims(rt,pt));const[H,gt]=this.parent.viewportBaseDimensions;this.width=rt/H,this.height=pt/gt,k(this,e)&&ht(this,A,ye).call(this,rt,pt),ht(this,i,Yt).call(this),ht(this,h,Gt).call(this),this.canvas.style.visibility="visible"}static deserialize(rt,pt){var Dt,kt;const J=super.deserialize(rt,pt);J.thickness=rt.thickness,J.color=u.Util.makeHexColor(...rt.color),J.opacity=rt.opacity;const[W,H]=pt.pageDimensions,gt=J.width*W,_t=J.height*H,yt=pt.scaleFactor,St=rt.thickness/2;mt(J,d,gt/_t),mt(J,e,!0),mt(J,l,Math.round(gt)),mt(J,n,Math.round(_t));for(const{bezier:Ct}of rt.paths){const Lt=[];J.paths.push(Lt);let It=yt*(Ct[0]-St),Ut=yt*(_t-Ct[1]-St);for(let Nt=2,qt=Ct.length;Nt<qt;Nt+=6){const zt=yt*(Ct[Nt]-St),$t=yt*(_t-Ct[Nt+1]-St),Ht=yt*(Ct[Nt+2]-St),jt=yt*(_t-Ct[Nt+3]-St),Wt=yt*(Ct[Nt+4]-St),Vt=yt*(_t-Ct[Nt+5]-St);Lt.push([[It,Ut],[zt,$t],[Ht,jt],[Wt,Vt]]),It=Wt,Ut=Vt}const Pt=ht(this,st,ve).call(this,Lt);J.bezierPath2D.push(Pt)}const wt=ht(Dt=J,ut,Se).call(Dt);return mt(J,x,Math.max($,wt[2]-wt[0])),mt(J,E,Math.max($,wt[3]-wt[1])),ht(kt=J,A,ye).call(kt,gt,_t),J}serialize(){if(this.isEmpty())return null;const rt=this.getRect(0,0),pt=this.rotation%180===0?rt[3]-rt[1]:rt[2]-rt[0],J=f.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:u.AnnotationEditorType.INK,color:J,thickness:this.thickness,opacity:this.opacity,paths:ht(this,Z,Xe).call(this,this.scaleFactor/this.parent.scaleFactor,this.translationX,this.translationY,pt),pageIndex:this.parent.pageIndex,rect:rt,rotation:this.rotation}}};let D=xt;d=new WeakMap,E=new WeakMap,x=new WeakMap,y=new WeakMap,v=new WeakMap,a=new WeakMap,t=new WeakMap,e=new WeakMap,o=new WeakMap,_=new WeakMap,b=new WeakMap,l=new WeakMap,n=new WeakMap,s=new WeakMap,g=new WeakSet,je=function(rt){const pt=this.thickness;this.parent.addCommands({cmd:()=>{this.thickness=rt,ht(this,Tt,Kt).call(this)},undo:()=>{this.thickness=pt,ht(this,Tt,Kt).call(this)},mustExec:!0,type:u.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},S=new WeakSet,Ue=function(rt){const pt=this.color;this.parent.addCommands({cmd:()=>{this.color=rt,ht(this,h,Gt).call(this)},undo:()=>{this.color=pt,ht(this,h,Gt).call(this)},mustExec:!0,type:u.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},P=new WeakSet,Be=function(rt){rt/=100;const pt=this.opacity;this.parent.addCommands({cmd:()=>{this.opacity=rt,ht(this,h,Gt).call(this)},undo:()=>{this.opacity=pt,ht(this,h,Gt).call(this)},mustExec:!0,type:u.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},it=new WeakSet,qe=function(){const{width:rt,height:pt,rotation:J}=this.parent.viewport;switch(J){case 90:return[0,rt,rt,pt];case 180:return[rt,pt,rt,pt];case 270:return[pt,0,rt,pt];default:return[0,0,rt,pt]}},K=new WeakSet,be=function(){this.ctx.lineWidth=this.thickness*this.parent.scaleFactor/this.scaleFactor,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.miterLimit=10,this.ctx.strokeStyle=`${this.color}${(0,R.opacityToHex)(this.opacity)}`},G=new WeakSet,We=function(rt,pt){var J;this.isEditing=!0,k(this,o)||(mt(this,o,!0),ht(this,i,Yt).call(this),this.thickness||(this.thickness=xt._defaultThickness),this.color||(this.color=xt._defaultColor||f.AnnotationEditor._defaultLineColor),(J=this.opacity)!=null||(this.opacity=xt._defaultOpacity)),this.currentPath.push([rt,pt]),mt(this,_,null),ht(this,K,be).call(this),this.ctx.beginPath(),this.ctx.moveTo(rt,pt),mt(this,s,()=>{!k(this,s)||(k(this,_)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):ht(this,h,Gt).call(this),this.ctx.lineTo(...k(this,_)),mt(this,_,null),this.ctx.stroke()),window.requestAnimationFrame(k(this,s)))}),window.requestAnimationFrame(k(this,s))},nt=new WeakSet,He=function(rt,pt){const[J,W]=this.currentPath.at(-1);rt===J&&pt===W||(this.currentPath.push([rt,pt]),mt(this,_,[rt,pt]))},bt=new WeakSet,Ge=function(rt,pt){var St;this.ctx.closePath(),mt(this,s,null),rt=Math.min(Math.max(rt,0),this.canvas.width),pt=Math.min(Math.max(pt,0),this.canvas.height);const[J,W]=this.currentPath.at(-1);(rt!==J||pt!==W)&&this.currentPath.push([rt,pt]);let H;if(this.currentPath.length!==1)H=(0,O.fitCurve)(this.currentPath,30,null);else{const wt=[rt,pt];H=[[wt,wt.slice(),wt.slice(),wt]]}const gt=ht(St=xt,st,ve).call(St,H);this.currentPath.length=0;const _t=()=>{this.paths.push(H),this.bezierPath2D.push(gt),this.rebuild()},yt=()=>{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(ht(this,N,ne).call(this),ht(this,Y,se).call(this)),ht(this,Tt,Kt).call(this))};this.parent.addCommands({cmd:_t,undo:yt,mustExec:!0})},h=new WeakSet,Gt=function(){if(this.isEmpty()){ht(this,F,ie).call(this);return}ht(this,K,be).call(this);const{canvas:rt,ctx:pt}=this;pt.setTransform(1,0,0,1,0,0),pt.clearRect(0,0,rt.width,rt.height),ht(this,F,ie).call(this);for(const J of this.bezierPath2D)pt.stroke(J)},T=new WeakSet,Ae=function(rt){ht(this,bt,Ge).call(this,rt.offsetX,rt.offsetY),this.canvas.removeEventListener("pointerleave",k(this,v)),this.canvas.removeEventListener("pointermove",k(this,y)),this.parent.addToAnnotationStorage(this)},N=new WeakSet,ne=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",xt._l10nPromise.get("editor_ink_canvas_aria_label").then(rt=>{var pt;return(pt=this.canvas)==null?void 0:pt.setAttribute("aria-label",rt)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Y=new WeakSet,se=function(){mt(this,b,new ResizeObserver(rt=>{const pt=rt[0].contentRect;pt.width&&pt.height&&this.setDimensions(pt.width,pt.height)})),k(this,b).observe(this.div)},i=new WeakSet,Yt=function(){if(!k(this,o))return;const[rt,pt]=this.parent.viewportBaseDimensions;this.canvas.width=Math.ceil(this.width*rt),this.canvas.height=Math.ceil(this.height*pt),ht(this,F,ie).call(this)},A=new WeakSet,ye=function(rt,pt){const J=ht(this,vt,re).call(this),W=(rt-J)/k(this,x),H=(pt-J)/k(this,E);this.scaleFactor=Math.min(W,H)},F=new WeakSet,ie=function(){const rt=ht(this,vt,re).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+rt,this.translationY*this.scaleFactor+rt)},st=new WeakSet,ve=function(rt){const pt=new Path2D;for(let J=0,W=rt.length;J<W;J++){const[H,gt,_t,yt]=rt[J];J===0&&pt.moveTo(...H),pt.bezierCurveTo(gt[0],gt[1],_t[0],_t[1],yt[0],yt[1])}return pt},Z=new WeakSet,Xe=function(rt,pt,J,W){const gt=[],_t=this.thickness/2;let yt,St;for(const wt of this.paths){yt=[],St=[];for(let Dt=0,kt=wt.length;Dt<kt;Dt++){const[Ct,Lt,It,Ut]=wt[Dt],Pt=rt*(Ct[0]+pt)+_t,Nt=W-rt*(Ct[1]+J)-_t,qt=rt*(Lt[0]+pt)+_t,zt=W-rt*(Lt[1]+J)-_t,$t=rt*(It[0]+pt)+_t,Ht=W-rt*(It[1]+J)-_t,jt=rt*(Ut[0]+pt)+_t,Wt=W-rt*(Ut[1]+J)-_t;Dt===0&&(yt.push(Pt,Nt),St.push(Pt,Nt)),yt.push(qt,zt,$t,Ht,jt,Wt),ht(this,et,ze).call(this,Pt,Nt,qt,zt,$t,Ht,jt,Wt,4,St)}gt.push({bezier:yt,points:St})}return gt},et=new WeakSet,ze=function(rt,pt,J,W,H,gt,_t,yt,St,wt){if(ht(this,ft,$e).call(this,rt,pt,J,W,H,gt,_t,yt)){wt.push(_t,yt);return}for(let Dt=1;Dt<St-1;Dt++){const kt=Dt/St,Ct=1-kt;let Lt=kt*rt+Ct*J,It=kt*pt+Ct*W,Ut=kt*J+Ct*H,Pt=kt*W+Ct*gt;const Nt=kt*H+Ct*_t,qt=kt*gt+Ct*yt;Lt=kt*Lt+Ct*Ut,It=kt*It+Ct*Pt,Ut=kt*Ut+Ct*Nt,Pt=kt*Pt+Ct*qt,Lt=kt*Lt+Ct*Ut,It=kt*It+Ct*Pt,wt.push(Lt,It)}wt.push(_t,yt)},ft=new WeakSet,$e=function(rt,pt,J,W,H,gt,_t,yt){const wt=(3*J-2*rt-_t)**2,Dt=(3*W-2*pt-yt)**2,kt=(3*H-rt-2*_t)**2,Ct=(3*gt-pt-2*yt)**2;return Math.max(wt,kt)+Math.max(Dt,Ct)<=10},ut=new WeakSet,Se=function(){let rt=1/0,pt=-1/0,J=1/0,W=-1/0;for(const H of this.paths)for(const[gt,_t,yt,St]of H){const wt=u.Util.bezierBoundingBox(...gt,..._t,...yt,...St);rt=Math.min(rt,wt[0]),J=Math.min(J,wt[1]),pt=Math.max(pt,wt[2]),W=Math.max(W,wt[3])}return[rt,J,pt,W]},vt=new WeakSet,re=function(){return k(this,e)?Math.ceil(this.thickness*this.parent.scaleFactor):0},Tt=new WeakSet,Kt=function(rt=!1){if(this.isEmpty())return;if(!k(this,e)){ht(this,h,Gt).call(this);return}const pt=ht(this,ut,Se).call(this),J=ht(this,vt,re).call(this);mt(this,x,Math.max($,pt[2]-pt[0])),mt(this,E,Math.max($,pt[3]-pt[1]));const W=Math.ceil(J+k(this,x)*this.scaleFactor),H=Math.ceil(J+k(this,E)*this.scaleFactor),[gt,_t]=this.parent.viewportBaseDimensions;this.width=W/gt,this.height=H/_t,mt(this,d,W/H),ht(this,Ft,Ee).call(this);const yt=this.translationX,St=this.translationY;this.translationX=-pt[0],this.translationY=-pt[1],ht(this,i,Yt).call(this),ht(this,h,Gt).call(this),mt(this,l,W),mt(this,n,H),this.setDims(W,H);const wt=rt?J/this.scaleFactor/2:0;this.translate(yt-this.translationX-wt,St-this.translationY-wt)},Ft=new WeakSet,Ee=function(){const{style:rt}=this.div;k(this,d)>=1?(rt.minHeight=`${$}px`,rt.minWidth=`${Math.round(k(this,d)*$)}px`):(rt.minWidth=`${$}px`,rt.minHeight=`${Math.round($/k(this,d))}px`)},at(D,st),Mt(D,"_defaultColor",null),Mt(D,"_defaultOpacity",1),Mt(D,"_defaultThickness",1),Mt(D,"_l10nPromise"),Mt(D,"_type","ink"),r.InkEditor=D},(z,r,L)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.fitCurve=void 0;const u=L(26);r.fitCurve=u},z=>{function r(a,t,e){if(!Array.isArray(a))throw new TypeError("First argument should be an array");if(a.forEach(l=>{if(!Array.isArray(l)||l.some(n=>typeof n!="number")||l.length!==a[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),a=a.filter((l,n)=>n===0||!l.every((s,g)=>s===a[n-1][g])),a.length<2)return[];const o=a.length,_=x(a[1],a[0]),b=x(a[o-2],a[o-1]);return L(a,_,b,t,e)}function L(a,t,e,o,_){var l,n,s,g,w,S,m,P,tt,it,Q,K,q;if(a.length===2)return K=y.vectorLen(y.subtract(a[0],a[1]))/3,l=[a[0],y.addArrays(a[0],y.mulItems(t,K)),y.addArrays(a[1],y.mulItems(e,K)),a[1]],[l];if(n=$(a),[l,g,S]=u(a,n,n,t,e,_),g===0||g<o)return[l];if(g<o*o)for(s=n,w=g,m=S,q=0;q<20;q++){if(s=O(l,a,s),[l,g,S]=u(a,n,s,t,e,_),g<o)return[l];if(S===m){let G=g/w;if(G>.9999&&G<1.0001)break}w=g,m=S}return Q=[],P=y.subtract(a[S-1],a[S+1]),P.every(G=>G===0)&&(P=y.subtract(a[S-1],a[S]),[P[0],P[1]]=[-P[1],P[0]]),tt=y.normalize(P),it=y.mulItems(tt,-1),Q=Q.concat(L(a.slice(0,S+1),t,tt,o,_)),Q=Q.concat(L(a.slice(S),it,e,o,_)),Q}function u(a,t,e,o,_,b){var l,n,s;return l=f(a,e,o,_),[n,s]=D(a,l,t),b&&b({bez:l,points:a,params:t,maxErr:n,maxPoint:s}),[l,n,s]}function f(a,t,e,o){var _,b,l,n,s,g,w,S,m,P,tt,it,Q,K,q,G,V,nt=a[0],ct=a[a.length-1];for(_=[nt,null,null,ct],b=y.zeros_Xx2x2(t.length),Q=0,K=t.length;Q<K;Q++)G=t[Q],V=1-G,l=b[Q],l[0]=y.mulItems(e,3*G*(V*V)),l[1]=y.mulItems(o,3*V*(G*G));for(n=[[0,0],[0,0]],s=[0,0],Q=0,K=a.length;Q<K;Q++)G=t[Q],l=b[Q],n[0][0]+=y.dot(l[0],l[0]),n[0][1]+=y.dot(l[0],l[1]),n[1][0]+=y.dot(l[0],l[1]),n[1][1]+=y.dot(l[1],l[1]),q=y.subtract(a[Q],v.q([nt,nt,ct,ct],G)),s[0]+=y.dot(l[0],q),s[1]+=y.dot(l[1],q);return g=n[0][0]*n[1][1]-n[1][0]*n[0][1],w=n[0][0]*s[1]-n[1][0]*s[0],S=s[0]*n[1][1]-s[1]*n[0][1],m=g===0?0:S/g,P=g===0?0:w/g,it=y.vectorLen(y.subtract(nt,ct)),tt=1e-6*it,m<tt||P<tt?(_[1]=y.addArrays(nt,y.mulItems(e,it/3)),_[2]=y.addArrays(ct,y.mulItems(o,it/3))):(_[1]=y.addArrays(nt,y.mulItems(e,m)),_[2]=y.addArrays(ct,y.mulItems(o,P))),_}function O(a,t,e){return e.map((o,_)=>R(a,t[_],o))}function R(a,t,e){var o=y.subtract(v.q(a,e),t),_=v.qprime(a,e),b=y.mulMatrix(o,_),l=y.sum(y.squareItems(_))+2*y.mulMatrix(o,v.qprimeprime(a,e));return l===0?e:e-b/l}function $(a){var t=[],e,o,_;return a.forEach((b,l)=>{e=l?o+y.vectorLen(y.subtract(b,_)):0,t.push(e),o=e,_=b}),t=t.map(b=>b/o),t}function D(a,t,e){var o,_,b,l,n,s,g,w;_=0,b=Math.floor(a.length/2);const S=d(t,10);for(n=0,s=a.length;n<s;n++)g=a[n],w=E(t,e[n],S,10),l=y.subtract(v.q(t,w),g),o=l[0]*l[0]+l[1]*l[1],o>_&&(_=o,b=n);return[_,b]}var d=function(a,t){for(var e,o=[0],_=a[0],b=0,l=1;l<=t;l++)e=v.q(a,l/t),b+=y.vectorLen(y.subtract(e,_)),o.push(b),_=e;return o=o.map(n=>n/b),o};function E(a,t,e,o){if(t<0)return 0;if(t>1)return 1;for(var _,b,l,n,s,g=1;g<=o;g++)if(t<=e[g]){n=(g-1)/o,l=g/o,b=e[g-1],_=e[g],s=(t-b)/(_-b)*(l-n)+n;break}return s}function x(a,t){return y.normalize(y.subtract(a,t))}class y{static zeros_Xx2x2(t){for(var e=[];t--;)e.push([0,0]);return e}static mulItems(t,e){return t.map(o=>o*e)}static mulMatrix(t,e){return t.reduce((o,_,b)=>o+_*e[b],0)}static subtract(t,e){return t.map((o,_)=>o-e[_])}static addArrays(t,e){return t.map((o,_)=>o+e[_])}static addItems(t,e){return t.map(o=>o+e)}static sum(t){return t.reduce((e,o)=>e+o)}static dot(t,e){return y.mulMatrix(t,e)}static vectorLen(t){return Math.hypot(...t)}static divItems(t,e){return t.map(o=>o/e)}static squareItems(t){return t.map(e=>e*e)}static normalize(t){return this.divItems(t,this.vectorLen(t))}}class v{static q(t,e){var o=1-e,_=y.mulItems(t[0],o*o*o),b=y.mulItems(t[1],3*o*o*e),l=y.mulItems(t[2],3*o*e*e),n=y.mulItems(t[3],e*e*e);return y.addArrays(y.addArrays(_,b),y.addArrays(l,n))}static qprime(t,e){var o=1-e,_=y.mulItems(y.subtract(t[1],t[0]),3*o*o),b=y.mulItems(y.subtract(t[2],t[1]),6*o*e),l=y.mulItems(y.subtract(t[3],t[2]),3*e*e);return y.addArrays(y.addArrays(_,b),l)}static qprimeprime(t,e){return y.addArrays(y.mulItems(y.addArrays(y.subtract(t[2],y.mulItems(t[1],2)),t[0]),6*(1-e)),y.mulItems(y.addArrays(y.subtract(t[3],y.mulItems(t[2],2)),t[1]),6*e))}}z.exports=r,z.exports.fitCubic=L,z.exports.createTangent=x},(z,r,L)=>{var h,Ce,T,Te,N,xe;Object.defineProperty(r,"__esModule",{value:!0}),r.AnnotationLayer=void 0;var u=L(1),f=L(8),O=L(5),R=L(28),$=L(29);const D=1e3,d=9,E=new WeakSet;function x(X){return{width:X[2]-X[0],height:X[3]-X[1]}}class y{static create(i){switch(i.data.annotationType){case u.AnnotationType.LINK:return new a(i);case u.AnnotationType.TEXT:return new t(i);case u.AnnotationType.WIDGET:switch(i.data.fieldType){case"Tx":return new o(i);case"Btn":return i.data.radioButton?new b(i):i.data.checkBox?new _(i):new l(i);case"Ch":return new n(i)}return new e(i);case u.AnnotationType.POPUP:return new s(i);case u.AnnotationType.FREETEXT:return new w(i);case u.AnnotationType.LINE:return new S(i);case u.AnnotationType.SQUARE:return new m(i);case u.AnnotationType.CIRCLE:return new P(i);case u.AnnotationType.POLYLINE:return new tt(i);case u.AnnotationType.CARET:return new Q(i);case u.AnnotationType.INK:return new K(i);case u.AnnotationType.POLYGON:return new it(i);case u.AnnotationType.HIGHLIGHT:return new q(i);case u.AnnotationType.UNDERLINE:return new G(i);case u.AnnotationType.SQUIGGLY:return new V(i);case u.AnnotationType.STRIKEOUT:return new nt(i);case u.AnnotationType.STAMP:return new ct(i);case u.AnnotationType.FILEATTACHMENT:return new bt(i);default:return new v(i)}}}class v{constructor(i,{isRenderable:p=!1,ignoreBorder:A=!1,createQuadrilaterals:C=!1}={}){this.isRenderable=p,this.data=i.data,this.layer=i.layer,this.page=i.page,this.viewport=i.viewport,this.linkService=i.linkService,this.downloadManager=i.downloadManager,this.imageResourcesPath=i.imageResourcesPath,this.renderForms=i.renderForms,this.svgFactory=i.svgFactory,this.annotationStorage=i.annotationStorage,this.enableScripting=i.enableScripting,this.hasJSActions=i.hasJSActions,this._fieldObjects=i.fieldObjects,this._mouseState=i.mouseState,p&&(this.container=this._createContainer(A)),C&&(this.quadrilaterals=this._createQuadrilaterals(A))}_createContainer(i=!1){const p=this.data,A=this.page,C=this.viewport,F=document.createElement("section"),{width:B,height:st}=x(p.rect),[dt,Z,ot,et]=C.viewBox,lt=ot-dt,ft=et-Z;F.setAttribute("data-annotation-id",p.id);const M=u.Util.normalizeRect([p.rect[0],A.view[3]-p.rect[1]+A.view[1],p.rect[2],A.view[3]-p.rect[3]+A.view[1]]);if(!i&&p.borderStyle.width>0){F.style.borderWidth=`${p.borderStyle.width}px`;const At=p.borderStyle.horizontalCornerRadius,vt=p.borderStyle.verticalCornerRadius;if(At>0||vt>0){const Tt=`calc(${At}px * var(--scale-factor)) / calc(${vt}px * var(--scale-factor))`;F.style.borderRadius=Tt}else if(this instanceof b){const Tt=`calc(${B}px * var(--scale-factor)) / calc(${st}px * var(--scale-factor))`;F.style.borderRadius=Tt}switch(p.borderStyle.style){case u.AnnotationBorderStyleType.SOLID:F.style.borderStyle="solid";break;case u.AnnotationBorderStyleType.DASHED:F.style.borderStyle="dashed";break;case u.AnnotationBorderStyleType.BEVELED:(0,u.warn)("Unimplemented border style: beveled");break;case u.AnnotationBorderStyleType.INSET:(0,u.warn)("Unimplemented border style: inset");break;case u.AnnotationBorderStyleType.UNDERLINE:F.style.borderBottomStyle="solid";break}const Et=p.borderColor||null;Et?F.style.borderColor=u.Util.makeHexColor(Et[0]|0,Et[1]|0,Et[2]|0):F.style.borderWidth=0}F.style.left=`${100*(M[0]-dt)/lt}%`,F.style.top=`${100*(M[1]-Z)/ft}%`;const{rotation:ut}=p;return p.hasOwnCanvas||ut===0?(F.style.width=`${100*B/lt}%`,F.style.height=`${100*st/ft}%`):this.setRotation(ut,F),F}setRotation(i,p=this.container){const[A,C,F,B]=this.viewport.viewBox,st=F-A,dt=B-C,{width:Z,height:ot}=x(this.data.rect);let et,lt;i%180===0?(et=100*Z/st,lt=100*ot/dt):(et=100*ot/st,lt=100*Z/dt),p.style.width=`${et}%`,p.style.height=`${lt}%`,p.setAttribute("data-main-rotation",(360-i)%360)}get _commonActions(){const i=(p,A,C)=>{const F=C.detail[p];C.target.style[A]=R.ColorConverters[`${F[0]}_HTML`](F.slice(1))};return(0,u.shadow)(this,"_commonActions",{display:p=>{const A=p.detail.display%2===1;this.container.style.visibility=A?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:A,print:p.detail.display===0||p.detail.display===3})},print:p=>{this.annotationStorage.setValue(this.data.id,{print:p.detail.print})},hidden:p=>{this.container.style.visibility=p.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:p.detail.hidden})},focus:p=>{setTimeout(()=>p.target.focus({preventScroll:!1}),0)},userName:p=>{p.target.title=p.detail.userName},readonly:p=>{p.detail.readonly?p.target.setAttribute("readonly",""):p.target.removeAttribute("readonly")},required:p=>{this._setRequired(p.target,p.detail.required)},bgColor:p=>{i("bgColor","backgroundColor",p)},fillColor:p=>{i("fillColor","backgroundColor",p)},fgColor:p=>{i("fgColor","color",p)},textColor:p=>{i("textColor","color",p)},borderColor:p=>{i("borderColor","borderColor",p)},strokeColor:p=>{i("strokeColor","borderColor",p)},rotation:p=>{const A=p.detail.rotation;this.setRotation(A),this.annotationStorage.setValue(this.data.id,{rotation:A})}})}_dispatchEventFromSandbox(i,p){const A=this._commonActions;for(const C of Object.keys(p.detail)){const F=i[C]||A[C];F&&F(p)}}_setDefaultPropertiesFromJS(i){if(!this.enableScripting)return;const p=this.annotationStorage.getRawValue(this.data.id);if(!p)return;const A=this._commonActions;for(const[C,F]of Object.entries(p)){const B=A[C];if(B){const st={detail:{[C]:F},target:i};B(st),delete p[C]}}}_createQuadrilaterals(i=!1){if(!this.data.quadPoints)return null;const p=[],A=this.data.rect;for(const C of this.data.quadPoints)this.data.rect=[C[2].x,C[2].y,C[1].x,C[1].y],p.push(this._createContainer(i));return this.data.rect=A,p}_createPopup(i,p){let A=this.container;this.quadrilaterals&&(i=i||this.quadrilaterals,A=this.quadrilaterals[0]),i||(i=document.createElement("div"),i.className="popupTriggerArea",A.append(i));const F=new g({container:A,trigger:i,color:p.color,titleObj:p.titleObj,modificationDate:p.modificationDate,contentsObj:p.contentsObj,richText:p.richText,hideWrapper:!0}).render();F.style.left="100%",A.append(F)}_renderQuadrilaterals(i){for(const p of this.quadrilaterals)p.className=i;return this.quadrilaterals}render(){(0,u.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(i,p=null){const A=[];if(this._fieldObjects){const C=this._fieldObjects[i];if(C)for(const{page:F,id:B,exportValues:st}of C){if(F===-1||B===p)continue;const dt=typeof st=="string"?st:null,Z=document.querySelector(`[data-element-id="${B}"]`);if(Z&&!E.has(Z)){(0,u.warn)(`_getElementsByName - element not allowed: ${B}`);continue}A.push({id:B,exportValue:dt,domElement:Z})}return A}for(const C of document.getElementsByName(i)){const{id:F,exportValue:B}=C;F!==p&&(!E.has(C)||A.push({id:F,exportValue:B,domElement:C}))}return A}static get platform(){const i=typeof navigator!="undefined"?navigator.platform:"";return(0,u.shadow)(this,"platform",{isWin:i.includes("Win"),isMac:i.includes("Mac")})}}class a extends v{constructor(i,p=null){super(i,{isRenderable:!0,ignoreBorder:!!(p!=null&&p.ignoreBorder),createQuadrilaterals:!0}),this.isTooltipOnly=i.data.isTooltipOnly}render(){const{data:i,linkService:p}=this,A=document.createElement("a");A.setAttribute("data-element-id",i.id);let C=!1;return i.url?(p.addLinkAttributes(A,i.url,i.newWindow),C=!0):i.action?(this._bindNamedAction(A,i.action),C=!0):i.dest?(this._bindLink(A,i.dest),C=!0):(i.actions&&(i.actions.Action||i.actions["Mouse Up"]||i.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(A,i),C=!0),i.resetForm?(this._bindResetFormAction(A,i.resetForm),C=!0):this.isTooltipOnly&&!C&&(this._bindLink(A,""),C=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((F,B)=>{const st=B===0?A:A.cloneNode();return F.append(st),F}):(this.container.className="linkAnnotation",C&&this.container.append(A),this.container)}_bindLink(i,p){i.href=this.linkService.getDestinationHash(p),i.onclick=()=>(p&&this.linkService.goToDestination(p),!1),(p||p==="")&&(i.className="internalLink")}_bindNamedAction(i,p){i.href=this.linkService.getAnchorUrl(""),i.onclick=()=>(this.linkService.executeNamedAction(p),!1),i.className="internalLink"}_bindJSAction(i,p){i.href=this.linkService.getAnchorUrl("");const A=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const C of Object.keys(p.actions)){const F=A.get(C);!F||(i[F]=()=>{var B;return(B=this.linkService.eventBus)==null||B.dispatch("dispatcheventinsandbox",{source:this,detail:{id:p.id,name:C}}),!1})}i.onclick||(i.onclick=()=>!1),i.className="internalLink"}_bindResetFormAction(i,p){const A=i.onclick;if(A||(i.href=this.linkService.getAnchorUrl("")),i.className="internalLink",!this._fieldObjects){(0,u.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),A||(i.onclick=()=>!1);return}i.onclick=()=>{var ot;A&&A();const{fields:C,refs:F,include:B}=p,st=[];if(C.length!==0||F.length!==0){const et=new Set(F);for(const lt of C){const ft=this._fieldObjects[lt]||[];for(const{id:M}of ft)et.add(M)}for(const lt of Object.values(this._fieldObjects))for(const ft of lt)et.has(ft.id)===B&&st.push(ft)}else for(const et of Object.values(this._fieldObjects))st.push(...et);const dt=this.annotationStorage,Z=[];for(const et of st){const{id:lt}=et;switch(Z.push(lt),et.type){case"text":{const M=et.defaultValue||"";dt.setValue(lt,{value:M});break}case"checkbox":case"radiobutton":{const M=et.defaultValue===et.exportValues;dt.setValue(lt,{value:M});break}case"combobox":case"listbox":{const M=et.defaultValue||"";dt.setValue(lt,{value:M});break}default:continue}const ft=document.querySelector(`[data-element-id="${lt}"]`);if(ft){if(!E.has(ft)){(0,u.warn)(`_bindResetFormAction - element not allowed: ${lt}`);continue}}else continue;ft.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((ot=this.linkService.eventBus)==null||ot.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Z,name:"ResetForm"}})),!1}}}class t extends v{constructor(i){var A,C,F;const p=!!(i.data.hasPopup||((A=i.data.titleObj)==null?void 0:A.str)||((C=i.data.contentsObj)==null?void 0:C.str)||((F=i.data.richText)==null?void 0:F.str));super(i,{isRenderable:p})}render(){this.container.className="textAnnotation";const i=document.createElement("img");return i.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",i.alt="[{{type}} Annotation]",i.dataset.l10nId="text_annotation_type",i.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(i,this.data),this.container.append(i),this.container}}class e extends v{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(i){const{isWin:p,isMac:A}=v.platform;return p&&i.ctrlKey||A&&i.metaKey}_setEventListener(i,p,A,C){p.includes("mouse")?i.addEventListener(p,F=>{var B;(B=this.linkService.eventBus)==null||B.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:A,value:C(F),shift:F.shiftKey,modifier:this._getKeyModifier(F)}})}):i.addEventListener(p,F=>{var B;(B=this.linkService.eventBus)==null||B.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:A,value:C(F)}})})}_setEventListeners(i,p,A){var C;for(const[F,B]of p)(B==="Action"||((C=this.data.actions)==null?void 0:C[B]))&&this._setEventListener(i,F,B,A)}_setBackgroundColor(i){const p=this.data.backgroundColor||null;i.style.backgroundColor=p===null?"transparent":u.Util.makeHexColor(p[0],p[1],p[2])}_setTextStyle(i){const p=["left","center","right"],{fontColor:A}=this.data.defaultAppearanceData,C=this.data.defaultAppearanceData.fontSize||d,F=i.style;let B;if(this.data.multiLine){const st=Math.abs(this.data.rect[3]-this.data.rect[1]),dt=Math.round(st/(u.LINE_FACTOR*C))||1,Z=st/dt;B=Math.min(C,Math.round(Z/u.LINE_FACTOR))}else{const st=Math.abs(this.data.rect[3]-this.data.rect[1]);B=Math.min(C,Math.round(st/u.LINE_FACTOR))}F.fontSize=`calc(${B}px * var(--scale-factor))`,F.color=u.Util.makeHexColor(A[0],A[1],A[2]),this.data.textAlignment!==null&&(F.textAlign=p[this.data.textAlignment])}_setRequired(i,p){p?i.setAttribute("required",!0):i.removeAttribute("required"),i.setAttribute("aria-required",p)}}class o extends e{constructor(i){const p=i.renderForms||!i.data.hasAppearance&&!!i.data.fieldValue;super(i,{isRenderable:p})}setPropertyOnSiblings(i,p,A,C){const F=this.annotationStorage;for(const B of this._getElementsByName(i.name,i.id))B.domElement&&(B.domElement[p]=A),F.setValue(B.id,{[C]:A})}render(){var C;const i=this.annotationStorage,p=this.data.id;this.container.className="textWidgetAnnotation";let A=null;if(this.renderForms){const F=i.getValue(p,{value:this.data.fieldValue});let B=F.formattedValue||F.value||"";const st=i.getValue(p,{charLimit:this.data.maxLen}).charLimit;st&&B.length>st&&(B=B.slice(0,st));const dt={userValue:B,formattedValue:null,valueOnFocus:""};this.data.multiLine?(A=document.createElement("textarea"),A.textContent=B,this.data.doNotScroll&&(A.style.overflowY="hidden")):(A=document.createElement("input"),A.type="text",A.setAttribute("value",B),this.data.doNotScroll&&(A.style.overflowX="hidden")),E.add(A),A.setAttribute("data-element-id",p),A.disabled=this.data.readOnly,A.name=this.data.fieldName,A.tabIndex=D,this._setRequired(A,this.data.required),st&&(A.maxLength=st),A.addEventListener("input",ot=>{i.setValue(p,{value:ot.target.value}),this.setPropertyOnSiblings(A,"value",ot.target.value,"value")}),A.addEventListener("resetform",ot=>{var lt;const et=(lt=this.data.defaultFieldValue)!=null?lt:"";A.value=dt.userValue=et,dt.formattedValue=null});let Z=ot=>{const{formattedValue:et}=dt;et!=null&&(ot.target.value=et),ot.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){A.addEventListener("focus",et=>{dt.userValue&&(et.target.value=dt.userValue),dt.valueOnFocus=et.target.value}),A.addEventListener("updatefromsandbox",et=>{const lt={value(ft){var M;dt.userValue=(M=ft.detail.value)!=null?M:"",i.setValue(p,{value:dt.userValue.toString()}),ft.target.value=dt.userValue},formattedValue(ft){const{formattedValue:M}=ft.detail;dt.formattedValue=M,M!=null&&ft.target!==document.activeElement&&(ft.target.value=M),i.setValue(p,{formattedValue:M})},selRange(ft){ft.target.setSelectionRange(...ft.detail.selRange)},charLimit:ft=>{var vt;const{charLimit:M}=ft.detail,{target:ut}=ft;if(M===0){ut.removeAttribute("maxLength");return}ut.setAttribute("maxLength",M);let At=dt.userValue;!At||At.length<=M||(At=At.slice(0,M),ut.value=dt.userValue=At,i.setValue(p,{value:At}),(vt=this.linkService.eventBus)==null||vt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:p,name:"Keystroke",value:At,willCommit:!0,commitKey:1,selStart:ut.selectionStart,selEnd:ut.selectionEnd}}))}};this._dispatchEventFromSandbox(lt,et)}),A.addEventListener("keydown",et=>{var M;let lt=-1;if(et.key==="Escape"?lt=0:et.key==="Enter"?lt=2:et.key==="Tab"&&(lt=3),lt===-1)return;const{value:ft}=et.target;dt.valueOnFocus!==ft&&(dt.userValue=ft,(M=this.linkService.eventBus)==null||M.dispatch("dispatcheventinsandbox",{source:this,detail:{id:p,name:"Keystroke",value:ft,willCommit:!0,commitKey:lt,selStart:et.target.selectionStart,selEnd:et.target.selectionEnd}}))});const ot=Z;Z=null,A.addEventListener("blur",et=>{var ft;const{value:lt}=et.target;dt.userValue=lt,this._mouseState.isDown&&dt.valueOnFocus!==lt&&((ft=this.linkService.eventBus)==null||ft.dispatch("dispatcheventinsandbox",{source:this,detail:{id:p,name:"Keystroke",value:lt,willCommit:!0,commitKey:1,selStart:et.target.selectionStart,selEnd:et.target.selectionEnd}})),ot(et)}),(C=this.data.actions)!=null&&C.Keystroke&&A.addEventListener("beforeinput",et=>{var Tt;const{data:lt,target:ft}=et,{value:M,selectionStart:ut,selectionEnd:At}=ft;let vt=ut,Et=At;switch(et.inputType){case"deleteWordBackward":{const Rt=M.substring(0,ut).match(/\w*[^\w]*$/);Rt&&(vt-=Rt[0].length);break}case"deleteWordForward":{const Rt=M.substring(ut).match(/^[^\w]*\w*/);Rt&&(Et+=Rt[0].length);break}case"deleteContentBackward":ut===At&&(vt-=1);break;case"deleteContentForward":ut===At&&(Et+=1);break}et.preventDefault(),(Tt=this.linkService.eventBus)==null||Tt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:p,name:"Keystroke",value:M,change:lt||"",willCommit:!1,selStart:vt,selEnd:Et}})}),this._setEventListeners(A,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],et=>et.target.value)}if(Z&&A.addEventListener("blur",Z),this.data.comb){const et=(this.data.rect[2]-this.data.rect[0])/st;A.classList.add("comb"),A.style.letterSpacing=`calc(${et}px * var(--scale-factor) - 1ch)`}}else A=document.createElement("div"),A.textContent=this.data.fieldValue,A.style.verticalAlign="middle",A.style.display="table-cell";return this._setTextStyle(A),this._setBackgroundColor(A),this._setDefaultPropertiesFromJS(A),this.container.append(A),this.container}}class _ extends e{constructor(i){super(i,{isRenderable:i.renderForms})}render(){const i=this.annotationStorage,p=this.data,A=p.id;let C=i.getValue(A,{value:p.exportValue===p.fieldValue}).value;typeof C=="string"&&(C=C!=="Off",i.setValue(A,{value:C})),this.container.className="buttonWidgetAnnotation checkBox";const F=document.createElement("input");return E.add(F),F.setAttribute("data-element-id",A),F.disabled=p.readOnly,this._setRequired(F,this.data.required),F.type="checkbox",F.name=p.fieldName,C&&F.setAttribute("checked",!0),F.setAttribute("exportValue",p.exportValue),F.tabIndex=D,F.addEventListener("change",B=>{const{name:st,checked:dt}=B.target;for(const Z of this._getElementsByName(st,A)){const ot=dt&&Z.exportValue===p.exportValue;Z.domElement&&(Z.domElement.checked=ot),i.setValue(Z.id,{value:ot})}i.setValue(A,{value:dt})}),F.addEventListener("resetform",B=>{const st=p.defaultFieldValue||"Off";B.target.checked=st===p.exportValue}),this.enableScripting&&this.hasJSActions&&(F.addEventListener("updatefromsandbox",B=>{const st={value(dt){dt.target.checked=dt.detail.value!=="Off",i.setValue(A,{value:dt.target.checked})}};this._dispatchEventFromSandbox(st,B)}),this._setEventListeners(F,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],B=>B.target.checked)),this._setBackgroundColor(F),this._setDefaultPropertiesFromJS(F),this.container.append(F),this.container}}class b extends e{constructor(i){super(i,{isRenderable:i.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const i=this.annotationStorage,p=this.data,A=p.id;let C=i.getValue(A,{value:p.fieldValue===p.buttonValue}).value;typeof C=="string"&&(C=C!==p.buttonValue,i.setValue(A,{value:C}));const F=document.createElement("input");if(E.add(F),F.setAttribute("data-element-id",A),F.disabled=p.readOnly,this._setRequired(F,this.data.required),F.type="radio",F.name=p.fieldName,C&&F.setAttribute("checked",!0),F.tabIndex=D,F.addEventListener("change",B=>{const{name:st,checked:dt}=B.target;for(const Z of this._getElementsByName(st,A))i.setValue(Z.id,{value:!1});i.setValue(A,{value:dt})}),F.addEventListener("resetform",B=>{const st=p.defaultFieldValue;B.target.checked=st!=null&&st===p.buttonValue}),this.enableScripting&&this.hasJSActions){const B=p.buttonValue;F.addEventListener("updatefromsandbox",st=>{const dt={value:Z=>{const ot=B===Z.detail.value;for(const et of this._getElementsByName(Z.target.name)){const lt=ot&&et.id===A;et.domElement&&(et.domElement.checked=lt),i.setValue(et.id,{value:lt})}}};this._dispatchEventFromSandbox(dt,st)}),this._setEventListeners(F,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],st=>st.target.checked)}return this._setBackgroundColor(F),this._setDefaultPropertiesFromJS(F),this.container.append(F),this.container}}class l extends a{constructor(i){super(i,{ignoreBorder:i.data.hasAppearance})}render(){const i=super.render();i.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(i.title=this.data.alternativeText);const p=i.lastChild;return this.enableScripting&&this.hasJSActions&&p&&(this._setDefaultPropertiesFromJS(p),p.addEventListener("updatefromsandbox",A=>{this._dispatchEventFromSandbox({},A)})),i}}class n extends e{constructor(i){super(i,{isRenderable:i.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const i=this.annotationStorage,p=this.data.id,A=i.getValue(p,{value:this.data.fieldValue}),C=document.createElement("select");E.add(C),C.setAttribute("data-element-id",p),C.disabled=this.data.readOnly,this._setRequired(C,this.data.required),C.name=this.data.fieldName,C.tabIndex=D;let F=this.data.combo&&this.data.options.length>0;this.data.combo||(C.size=this.data.options.length,this.data.multiSelect&&(C.multiple=!0)),C.addEventListener("resetform",Z=>{const ot=this.data.defaultFieldValue;for(const et of C.options)et.selected=et.value===ot});for(const Z of this.data.options){const ot=document.createElement("option");ot.textContent=Z.displayValue,ot.value=Z.exportValue,A.value.includes(Z.exportValue)&&(ot.setAttribute("selected",!0),F=!1),C.append(ot)}let B=null;if(F){const Z=document.createElement("option");Z.value=" ",Z.setAttribute("hidden",!0),Z.setAttribute("selected",!0),C.prepend(Z),B=()=>{Z.remove(),C.removeEventListener("input",B),B=null},C.addEventListener("input",B)}const st=(Z,ot)=>{const et=ot?"value":"textContent",lt=Z.target.options;return Z.target.multiple?Array.prototype.filter.call(lt,ft=>ft.selected).map(ft=>ft[et]):lt.selectedIndex===-1?null:lt[lt.selectedIndex][et]},dt=Z=>{const ot=Z.target.options;return Array.prototype.map.call(ot,et=>({displayValue:et.textContent,exportValue:et.value}))};return this.enableScripting&&this.hasJSActions?(C.addEventListener("updatefromsandbox",Z=>{const ot={value(et){B==null||B();const lt=et.detail.value,ft=new Set(Array.isArray(lt)?lt:[lt]);for(const M of C.options)M.selected=ft.has(M.value);i.setValue(p,{value:st(et,!0)})},multipleSelection(et){C.multiple=!0},remove(et){const lt=C.options,ft=et.detail.remove;lt[ft].selected=!1,C.remove(ft),lt.length>0&&Array.prototype.findIndex.call(lt,ut=>ut.selected)===-1&&(lt[0].selected=!0),i.setValue(p,{value:st(et,!0),items:dt(et)})},clear(et){for(;C.length!==0;)C.remove(0);i.setValue(p,{value:null,items:[]})},insert(et){const{index:lt,displayValue:ft,exportValue:M}=et.detail.insert,ut=C.children[lt],At=document.createElement("option");At.textContent=ft,At.value=M,ut?ut.before(At):C.append(At),i.setValue(p,{value:st(et,!0),items:dt(et)})},items(et){const{items:lt}=et.detail;for(;C.length!==0;)C.remove(0);for(const ft of lt){const{displayValue:M,exportValue:ut}=ft,At=document.createElement("option");At.textContent=M,At.value=ut,C.append(At)}C.options.length>0&&(C.options[0].selected=!0),i.setValue(p,{value:st(et,!0),items:dt(et)})},indices(et){const lt=new Set(et.detail.indices);for(const ft of et.target.options)ft.selected=lt.has(ft.index);i.setValue(p,{value:st(et,!0)})},editable(et){et.target.disabled=!et.detail.editable}};this._dispatchEventFromSandbox(ot,Z)}),C.addEventListener("input",Z=>{var lt;const ot=st(Z,!0),et=st(Z,!1);i.setValue(p,{value:ot}),(lt=this.linkService.eventBus)==null||lt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:p,name:"Keystroke",value:et,changeEx:ot,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(C,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],Z=>Z.target.checked)):C.addEventListener("input",function(Z){i.setValue(p,{value:st(Z,!0)})}),this.data.combo&&this._setTextStyle(C),this._setBackgroundColor(C),this._setDefaultPropertiesFromJS(C),this.container.append(C),this.container}}class s extends v{constructor(i){var A,C,F;const p=!!(((A=i.data.titleObj)==null?void 0:A.str)||((C=i.data.contentsObj)==null?void 0:C.str)||((F=i.data.richText)==null?void 0:F.str));super(i,{isRenderable:p})}render(){const i=["Line","Square","Circle","PolyLine","Polygon","Ink"];if(this.container.className="popupAnnotation",i.includes(this.data.parentType))return this.container;const p=`[data-annotation-id="${this.data.parentId}"]`,A=this.layer.querySelectorAll(p);if(A.length===0)return this.container;const C=new g({container:this.container,trigger:Array.from(A),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),F=this.page,B=u.Util.normalizeRect([this.data.parentRect[0],F.view[3]-this.data.parentRect[1]+F.view[1],this.data.parentRect[2],F.view[3]-this.data.parentRect[3]+F.view[1]]),st=B[0]+this.data.parentRect[2]-this.data.parentRect[0],dt=B[1],[Z,ot,et,lt]=this.viewport.viewBox,ft=et-Z,M=lt-ot;return this.container.style.left=`${100*(st-Z)/ft}%`,this.container.style.top=`${100*(dt-ot)/M}%`,this.container.append(C.render()),this.container}}class g{constructor(i){this.container=i.container,this.trigger=i.trigger,this.color=i.color,this.titleObj=i.titleObj,this.modificationDate=i.modificationDate,this.contentsObj=i.contentsObj,this.richText=i.richText,this.hideWrapper=i.hideWrapper||!1,this.pinned=!1}render(){var st,dt;const p=document.createElement("div");p.className="popupWrapper",this.hideElement=this.hideWrapper?p:this.container,this.hideElement.hidden=!0;const A=document.createElement("div");A.className="popup";const C=this.color;if(C){const Z=.7*(255-C[0])+C[0],ot=.7*(255-C[1])+C[1],et=.7*(255-C[2])+C[2];A.style.backgroundColor=u.Util.makeHexColor(Z|0,ot|0,et|0)}const F=document.createElement("h1");F.dir=this.titleObj.dir,F.textContent=this.titleObj.str,A.append(F);const B=f.PDFDateString.toDateObject(this.modificationDate);if(B){const Z=document.createElement("span");Z.className="popupDate",Z.textContent="{{date}}, {{time}}",Z.dataset.l10nId="annotation_date_string",Z.dataset.l10nArgs=JSON.stringify({date:B.toLocaleDateString(),time:B.toLocaleTimeString()}),A.append(Z)}if(((st=this.richText)==null?void 0:st.str)&&(!((dt=this.contentsObj)!=null&&dt.str)||this.contentsObj.str===this.richText.str))$.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:A}),A.lastChild.className="richText popupContent";else{const Z=this._formatContents(this.contentsObj);A.append(Z)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const Z of this.trigger)Z.addEventListener("click",this._toggle.bind(this)),Z.addEventListener("mouseover",this._show.bind(this,!1)),Z.addEventListener("mouseout",this._hide.bind(this,!1));return A.addEventListener("click",this._hide.bind(this,!0)),p.append(A),p}_formatContents({str:i,dir:p}){const A=document.createElement("p");A.className="popupContent",A.dir=p;const C=i.split(/(?:\r\n?|\n)/);for(let F=0,B=C.length;F<B;++F){const st=C[F];A.append(document.createTextNode(st)),F<B-1&&A.append(document.createElement("br"))}return A}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(i=!1){i&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(i=!0){i&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class w extends v{constructor(i){var A,C,F;const p=!!(i.data.hasPopup||((A=i.data.titleObj)==null?void 0:A.str)||((C=i.data.contentsObj)==null?void 0:C.str)||((F=i.data.richText)==null?void 0:F.str));super(i,{isRenderable:p,ignoreBorder:!0}),this.textContent=i.data.textContent}render(){if(this.container.className="freeTextAnnotation",this.textContent){const i=document.createElement("div");i.className="annotationTextContent",i.setAttribute("role","comment");for(const p of this.textContent){const A=document.createElement("span");A.textContent=p,i.append(A)}this.container.append(i)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class S extends v{constructor(i){var A,C,F;const p=!!(i.data.hasPopup||((A=i.data.titleObj)==null?void 0:A.str)||((C=i.data.contentsObj)==null?void 0:C.str)||((F=i.data.richText)==null?void 0:F.str));super(i,{isRenderable:p,ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const i=this.data,{width:p,height:A}=x(i.rect),C=this.svgFactory.create(p,A,!0),F=this.svgFactory.createElement("svg:line");return F.setAttribute("x1",i.rect[2]-i.lineCoordinates[0]),F.setAttribute("y1",i.rect[3]-i.lineCoordinates[1]),F.setAttribute("x2",i.rect[2]-i.lineCoordinates[2]),F.setAttribute("y2",i.rect[3]-i.lineCoordinates[3]),F.setAttribute("stroke-width",i.borderStyle.width||1),F.setAttribute("stroke","transparent"),F.setAttribute("fill","transparent"),C.append(F),this.container.append(C),this._createPopup(F,i),this.container}}class m extends v{constructor(i){var A,C,F;const p=!!(i.data.hasPopup||((A=i.data.titleObj)==null?void 0:A.str)||((C=i.data.contentsObj)==null?void 0:C.str)||((F=i.data.richText)==null?void 0:F.str));super(i,{isRenderable:p,ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const i=this.data,{width:p,height:A}=x(i.rect),C=this.svgFactory.create(p,A,!0),F=i.borderStyle.width,B=this.svgFactory.createElement("svg:rect");return B.setAttribute("x",F/2),B.setAttribute("y",F/2),B.setAttribute("width",p-F),B.setAttribute("height",A-F),B.setAttribute("stroke-width",F||1),B.setAttribute("stroke","transparent"),B.setAttribute("fill","transparent"),C.append(B),this.container.append(C),this._createPopup(B,i),this.container}}class P extends v{constructor(i){var A,C,F;const p=!!(i.data.hasPopup||((A=i.data.titleObj)==null?void 0:A.str)||((C=i.data.contentsObj)==null?void 0:C.str)||((F=i.data.richText)==null?void 0:F.str));super(i,{isRenderable:p,ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const i=this.data,{width:p,height:A}=x(i.rect),C=this.svgFactory.create(p,A,!0),F=i.borderStyle.width,B=this.svgFactory.createElement("svg:ellipse");return B.setAttribute("cx",p/2),B.setAttribute("cy",A/2),B.setAttribute("rx",p/2-F/2),B.setAttribute("ry",A/2-F/2),B.setAttribute("stroke-width",F||1),B.setAttribute("stroke","transparent"),B.setAttribute("fill","transparent"),C.append(B),this.container.append(C),this._createPopup(B,i),this.container}}class tt extends v{constructor(i){var A,C,F;const p=!!(i.data.hasPopup||((A=i.data.titleObj)==null?void 0:A.str)||((C=i.data.contentsObj)==null?void 0:C.str)||((F=i.data.richText)==null?void 0:F.str));super(i,{isRenderable:p,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const i=this.data,{width:p,height:A}=x(i.rect),C=this.svgFactory.create(p,A,!0);let F=[];for(const st of i.vertices){const dt=st.x-i.rect[0],Z=i.rect[3]-st.y;F.push(dt+","+Z)}F=F.join(" ");const B=this.svgFactory.createElement(this.svgElementName);return B.setAttribute("points",F),B.setAttribute("stroke-width",i.borderStyle.width||1),B.setAttribute("stroke","transparent"),B.setAttribute("fill","transparent"),C.append(B),this.container.append(C),this._createPopup(B,i),this.container}}class it extends tt{constructor(i){super(i),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Q extends v{constructor(i){var A,C,F;const p=!!(i.data.hasPopup||((A=i.data.titleObj)==null?void 0:A.str)||((C=i.data.contentsObj)==null?void 0:C.str)||((F=i.data.richText)==null?void 0:F.str));super(i,{isRenderable:p,ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class K extends v{constructor(i){var A,C,F;const p=!!(i.data.hasPopup||((A=i.data.titleObj)==null?void 0:A.str)||((C=i.data.contentsObj)==null?void 0:C.str)||((F=i.data.richText)==null?void 0:F.str));super(i,{isRenderable:p,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const i=this.data,{width:p,height:A}=x(i.rect),C=this.svgFactory.create(p,A,!0);for(const F of i.inkLists){let B=[];for(const dt of F){const Z=dt.x-i.rect[0],ot=i.rect[3]-dt.y;B.push(`${Z},${ot}`)}B=B.join(" ");const st=this.svgFactory.createElement(this.svgElementName);st.setAttribute("points",B),st.setAttribute("stroke-width",i.borderStyle.width||1),st.setAttribute("stroke","transparent"),st.setAttribute("fill","transparent"),this._createPopup(st,i),C.append(st)}return this.container.append(C),this.container}}class q extends v{constructor(i){var A,C,F;const p=!!(i.data.hasPopup||((A=i.data.titleObj)==null?void 0:A.str)||((C=i.data.contentsObj)==null?void 0:C.str)||((F=i.data.richText)==null?void 0:F.str));super(i,{isRenderable:p,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class G extends v{constructor(i){var A,C,F;const p=!!(i.data.hasPopup||((A=i.data.titleObj)==null?void 0:A.str)||((C=i.data.contentsObj)==null?void 0:C.str)||((F=i.data.richText)==null?void 0:F.str));super(i,{isRenderable:p,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class V extends v{constructor(i){var A,C,F;const p=!!(i.data.hasPopup||((A=i.data.titleObj)==null?void 0:A.str)||((C=i.data.contentsObj)==null?void 0:C.str)||((F=i.data.richText)==null?void 0:F.str));super(i,{isRenderable:p,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class nt extends v{constructor(i){var A,C,F;const p=!!(i.data.hasPopup||((A=i.data.titleObj)==null?void 0:A.str)||((C=i.data.contentsObj)==null?void 0:C.str)||((F=i.data.richText)==null?void 0:F.str));super(i,{isRenderable:p,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class ct extends v{constructor(i){var A,C,F;const p=!!(i.data.hasPopup||((A=i.data.titleObj)==null?void 0:A.str)||((C=i.data.contentsObj)==null?void 0:C.str)||((F=i.data.richText)==null?void 0:F.str));super(i,{isRenderable:p,ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class bt extends v{constructor(i){var C;super(i,{isRenderable:!0});const{filename:p,content:A}=this.data.file;this.filename=(0,f.getFilenameFromUrl)(p),this.content=A,(C=this.linkService.eventBus)==null||C.dispatch("fileattachmentannotation",{source:this,filename:p,content:A})}render(){var p,A;this.container.className="fileAttachmentAnnotation";const i=document.createElement("div");return i.className="popupTriggerArea",i.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(((p=this.data.titleObj)==null?void 0:p.str)||((A=this.data.contentsObj)==null?void 0:A.str)||this.data.richText)&&this._createPopup(i,this.data),this.container.append(i),this.container}_download(){var i;(i=this.downloadManager)==null||i.openOrDownloadData(this.container,this.content,this.filename)}}const Y=class{static render(i){var st,dt;const{annotations:p,div:A,viewport:C,accessibilityManager:F}=i;ht(this,T,Te).call(this,A,C);let B=0;for(const Z of p){if(Z.annotationType!==u.AnnotationType.POPUP){const{width:et,height:lt}=x(Z.rect);if(et<=0||lt<=0)continue}const ot=y.create({data:Z,layer:A,page:i.page,viewport:C,linkService:i.linkService,downloadManager:i.downloadManager,imageResourcesPath:i.imageResourcesPath||"",renderForms:i.renderForms!==!1,svgFactory:new f.DOMSVGFactory,annotationStorage:i.annotationStorage||new O.AnnotationStorage,enableScripting:i.enableScripting,hasJSActions:i.hasJSActions,fieldObjects:i.fieldObjects,mouseState:i.mouseState||{isDown:!1}});if(ot.isRenderable){const et=ot.render();if(Z.hidden&&(et.style.visibility="hidden"),Array.isArray(et))for(const lt of et)lt.style.zIndex=B++,ht(st=Y,h,Ce).call(st,lt,Z.id,A,F);else et.style.zIndex=B++,ot instanceof s?A.prepend(et):ht(dt=Y,h,Ce).call(dt,et,Z.id,A,F)}}ht(this,N,xe).call(this,A,i.annotationCanvasMap)}static update(i){const{annotationCanvasMap:p,div:A,viewport:C}=i;ht(this,T,Te).call(this,A,C),ht(this,N,xe).call(this,A,p),A.hidden=!1}};let j=Y;h=new WeakSet,Ce=function(i,p,A,C){const F=i.firstChild||i;F.id=`${f.AnnotationPrefix}${p}`,A.append(i),C==null||C.moveElementInDOM(A,i,F,!1)},T=new WeakSet,Te=function(i,{width:p,height:A,rotation:C}){const{style:F}=i,B=C%180!==0,st=Math.floor(p)+"px",dt=Math.floor(A)+"px";F.width=B?dt:st,F.height=B?st:dt,i.setAttribute("data-main-rotation",C)},N=new WeakSet,xe=function(i,p){if(!!p){for(const[A,C]of p){const F=i.querySelector(`[data-annotation-id="${A}"]`);if(!F)continue;const{firstChild:B}=F;B?B.nodeName==="CANVAS"?B.replaceWith(C):B.before(C):F.append(C)}p.clear()}},at(j,h),at(j,T),at(j,N),r.AnnotationLayer=j},(z,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ColorConverters=void 0;function L(f){return Math.floor(Math.max(0,Math.min(1,f))*255).toString(16).padStart(2,"0")}class u{static CMYK_G([O,R,$,D]){return["G",1-Math.min(1,.3*O+.59*$+.11*R+D)]}static G_CMYK([O]){return["CMYK",0,0,0,1-O]}static G_RGB([O]){return["RGB",O,O,O]}static G_HTML([O]){const R=L(O);return`#${R}${R}${R}`}static RGB_G([O,R,$]){return["G",.3*O+.59*R+.11*$]}static RGB_HTML([O,R,$]){const D=L(O),d=L(R),E=L($);return`#${D}${d}${E}`}static T_HTML(){return"#00000000"}static CMYK_RGB([O,R,$,D]){return["RGB",1-Math.min(1,O+D),1-Math.min(1,$+D),1-Math.min(1,R+D)]}static CMYK_HTML(O){const R=this.CMYK_RGB(O).slice(1);return this.RGB_HTML(R)}static RGB_CMYK([O,R,$]){const D=1-O,d=1-R,E=1-$,x=Math.min(D,d,E);return["CMYK",D,d,E,x]}}r.ColorConverters=u},(z,r,L)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.XfaLayer=void 0;var u=L(20);class f{static setupStorage(R,$,D,d,E){const x=d.getValue($,{value:null});switch(D.name){case"textarea":if(x.value!==null&&(R.textContent=x.value),E==="print")break;R.addEventListener("input",y=>{d.setValue($,{value:y.target.value})});break;case"input":if(D.attributes.type==="radio"||D.attributes.type==="checkbox"){if(x.value===D.attributes.xfaOn?R.setAttribute("checked",!0):x.value===D.attributes.xfaOff&&R.removeAttribute("checked"),E==="print")break;R.addEventListener("change",y=>{d.setValue($,{value:y.target.checked?y.target.getAttribute("xfaOn"):y.target.getAttribute("xfaOff")})})}else{if(x.value!==null&&R.setAttribute("value",x.value),E==="print")break;R.addEventListener("input",y=>{d.setValue($,{value:y.target.value})})}break;case"select":if(x.value!==null)for(const y of D.children)y.attributes.value===x.value&&(y.attributes.selected=!0);R.addEventListener("input",y=>{const v=y.target.options,a=v.selectedIndex===-1?"":v[v.selectedIndex].value;d.setValue($,{value:a})});break}}static setAttributes({html:R,element:$,storage:D=null,intent:d,linkService:E}){const{attributes:x}=$,y=R instanceof HTMLAnchorElement;x.type==="radio"&&(x.name=`${x.name}-${d}`);for(const[v,a]of Object.entries(x))if(a!=null)switch(v){case"class":a.length&&R.setAttribute(v,a.join(" "));break;case"dataId":break;case"id":R.setAttribute("data-element-id",a);break;case"style":Object.assign(R.style,a);break;case"textContent":R.textContent=a;break;default:(!y||v!=="href"&&v!=="newWindow")&&R.setAttribute(v,a)}y&&E.addLinkAttributes(R,x.href,x.newWindow),D&&x.dataId&&this.setupStorage(R,x.dataId,$,D)}static render(R){var t;const $=R.annotationStorage,D=R.linkService,d=R.xfaHtml,E=R.intent||"display",x=document.createElement(d.name);d.attributes&&this.setAttributes({html:x,element:d,intent:E,linkService:D});const y=[[d,-1,x]],v=R.div;if(v.append(x),R.viewport){const e=`matrix(${R.viewport.transform.join(",")})`;v.style.transform=e}E!=="richText"&&v.setAttribute("class","xfaLayer xfaFont");const a=[];for(;y.length>0;){const[e,o,_]=y.at(-1);if(o+1===e.children.length){y.pop();continue}const b=e.children[++y.at(-1)[1]];if(b===null)continue;const{name:l}=b;if(l==="#text"){const s=document.createTextNode(b.value);a.push(s),_.append(s);continue}let n;if((t=b==null?void 0:b.attributes)!=null&&t.xmlns?n=document.createElementNS(b.attributes.xmlns,l):n=document.createElement(l),_.append(n),b.attributes&&this.setAttributes({html:n,element:b,storage:$,intent:E,linkService:D}),b.children&&b.children.length>0)y.push([b,-1,n]);else if(b.value){const s=document.createTextNode(b.value);u.XfaText.shouldBuildText(l)&&a.push(s),n.append(s)}}for(const e of v.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))e.setAttribute("readOnly",!0);return{textDivs:a}}static update(R){const $=`matrix(${R.viewport.transform.join(",")})`;R.div.style.transform=$,R.div.hidden=!1}}r.XfaLayer=f},(z,r,L)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.TextLayerRenderTask=void 0,r.renderTextLayer=_;var u=L(1),f=L(8);const O=1e5,R=30,$=.8,D=new Map,d=/^\s+$/g;function E(b,l){const n=D.get(b);if(n)return n;l.save(),l.font=`${R}px ${b}`;const s=l.measureText("");let g=s.fontBoundingBoxAscent,w=Math.abs(s.fontBoundingBoxDescent);if(g){l.restore();const m=g/(g+w);return D.set(b,m),m}l.strokeStyle="red",l.clearRect(0,0,R,R),l.strokeText("g",0,0);let S=l.getImageData(0,0,R,R).data;w=0;for(let m=S.length-1-3;m>=0;m-=4)if(S[m]>0){w=Math.ceil(m/4/R);break}l.clearRect(0,0,R,R),l.strokeText("A",0,R),S=l.getImageData(0,0,R,R).data,g=0;for(let m=0,P=S.length;m<P;m+=4)if(S[m]>0){g=R-Math.floor(m/4/R);break}if(l.restore(),g){const m=g/(g+w);return D.set(b,m),m}return D.set(b,$),$}function x(b,l,n,s){const g=document.createElement("span"),w=b._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:l.str!=="",hasEOL:l.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1,fontSize:0}:{angle:0,canvasWidth:0,hasText:l.str!=="",hasEOL:l.hasEOL,fontSize:0};b._textDivs.push(g);const S=u.Util.transform(b._viewport.transform,l.transform);let m=Math.atan2(S[1],S[0]);const P=n[l.fontName];P.vertical&&(m+=Math.PI/2);const tt=Math.hypot(S[2],S[3]),it=tt*E(P.fontFamily,s);let Q,K;m===0?(Q=S[4],K=S[5]-it):(Q=S[4]+it*Math.sin(m),K=S[5]-it*Math.cos(m)),g.style.left=`${Q}px`,g.style.top=`${K}px`,g.style.fontSize=`${tt}px`,g.style.fontFamily=P.fontFamily,w.fontSize=tt,g.setAttribute("role","presentation"),g.textContent=l.str,g.dir=l.dir,b._fontInspectorEnabled&&(g.dataset.fontName=l.fontName),m!==0&&(w.angle=m*(180/Math.PI));let q=!1;if(l.str.length>1||b._enhanceTextSelection&&d.test(l.str))q=!0;else if(l.str!==" "&&l.transform[0]!==l.transform[3]){const G=Math.abs(l.transform[0]),V=Math.abs(l.transform[3]);G!==V&&Math.max(G,V)/Math.min(G,V)>1.5&&(q=!0)}if(q&&(P.vertical?w.canvasWidth=l.height*b._viewport.scale:w.canvasWidth=l.width*b._viewport.scale),b._textDivProperties.set(g,w),b._textContentStream&&b._layoutText(g),b._enhanceTextSelection&&w.hasText){let G=1,V=0;m!==0&&(G=Math.cos(m),V=Math.sin(m));const nt=(P.vertical?l.height:l.width)*b._viewport.scale,ct=tt;let bt,j;m!==0?(bt=[G,V,-V,G,Q,K],j=u.Util.getAxialAlignedBoundingBox([0,0,nt,ct],bt)):j=[Q,K,Q+nt,K+ct],b._bounds.push({left:j[0],top:j[1],right:j[2],bottom:j[3],div:g,size:[nt,ct],m:bt})}}function y(b){if(b._canceled)return;const l=b._textDivs,n=b._capability,s=l.length;if(s>O){b._renderingDone=!0,n.resolve();return}if(!b._textContentStream)for(let g=0;g<s;g++)b._layoutText(l[g]);b._renderingDone=!0,n.resolve()}function v(b,l,n){let s=0;for(let g=0;g<n;g++){const w=b[l++];w>0&&(s=s?Math.min(w,s):w)}return s}function a(b){const l=b._bounds,n=b._viewport,s=t(n.width,n.height,l);for(let g=0;g<s.length;g++){const w=l[g].div,S=b._textDivProperties.get(w);if(S.angle===0){S.paddingLeft=l[g].left-s[g].left,S.paddingTop=l[g].top-s[g].top,S.paddingRight=s[g].right-l[g].right,S.paddingBottom=s[g].bottom-l[g].bottom,b._textDivProperties.set(w,S);continue}const m=s[g],P=l[g],tt=P.m,it=tt[0],Q=tt[1],K=[[0,0],[0,P.size[1]],[P.size[0],0],P.size],q=new Float64Array(64);for(let V=0,nt=K.length;V<nt;V++){const ct=u.Util.applyTransform(K[V],tt);q[V+0]=it&&(m.left-ct[0])/it,q[V+4]=Q&&(m.top-ct[1])/Q,q[V+8]=it&&(m.right-ct[0])/it,q[V+12]=Q&&(m.bottom-ct[1])/Q,q[V+16]=Q&&(m.left-ct[0])/-Q,q[V+20]=it&&(m.top-ct[1])/it,q[V+24]=Q&&(m.right-ct[0])/-Q,q[V+28]=it&&(m.bottom-ct[1])/it,q[V+32]=it&&(m.left-ct[0])/-it,q[V+36]=Q&&(m.top-ct[1])/-Q,q[V+40]=it&&(m.right-ct[0])/-it,q[V+44]=Q&&(m.bottom-ct[1])/-Q,q[V+48]=Q&&(m.left-ct[0])/Q,q[V+52]=it&&(m.top-ct[1])/-it,q[V+56]=Q&&(m.right-ct[0])/Q,q[V+60]=it&&(m.bottom-ct[1])/-it}const G=1+Math.min(Math.abs(it),Math.abs(Q));S.paddingLeft=v(q,32,16)/G,S.paddingTop=v(q,48,16)/G,S.paddingRight=v(q,0,16)/G,S.paddingBottom=v(q,16,16)/G,b._textDivProperties.set(w,S)}}function t(b,l,n){const s=n.map(function(w,S){return{x1:w.left,y1:w.top,x2:w.right,y2:w.bottom,index:S,x1New:void 0,x2New:void 0}});e(b,s);const g=new Array(n.length);for(const w of s){const S=w.index;g[S]={left:w.x1New,top:0,right:w.x2New,bottom:0}}n.map(function(w,S){const m=g[S],P=s[S];P.x1=w.top,P.y1=b-m.right,P.x2=w.bottom,P.y2=b-m.left,P.index=S,P.x1New=void 0,P.x2New=void 0}),e(l,s);for(const w of s){const S=w.index;g[S].top=w.x1New,g[S].bottom=w.x2New}return g}function e(b,l){l.sort(function(g,w){return g.x1-w.x1||g.index-w.index});const s=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const g of l){let w=0;for(;w<s.length&&s[w].end<=g.y1;)w++;let S=s.length-1;for(;S>=0&&s[S].start>=g.y2;)S--;let m,P,tt,it,Q=-1/0;for(tt=w;tt<=S;tt++){m=s[tt],P=m.boundary;let G;P.x2>g.x1?G=P.index>g.index?P.x1New:g.x1:P.x2New===void 0?G=(P.x2+g.x1)/2:G=P.x2New,G>Q&&(Q=G)}for(g.x1New=Q,tt=w;tt<=S;tt++)m=s[tt],P=m.boundary,P.x2New===void 0?P.x2>g.x1?P.index>g.index&&(P.x2New=P.x2):P.x2New=Q:P.x2New>Q&&(P.x2New=Math.max(Q,P.x2));const K=[];let q=null;for(tt=w;tt<=S;tt++){m=s[tt],P=m.boundary;const G=P.x2>g.x2?P:g;q===G?K.at(-1).end=m.end:(K.push({start:m.start,end:m.end,boundary:G}),q=G)}for(s[w].start<g.y1&&(K[0].start=g.y1,K.unshift({start:s[w].start,end:g.y1,boundary:s[w].boundary})),g.y2<s[S].end&&(K.at(-1).end=g.y2,K.push({start:g.y2,end:s[S].end,boundary:s[S].boundary})),tt=w;tt<=S;tt++){if(m=s[tt],P=m.boundary,P.x2New!==void 0)continue;let G=!1;for(it=w-1;!G&&it>=0&&s[it].start>=P.y1;it--)G=s[it].boundary===P;for(it=S+1;!G&&it<s.length&&s[it].end<=P.y2;it++)G=s[it].boundary===P;for(it=0;!G&&it<K.length;it++)G=K[it].boundary===P;G||(P.x2New=Q)}Array.prototype.splice.apply(s,[w,S-w+1,...K])}for(const g of s){const w=g.boundary;w.x2New===void 0&&(w.x2New=Math.max(b,w.x2))}}class o{constructor({textContent:l,textContentStream:n,container:s,viewport:g,textDivs:w,textContentItemsStr:S,enhanceTextSelection:m}){var P;m&&(0,f.deprecated)("The `enhanceTextSelection` functionality will be removed in the future."),this._textContent=l,this._textContentStream=n,this._container=s,this._document=s.ownerDocument,this._viewport=g,this._textDivs=w||[],this._textContentItemsStr=S||[],this._enhanceTextSelection=!!m,this._fontInspectorEnabled=!!((P=globalThis.FontInspector)!=null&&P.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,u.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._devicePixelRatio=globalThis.devicePixelRatio||1,this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new u.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._renderTimer!==null&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(l,n){for(let s=0,g=l.length;s<g;s++){if(l[s].str===void 0){if(l[s].type==="beginMarkedContentProps"||l[s].type==="beginMarkedContent"){const w=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),l[s].id!==null&&this._container.setAttribute("id",`${l[s].id}`),w.append(this._container)}else l[s].type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(l[s].str),x(this,l[s],n,this._layoutTextCtx)}}_layoutText(l){const n=this._textDivProperties.get(l);let s="";if(n.canvasWidth!==0&&n.hasText){const{fontFamily:g}=l.style,{fontSize:w}=n;(w!==this._layoutTextLastFontSize||g!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${w*this._devicePixelRatio}px ${g}`,this._layoutTextLastFontSize=w,this._layoutTextLastFontFamily=g);const{width:S}=this._layoutTextCtx.measureText(l.textContent);if(S>0){const m=this._devicePixelRatio*n.canvasWidth/S;this._enhanceTextSelection&&(n.scale=m),s=`scaleX(${m})`}}if(n.angle!==0&&(s=`rotate(${n.angle}deg) ${s}`),s.length>0&&(this._enhanceTextSelection&&(n.originalTransform=s),l.style.transform=s),n.hasText&&this._container.append(l),n.hasEOL){const g=document.createElement("br");g.setAttribute("role","presentation"),this._container.append(g)}}_render(l=0){const n=(0,u.createPromiseCapability)();let s=Object.create(null);const g=this._document.createElement("canvas");if(g.height=g.width=R,this._layoutTextCtx=g.getContext("2d",{alpha:!1}),this._textContent){const w=this._textContent.items,S=this._textContent.styles;this._processItems(w,S),n.resolve()}else if(this._textContentStream){const w=()=>{this._reader.read().then(({value:S,done:m})=>{if(m){n.resolve();return}Object.assign(s,S.styles),this._processItems(S.items,s),w()},n.reject)};this._reader=this._textContentStream.getReader(),w()}else throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');n.promise.then(()=>{s=null,l?this._renderTimer=setTimeout(()=>{y(this),this._renderTimer=null},l):y(this)},this._capability.reject)}expandTextDivs(l=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;this._bounds!==null&&(a(this),this._bounds=null);const n=[],s=[];for(let g=0,w=this._textDivs.length;g<w;g++){const S=this._textDivs[g],m=this._textDivProperties.get(S);!m.hasText||(l?(n.length=0,s.length=0,m.originalTransform&&n.push(m.originalTransform),m.paddingTop>0?(s.push(`${m.paddingTop}px`),n.push(`translateY(${-m.paddingTop}px)`)):s.push(0),m.paddingRight>0?s.push(`${m.paddingRight/m.scale}px`):s.push(0),m.paddingBottom>0?s.push(`${m.paddingBottom}px`):s.push(0),m.paddingLeft>0?(s.push(`${m.paddingLeft/m.scale}px`),n.push(`translateX(${-m.paddingLeft/m.scale}px)`)):s.push(0),S.style.padding=s.join(" "),n.length&&(S.style.transform=n.join(" "))):(S.style.padding=null,S.style.transform=m.originalTransform))}}}r.TextLayerRenderTask=o;function _(b){const l=new o({textContent:b.textContent,textContentStream:b.textContentStream,container:b.container,viewport:b.viewport,textDivs:b.textDivs,textContentItemsStr:b.textContentItemsStr,enhanceTextSelection:b.enhanceTextSelection});return l._render(b.timeout),l}},(z,r,L)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.SVGGraphics=void 0;var u=L(8),f=L(1),O=L(3);let R=class{constructor(){(0,f.unreachable)("Not implemented: SVGGraphics")}};r.SVGGraphics=R;{let t=function(n){let s=[];const g=[];for(const w of n){if(w.fn==="save"){s.push({fnId:92,fn:"group",items:[]}),g.push(s),s=s.at(-1).items;continue}w.fn==="restore"?s=g.pop():s.push(w)}return s},e=function(n){if(Number.isInteger(n))return n.toString();const s=n.toFixed(10);let g=s.length-1;if(s[g]!=="0")return s;do g--;while(s[g]==="0");return s.substring(0,s[g]==="."?g:g+1)},o=function(n){if(n[4]===0&&n[5]===0){if(n[1]===0&&n[2]===0)return n[0]===1&&n[3]===1?"":`scale(${e(n[0])} ${e(n[3])})`;if(n[0]===n[3]&&n[1]===-n[2]){const s=Math.acos(n[0])*180/Math.PI;return`rotate(${e(s)})`}}else if(n[0]===1&&n[1]===0&&n[2]===0&&n[3]===1)return`translate(${e(n[4])} ${e(n[5])})`;return`matrix(${e(n[0])} ${e(n[1])} ${e(n[2])} ${e(n[3])} ${e(n[4])} ${e(n[5])})`};const $={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},D="http://www.w3.org/XML/1998/namespace",d="http://www.w3.org/1999/xlink",E=["butt","round","square"],x=["miter","round","bevel"],y=function(n,s="",g=!1){if(URL.createObjectURL&&typeof Blob!="undefined"&&!g)return URL.createObjectURL(new Blob([n],{type:s}));const w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let S=`data:${s};base64,`;for(let m=0,P=n.length;m<P;m+=3){const tt=n[m]&255,it=n[m+1]&255,Q=n[m+2]&255,K=tt>>2,q=(tt&3)<<4|it>>4,G=m+1<P?(it&15)<<2|Q>>6:64,V=m+2<P?Q&63:64;S+=w[K]+w[q]+w[G]+w[V]}return S},v=function(){const n=new Uint8Array([137,80,78,71,13,10,26,10]),s=12,g=new Int32Array(256);for(let Q=0;Q<256;Q++){let K=Q;for(let q=0;q<8;q++)K&1?K=3988292384^K>>1&2147483647:K=K>>1&2147483647;g[Q]=K}function w(Q,K,q){let G=-1;for(let V=K;V<q;V++){const nt=(G^Q[V])&255,ct=g[nt];G=G>>>8^ct}return G^-1}function S(Q,K,q,G){let V=G;const nt=K.length;q[V]=nt>>24&255,q[V+1]=nt>>16&255,q[V+2]=nt>>8&255,q[V+3]=nt&255,V+=4,q[V]=Q.charCodeAt(0)&255,q[V+1]=Q.charCodeAt(1)&255,q[V+2]=Q.charCodeAt(2)&255,q[V+3]=Q.charCodeAt(3)&255,V+=4,q.set(K,V),V+=K.length;const ct=w(q,G+4,V);q[V]=ct>>24&255,q[V+1]=ct>>16&255,q[V+2]=ct>>8&255,q[V+3]=ct&255}function m(Q,K,q){let G=1,V=0;for(let nt=K;nt<q;++nt)G=(G+(Q[nt]&255))%65521,V=(V+G)%65521;return V<<16|G}function P(Q){if(!O.isNodeJS)return tt(Q);try{let K;parseInt(process.versions.node)>=8?K=Q:K=Buffer.from(Q);const q=require("zlib").deflateSync(K,{level:9});return q instanceof Uint8Array?q:new Uint8Array(q)}catch(K){(0,f.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+K)}return tt(Q)}function tt(Q){let K=Q.length;const q=65535,G=Math.ceil(K/q),V=new Uint8Array(2+K+G*5+4);let nt=0;V[nt++]=120,V[nt++]=156;let ct=0;for(;K>q;)V[nt++]=0,V[nt++]=255,V[nt++]=255,V[nt++]=0,V[nt++]=0,V.set(Q.subarray(ct,ct+q),nt),nt+=q,ct+=q,K-=q;V[nt++]=1,V[nt++]=K&255,V[nt++]=K>>8&255,V[nt++]=~K&65535&255,V[nt++]=(~K&65535)>>8&255,V.set(Q.subarray(ct),nt),nt+=Q.length-ct;const bt=m(Q,0,Q.length);return V[nt++]=bt>>24&255,V[nt++]=bt>>16&255,V[nt++]=bt>>8&255,V[nt++]=bt&255,V}function it(Q,K,q,G){const V=Q.width,nt=Q.height;let ct,bt,j;const h=Q.data;switch(K){case f.ImageKind.GRAYSCALE_1BPP:bt=0,ct=1,j=V+7>>3;break;case f.ImageKind.RGB_24BPP:bt=2,ct=8,j=V*3;break;case f.ImageKind.RGBA_32BPP:bt=6,ct=8,j=V*4;break;default:throw new Error("invalid format")}const c=new Uint8Array((1+j)*nt);let T=0,I=0;for(let p=0;p<nt;++p)c[T++]=0,c.set(h.subarray(I,I+j),T),I+=j,T+=j;if(K===f.ImageKind.GRAYSCALE_1BPP&&G){T=0;for(let p=0;p<nt;p++){T++;for(let A=0;A<j;A++)c[T++]^=255}}const N=new Uint8Array([V>>24&255,V>>16&255,V>>8&255,V&255,nt>>24&255,nt>>16&255,nt>>8&255,nt&255,ct,bt,0,0,0]),U=P(c),Y=n.length+s*3+N.length+U.length,X=new Uint8Array(Y);let i=0;return X.set(n,i),i+=n.length,S("IHDR",N,X,i),i+=s+N.length,S("IDATA",U,X,i),i+=s+U.length,S("IEND",new Uint8Array(0),X,i),y(X,"image/png",q)}return function(K,q,G){const V=K.kind===void 0?f.ImageKind.GRAYSCALE_1BPP:K.kind;return it(K,V,q,G)}}();class a{constructor(){this.fontSizeScale=1,this.fontWeight=$.fontWeight,this.fontSize=0,this.textMatrix=f.IDENTITY_MATRIX,this.fontMatrix=f.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=f.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=$.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(s,g){this.x=s,this.y=g}}let _=0,b=0,l=0;r.SVGGraphics=R=class{constructor(n,s,g=!1){(0,u.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new u.DOMSVGFactory,this.current=new a,this.transformMatrix=f.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=n,this.objs=s,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!g,this._operatorIdMapping=[];for(const w in f.OPS)this._operatorIdMapping[f.OPS[w]]=w}save(){this.transformStack.push(this.transformMatrix);const n=this.current;this.extraStack.push(n),this.current=n.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(n){this.save(),this.executeOpTree(n),this.restore()}loadDependencies(n){const s=n.fnArray,g=n.argsArray;for(let w=0,S=s.length;w<S;w++)if(s[w]===f.OPS.dependency)for(const m of g[w]){const P=m.startsWith("g_")?this.commonObjs:this.objs,tt=new Promise(it=>{P.get(m,it)});this.current.dependencies.push(tt)}return Promise.all(this.current.dependencies)}transform(n,s,g,w,S,m){const P=[n,s,g,w,S,m];this.transformMatrix=f.Util.transform(this.transformMatrix,P),this.tgrp=null}getSVG(n,s){this.viewport=s;const g=this._initialize(s);return this.loadDependencies(n).then(()=>(this.transformMatrix=f.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(n)),g))}convertOpList(n){const s=this._operatorIdMapping,g=n.argsArray,w=n.fnArray,S=[];for(let m=0,P=w.length;m<P;m++){const tt=w[m];S.push({fnId:tt,fn:s[tt],args:g[m]})}return t(S)}executeOpTree(n){for(const s of n){const g=s.fn,w=s.fnId,S=s.args;switch(w|0){case f.OPS.beginText:this.beginText();break;case f.OPS.dependency:break;case f.OPS.setLeading:this.setLeading(S);break;case f.OPS.setLeadingMoveText:this.setLeadingMoveText(S[0],S[1]);break;case f.OPS.setFont:this.setFont(S);break;case f.OPS.showText:this.showText(S[0]);break;case f.OPS.showSpacedText:this.showText(S[0]);break;case f.OPS.endText:this.endText();break;case f.OPS.moveText:this.moveText(S[0],S[1]);break;case f.OPS.setCharSpacing:this.setCharSpacing(S[0]);break;case f.OPS.setWordSpacing:this.setWordSpacing(S[0]);break;case f.OPS.setHScale:this.setHScale(S[0]);break;case f.OPS.setTextMatrix:this.setTextMatrix(S[0],S[1],S[2],S[3],S[4],S[5]);break;case f.OPS.setTextRise:this.setTextRise(S[0]);break;case f.OPS.setTextRenderingMode:this.setTextRenderingMode(S[0]);break;case f.OPS.setLineWidth:this.setLineWidth(S[0]);break;case f.OPS.setLineJoin:this.setLineJoin(S[0]);break;case f.OPS.setLineCap:this.setLineCap(S[0]);break;case f.OPS.setMiterLimit:this.setMiterLimit(S[0]);break;case f.OPS.setFillRGBColor:this.setFillRGBColor(S[0],S[1],S[2]);break;case f.OPS.setStrokeRGBColor:this.setStrokeRGBColor(S[0],S[1],S[2]);break;case f.OPS.setStrokeColorN:this.setStrokeColorN(S);break;case f.OPS.setFillColorN:this.setFillColorN(S);break;case f.OPS.shadingFill:this.shadingFill(S[0]);break;case f.OPS.setDash:this.setDash(S[0],S[1]);break;case f.OPS.setRenderingIntent:this.setRenderingIntent(S[0]);break;case f.OPS.setFlatness:this.setFlatness(S[0]);break;case f.OPS.setGState:this.setGState(S[0]);break;case f.OPS.fill:this.fill();break;case f.OPS.eoFill:this.eoFill();break;case f.OPS.stroke:this.stroke();break;case f.OPS.fillStroke:this.fillStroke();break;case f.OPS.eoFillStroke:this.eoFillStroke();break;case f.OPS.clip:this.clip("nonzero");break;case f.OPS.eoClip:this.clip("evenodd");break;case f.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case f.OPS.paintImageXObject:this.paintImageXObject(S[0]);break;case f.OPS.paintInlineImageXObject:this.paintInlineImageXObject(S[0]);break;case f.OPS.paintImageMaskXObject:this.paintImageMaskXObject(S[0]);break;case f.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(S[0],S[1]);break;case f.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case f.OPS.closePath:this.closePath();break;case f.OPS.closeStroke:this.closeStroke();break;case f.OPS.closeFillStroke:this.closeFillStroke();break;case f.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case f.OPS.nextLine:this.nextLine();break;case f.OPS.transform:this.transform(S[0],S[1],S[2],S[3],S[4],S[5]);break;case f.OPS.constructPath:this.constructPath(S[0],S[1]);break;case f.OPS.endPath:this.endPath();break;case 92:this.group(s.items);break;default:(0,f.warn)(`Unimplemented operator ${g}`);break}}}setWordSpacing(n){this.current.wordSpacing=n}setCharSpacing(n){this.current.charSpacing=n}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(n,s,g,w,S,m){const P=this.current;P.textMatrix=P.lineMatrix=[n,s,g,w,S,m],P.textMatrixScale=Math.hypot(n,s),P.x=P.lineX=0,P.y=P.lineY=0,P.xcoords=[],P.ycoords=[],P.tspan=this.svgFactory.createElement("svg:tspan"),P.tspan.setAttributeNS(null,"font-family",P.fontFamily),P.tspan.setAttributeNS(null,"font-size",`${e(P.fontSize)}px`),P.tspan.setAttributeNS(null,"y",e(-P.y)),P.txtElement=this.svgFactory.createElement("svg:text"),P.txtElement.append(P.tspan)}beginText(){const n=this.current;n.x=n.lineX=0,n.y=n.lineY=0,n.textMatrix=f.IDENTITY_MATRIX,n.lineMatrix=f.IDENTITY_MATRIX,n.textMatrixScale=1,n.tspan=this.svgFactory.createElement("svg:tspan"),n.txtElement=this.svgFactory.createElement("svg:text"),n.txtgrp=this.svgFactory.createElement("svg:g"),n.xcoords=[],n.ycoords=[]}moveText(n,s){const g=this.current;g.x=g.lineX+=n,g.y=g.lineY+=s,g.xcoords=[],g.ycoords=[],g.tspan=this.svgFactory.createElement("svg:tspan"),g.tspan.setAttributeNS(null,"font-family",g.fontFamily),g.tspan.setAttributeNS(null,"font-size",`${e(g.fontSize)}px`),g.tspan.setAttributeNS(null,"y",e(-g.y))}showText(n){const s=this.current,g=s.font,w=s.fontSize;if(w===0)return;const S=s.fontSizeScale,m=s.charSpacing,P=s.wordSpacing,tt=s.fontDirection,it=s.textHScale*tt,Q=g.vertical,K=Q?1:-1,q=g.defaultVMetrics,G=w*s.fontMatrix[0];let V=0;for(const bt of n){if(bt===null){V+=tt*P;continue}else if(typeof bt=="number"){V+=K*bt*w/1e3;continue}const j=(bt.isSpace?P:0)+m,h=bt.fontChar;let c,T,I=bt.width;if(Q){let U;const Y=bt.vmetric||q;U=bt.vmetric?Y[1]:I*.5,U=-U*G;const X=Y[2]*G;I=Y?-Y[0]:I,c=U/S,T=(V+X)/S}else c=V/S,T=0;(bt.isInFont||g.missingFile)&&(s.xcoords.push(s.x+c),Q&&s.ycoords.push(-s.y+T),s.tspan.textContent+=h);let N;Q?N=I*G-j*tt:N=I*G+j*tt,V+=N}s.tspan.setAttributeNS(null,"x",s.xcoords.map(e).join(" ")),Q?s.tspan.setAttributeNS(null,"y",s.ycoords.map(e).join(" ")):s.tspan.setAttributeNS(null,"y",e(-s.y)),Q?s.y-=V:s.x+=V*it,s.tspan.setAttributeNS(null,"font-family",s.fontFamily),s.tspan.setAttributeNS(null,"font-size",`${e(s.fontSize)}px`),s.fontStyle!==$.fontStyle&&s.tspan.setAttributeNS(null,"font-style",s.fontStyle),s.fontWeight!==$.fontWeight&&s.tspan.setAttributeNS(null,"font-weight",s.fontWeight);const nt=s.textRenderingMode&f.TextRenderingMode.FILL_STROKE_MASK;if(nt===f.TextRenderingMode.FILL||nt===f.TextRenderingMode.FILL_STROKE?(s.fillColor!==$.fillColor&&s.tspan.setAttributeNS(null,"fill",s.fillColor),s.fillAlpha<1&&s.tspan.setAttributeNS(null,"fill-opacity",s.fillAlpha)):s.textRenderingMode===f.TextRenderingMode.ADD_TO_PATH?s.tspan.setAttributeNS(null,"fill","transparent"):s.tspan.setAttributeNS(null,"fill","none"),nt===f.TextRenderingMode.STROKE||nt===f.TextRenderingMode.FILL_STROKE){const bt=1/(s.textMatrixScale||1);this._setStrokeAttributes(s.tspan,bt)}let ct=s.textMatrix;s.textRise!==0&&(ct=ct.slice(),ct[5]+=s.textRise),s.txtElement.setAttributeNS(null,"transform",`${o(ct)} scale(${e(it)}, -1)`),s.txtElement.setAttributeNS(D,"xml:space","preserve"),s.txtElement.append(s.tspan),s.txtgrp.append(s.txtElement),this._ensureTransformGroup().append(s.txtElement)}setLeadingMoveText(n,s){this.setLeading(-s),this.moveText(n,s)}addFontStyle(n){if(!n.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const s=y(n.data,n.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${n.loadedName}"; src: url(${s}); }
`}setFont(n){const s=this.current,g=this.commonObjs.get(n[0]);let w=n[1];s.font=g,this.embedFonts&&!g.missingFile&&!this.embeddedFonts[g.loadedName]&&(this.addFontStyle(g),this.embeddedFonts[g.loadedName]=g),s.fontMatrix=g.fontMatrix||f.FONT_IDENTITY_MATRIX;let S="normal";g.black?S="900":g.bold&&(S="bold");const m=g.italic?"italic":"normal";w<0?(w=-w,s.fontDirection=-1):s.fontDirection=1,s.fontSize=w,s.fontFamily=g.loadedName,s.fontWeight=S,s.fontStyle=m,s.tspan=this.svgFactory.createElement("svg:tspan"),s.tspan.setAttributeNS(null,"y",e(-s.y)),s.xcoords=[],s.ycoords=[]}endText(){var s;const n=this.current;n.textRenderingMode&f.TextRenderingMode.ADD_TO_PATH_FLAG&&((s=n.txtElement)==null?void 0:s.hasChildNodes())&&(n.element=n.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(n){n>0&&(this.current.lineWidth=n)}setLineCap(n){this.current.lineCap=E[n]}setLineJoin(n){this.current.lineJoin=x[n]}setMiterLimit(n){this.current.miterLimit=n}setStrokeAlpha(n){this.current.strokeAlpha=n}setStrokeRGBColor(n,s,g){this.current.strokeColor=f.Util.makeHexColor(n,s,g)}setFillAlpha(n){this.current.fillAlpha=n}setFillRGBColor(n,s,g){this.current.fillColor=f.Util.makeHexColor(n,s,g),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(n){this.current.strokeColor=this._makeColorN_Pattern(n)}setFillColorN(n){this.current.fillColor=this._makeColorN_Pattern(n)}shadingFill(n){const s=this.viewport.width,g=this.viewport.height,w=f.Util.inverseTransform(this.transformMatrix),S=f.Util.applyTransform([0,0],w),m=f.Util.applyTransform([0,g],w),P=f.Util.applyTransform([s,0],w),tt=f.Util.applyTransform([s,g],w),it=Math.min(S[0],m[0],P[0],tt[0]),Q=Math.min(S[1],m[1],P[1],tt[1]),K=Math.max(S[0],m[0],P[0],tt[0]),q=Math.max(S[1],m[1],P[1],tt[1]),G=this.svgFactory.createElement("svg:rect");G.setAttributeNS(null,"x",it),G.setAttributeNS(null,"y",Q),G.setAttributeNS(null,"width",K-it),G.setAttributeNS(null,"height",q-Q),G.setAttributeNS(null,"fill",this._makeShadingPattern(n)),this.current.fillAlpha<1&&G.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(G)}_makeColorN_Pattern(n){return n[0]==="TilingPattern"?this._makeTilingPattern(n):this._makeShadingPattern(n)}_makeTilingPattern(n){const s=n[1],g=n[2],w=n[3]||f.IDENTITY_MATRIX,[S,m,P,tt]=n[4],it=n[5],Q=n[6],K=n[7],q=`shading${l++}`,[G,V,nt,ct]=f.Util.normalizeRect([...f.Util.applyTransform([S,m],w),...f.Util.applyTransform([P,tt],w)]),[bt,j]=f.Util.singularValueDecompose2dScale(w),h=it*bt,c=Q*j,T=this.svgFactory.createElement("svg:pattern");T.setAttributeNS(null,"id",q),T.setAttributeNS(null,"patternUnits","userSpaceOnUse"),T.setAttributeNS(null,"width",h),T.setAttributeNS(null,"height",c),T.setAttributeNS(null,"x",`${G}`),T.setAttributeNS(null,"y",`${V}`);const I=this.svg,N=this.transformMatrix,U=this.current.fillColor,Y=this.current.strokeColor,X=this.svgFactory.create(nt-G,ct-V);if(this.svg=X,this.transformMatrix=w,K===2){const i=f.Util.makeHexColor(...s);this.current.fillColor=i,this.current.strokeColor=i}return this.executeOpTree(this.convertOpList(g)),this.svg=I,this.transformMatrix=N,this.current.fillColor=U,this.current.strokeColor=Y,T.append(X.childNodes[0]),this.defs.append(T),`url(#${q})`}_makeShadingPattern(n){switch(typeof n=="string"&&(n=this.objs.get(n)),n[0]){case"RadialAxial":const s=`shading${l++}`,g=n[3];let w;switch(n[1]){case"axial":const S=n[4],m=n[5];w=this.svgFactory.createElement("svg:linearGradient"),w.setAttributeNS(null,"id",s),w.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),w.setAttributeNS(null,"x1",S[0]),w.setAttributeNS(null,"y1",S[1]),w.setAttributeNS(null,"x2",m[0]),w.setAttributeNS(null,"y2",m[1]);break;case"radial":const P=n[4],tt=n[5],it=n[6],Q=n[7];w=this.svgFactory.createElement("svg:radialGradient"),w.setAttributeNS(null,"id",s),w.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),w.setAttributeNS(null,"cx",tt[0]),w.setAttributeNS(null,"cy",tt[1]),w.setAttributeNS(null,"r",Q),w.setAttributeNS(null,"fx",P[0]),w.setAttributeNS(null,"fy",P[1]),w.setAttributeNS(null,"fr",it);break;default:throw new Error(`Unknown RadialAxial type: ${n[1]}`)}for(const S of g){const m=this.svgFactory.createElement("svg:stop");m.setAttributeNS(null,"offset",S[0]),m.setAttributeNS(null,"stop-color",S[1]),w.append(m)}return this.defs.append(w),`url(#${s})`;case"Mesh":return(0,f.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${n[0]}`)}}setDash(n,s){this.current.dashArray=n,this.current.dashPhase=s}constructPath(n,s){const g=this.current;let w=g.x,S=g.y,m=[],P=0;for(const tt of n)switch(tt|0){case f.OPS.rectangle:w=s[P++],S=s[P++];const it=s[P++],Q=s[P++],K=w+it,q=S+Q;m.push("M",e(w),e(S),"L",e(K),e(S),"L",e(K),e(q),"L",e(w),e(q),"Z");break;case f.OPS.moveTo:w=s[P++],S=s[P++],m.push("M",e(w),e(S));break;case f.OPS.lineTo:w=s[P++],S=s[P++],m.push("L",e(w),e(S));break;case f.OPS.curveTo:w=s[P+4],S=s[P+5],m.push("C",e(s[P]),e(s[P+1]),e(s[P+2]),e(s[P+3]),e(w),e(S)),P+=6;break;case f.OPS.curveTo2:m.push("C",e(w),e(S),e(s[P]),e(s[P+1]),e(s[P+2]),e(s[P+3])),w=s[P+2],S=s[P+3],P+=4;break;case f.OPS.curveTo3:w=s[P+2],S=s[P+3],m.push("C",e(s[P]),e(s[P+1]),e(w),e(S),e(w),e(S)),P+=4;break;case f.OPS.closePath:m.push("Z");break}m=m.join(" "),g.path&&n.length>0&&n[0]!==f.OPS.rectangle&&n[0]!==f.OPS.moveTo?m=g.path.getAttributeNS(null,"d")+m:(g.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(g.path)),g.path.setAttributeNS(null,"d",m),g.path.setAttributeNS(null,"fill","none"),g.element=g.path,g.setCurrentPoint(w,S)}endPath(){const n=this.current;if(n.path=null,!this.pendingClip)return;if(!n.element){this.pendingClip=null;return}const s=`clippath${_++}`,g=this.svgFactory.createElement("svg:clipPath");g.setAttributeNS(null,"id",s),g.setAttributeNS(null,"transform",o(this.transformMatrix));const w=n.element.cloneNode(!0);if(this.pendingClip==="evenodd"?w.setAttributeNS(null,"clip-rule","evenodd"):w.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,g.append(w),this.defs.append(g),n.activeClipUrl){n.clipGroup=null;for(const S of this.extraStack)S.clipGroup=null;g.setAttributeNS(null,"clip-path",n.activeClipUrl)}n.activeClipUrl=`url(#${s})`,this.tgrp=null}clip(n){this.pendingClip=n}closePath(){const n=this.current;if(n.path){const s=`${n.path.getAttributeNS(null,"d")}Z`;n.path.setAttributeNS(null,"d",s)}}setLeading(n){this.current.leading=-n}setTextRise(n){this.current.textRise=n}setTextRenderingMode(n){this.current.textRenderingMode=n}setHScale(n){this.current.textHScale=n/100}setRenderingIntent(n){}setFlatness(n){}setGState(n){for(const[s,g]of n)switch(s){case"LW":this.setLineWidth(g);break;case"LC":this.setLineCap(g);break;case"LJ":this.setLineJoin(g);break;case"ML":this.setMiterLimit(g);break;case"D":this.setDash(g[0],g[1]);break;case"RI":this.setRenderingIntent(g);break;case"FL":this.setFlatness(g);break;case"Font":this.setFont(g);break;case"CA":this.setStrokeAlpha(g);break;case"ca":this.setFillAlpha(g);break;default:(0,f.warn)(`Unimplemented graphic state operator ${s}`);break}}fill(){const n=this.current;n.element&&(n.element.setAttributeNS(null,"fill",n.fillColor),n.element.setAttributeNS(null,"fill-opacity",n.fillAlpha),this.endPath())}stroke(){const n=this.current;n.element&&(this._setStrokeAttributes(n.element),n.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(n,s=1){const g=this.current;let w=g.dashArray;s!==1&&w.length>0&&(w=w.map(function(S){return s*S})),n.setAttributeNS(null,"stroke",g.strokeColor),n.setAttributeNS(null,"stroke-opacity",g.strokeAlpha),n.setAttributeNS(null,"stroke-miterlimit",e(g.miterLimit)),n.setAttributeNS(null,"stroke-linecap",g.lineCap),n.setAttributeNS(null,"stroke-linejoin",g.lineJoin),n.setAttributeNS(null,"stroke-width",e(s*g.lineWidth)+"px"),n.setAttributeNS(null,"stroke-dasharray",w.map(e).join(" ")),n.setAttributeNS(null,"stroke-dashoffset",e(s*g.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const n=this.svgFactory.createElement("svg:rect");n.setAttributeNS(null,"x","0"),n.setAttributeNS(null,"y","0"),n.setAttributeNS(null,"width","1px"),n.setAttributeNS(null,"height","1px"),n.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(n)}paintImageXObject(n){const s=n.startsWith("g_")?this.commonObjs.get(n):this.objs.get(n);if(!s){(0,f.warn)(`Dependent image with object ID ${n} is not ready yet`);return}this.paintInlineImageXObject(s)}paintInlineImageXObject(n,s){const g=n.width,w=n.height,S=v(n,this.forceDataSchema,!!s),m=this.svgFactory.createElement("svg:rect");m.setAttributeNS(null,"x","0"),m.setAttributeNS(null,"y","0"),m.setAttributeNS(null,"width",e(g)),m.setAttributeNS(null,"height",e(w)),this.current.element=m,this.clip("nonzero");const P=this.svgFactory.createElement("svg:image");P.setAttributeNS(d,"xlink:href",S),P.setAttributeNS(null,"x","0"),P.setAttributeNS(null,"y",e(-w)),P.setAttributeNS(null,"width",e(g)+"px"),P.setAttributeNS(null,"height",e(w)+"px"),P.setAttributeNS(null,"transform",`scale(${e(1/g)} ${e(-1/w)})`),s?s.append(P):this._ensureTransformGroup().append(P)}paintImageMaskXObject(n){const s=this.current,g=n.width,w=n.height,S=s.fillColor;s.maskId=`mask${b++}`;const m=this.svgFactory.createElement("svg:mask");m.setAttributeNS(null,"id",s.maskId);const P=this.svgFactory.createElement("svg:rect");P.setAttributeNS(null,"x","0"),P.setAttributeNS(null,"y","0"),P.setAttributeNS(null,"width",e(g)),P.setAttributeNS(null,"height",e(w)),P.setAttributeNS(null,"fill",S),P.setAttributeNS(null,"mask",`url(#${s.maskId})`),this.defs.append(m),this._ensureTransformGroup().append(P),this.paintInlineImageXObject(n,m)}paintFormXObjectBegin(n,s){if(Array.isArray(n)&&n.length===6&&this.transform(n[0],n[1],n[2],n[3],n[4],n[5]),s){const g=s[2]-s[0],w=s[3]-s[1],S=this.svgFactory.createElement("svg:rect");S.setAttributeNS(null,"x",s[0]),S.setAttributeNS(null,"y",s[1]),S.setAttributeNS(null,"width",e(g)),S.setAttributeNS(null,"height",e(w)),this.current.element=S,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(n){const s=this.svgFactory.create(n.width,n.height),g=this.svgFactory.createElement("svg:defs");s.append(g),this.defs=g;const w=this.svgFactory.createElement("svg:g");return w.setAttributeNS(null,"transform",o(n.transform)),s.append(w),this.svg=w,s}_ensureClipGroup(){if(!this.current.clipGroup){const n=this.svgFactory.createElement("svg:g");n.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(n),this.current.clipGroup=n}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",o(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}},(z,r,L)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.PDFNodeStream=void 0;var u=L(1),f=L(33);const O=require$$4,R=require$$4,$=require$$4,D=require$$4,d=/^file:\/\/\/[a-zA-Z]:\//;function E(b){const l=D.parse(b);return l.protocol==="file:"||l.host?l:/^[a-z]:[/\\]/i.test(b)?D.parse(`file:///${b}`):(l.host||(l.protocol="file:"),l)}class x{constructor(l){this.source=l,this.url=E(l.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&l.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var l,n;return(n=(l=this._fullRequestReader)==null?void 0:l._loaded)!=null?n:0}getFullReader(){return(0,u.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new o(this):new t(this),this._fullRequestReader}getRangeReader(l,n){if(n<=this._progressiveDataLength)return null;const s=this.isFsUrl?new _(this,l,n):new e(this,l,n);return this._rangeRequestReaders.push(s),s}cancelAllRequests(l){this._fullRequestReader&&this._fullRequestReader.cancel(l);for(const n of this._rangeRequestReaders.slice(0))n.cancel(l)}}r.PDFNodeStream=x;class y{constructor(l){this._url=l.url,this._done=!1,this._storedError=null,this.onProgress=null;const n=l.source;this._contentLength=n.length,this._loaded=0,this._filename=null,this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange,this._readableStream=null,this._readCapability=(0,u.createPromiseCapability)(),this._headersCapability=(0,u.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const l=this._readableStream.read();return l===null?(this._readCapability=(0,u.createPromiseCapability)(),this.read()):(this._loaded+=l.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(l).buffer,done:!1})}cancel(l){if(!this._readableStream){this._error(l);return}this._readableStream.destroy(l)}_error(l){this._storedError=l,this._readCapability.resolve()}_setReadableStream(l){this._readableStream=l,l.on("readable",()=>{this._readCapability.resolve()}),l.on("end",()=>{l.destroy(),this._done=!0,this._readCapability.resolve()}),l.on("error",n=>{this._error(n)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new u.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class v{constructor(l){this._url=l.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,u.createPromiseCapability)();const n=l.source;this._isStreamingSupported=!n.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const l=this._readableStream.read();return l===null?(this._readCapability=(0,u.createPromiseCapability)(),this.read()):(this._loaded+=l.length,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(l).buffer,done:!1})}cancel(l){if(!this._readableStream){this._error(l);return}this._readableStream.destroy(l)}_error(l){this._storedError=l,this._readCapability.resolve()}_setReadableStream(l){this._readableStream=l,l.on("readable",()=>{this._readCapability.resolve()}),l.on("end",()=>{l.destroy(),this._done=!0,this._readCapability.resolve()}),l.on("error",n=>{this._error(n)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function a(b,l){return{protocol:b.protocol,auth:b.auth,host:b.hostname,port:b.port,path:b.path,method:"GET",headers:l}}class t extends y{constructor(l){super(l);const n=s=>{if(s.statusCode===404){const m=new u.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=m,this._headersCapability.reject(m);return}this._headersCapability.resolve(),this._setReadableStream(s);const g=m=>this._readableStream.headers[m.toLowerCase()],{allowRangeRequests:w,suggestedLength:S}=(0,f.validateRangeRequestCapabilities)({getResponseHeader:g,isHttp:l.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=w,this._contentLength=S||this._contentLength,this._filename=(0,f.extractFilenameFromHeader)(g)};this._request=null,this._url.protocol==="http:"?this._request=R.request(a(this._url,l.httpHeaders),n):this._request=$.request(a(this._url,l.httpHeaders),n),this._request.on("error",s=>{this._storedError=s,this._headersCapability.reject(s)}),this._request.end()}}class e extends v{constructor(l,n,s){super(l),this._httpHeaders={};for(const w in l.httpHeaders){const S=l.httpHeaders[w];typeof S!="undefined"&&(this._httpHeaders[w]=S)}this._httpHeaders.Range=`bytes=${n}-${s-1}`;const g=w=>{if(w.statusCode===404){const S=new u.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=S;return}this._setReadableStream(w)};this._request=null,this._url.protocol==="http:"?this._request=R.request(a(this._url,this._httpHeaders),g):this._request=$.request(a(this._url,this._httpHeaders),g),this._request.on("error",w=>{this._storedError=w}),this._request.end()}}class o extends y{constructor(l){super(l);let n=decodeURIComponent(this._url.path);d.test(this._url.href)&&(n=n.replace(/^\//,"")),O.lstat(n,(s,g)=>{if(s){s.code==="ENOENT"&&(s=new u.MissingPDFException(`Missing PDF "${n}".`)),this._storedError=s,this._headersCapability.reject(s);return}this._contentLength=g.size,this._setReadableStream(O.createReadStream(n)),this._headersCapability.resolve()})}}class _ extends v{constructor(l,n,s){super(l);let g=decodeURIComponent(this._url.path);d.test(this._url.href)&&(g=g.replace(/^\//,"")),this._setReadableStream(O.createReadStream(g,{start:n,end:s-1}))}}},(z,r,L)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.createResponseStatusError=D,r.extractFilenameFromHeader=$,r.validateRangeRequestCapabilities=R,r.validateResponseStatus=d;var u=L(1),f=L(34),O=L(8);function R({getResponseHeader:E,isHttp:x,rangeChunkSize:y,disableRange:v}){const a={allowRangeRequests:!1,suggestedLength:void 0},t=parseInt(E("Content-Length"),10);return!Number.isInteger(t)||(a.suggestedLength=t,t<=2*y)||v||!x||E("Accept-Ranges")!=="bytes"||(E("Content-Encoding")||"identity")!=="identity"||(a.allowRangeRequests=!0),a}function $(E){const x=E("Content-Disposition");if(x){let y=(0,f.getFilenameFromContentDispositionHeader)(x);if(y.includes("%"))try{y=decodeURIComponent(y)}catch{}if((0,O.isPdfFile)(y))return y}return null}function D(E,x){return E===404||E===0&&x.startsWith("file:")?new u.MissingPDFException('Missing PDF "'+x+'".'):new u.UnexpectedResponseException(`Unexpected server response (${E}) while retrieving PDF "${x}".`,E)}function d(E){return E===200||E===206}},(z,r,L)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.getFilenameFromContentDispositionHeader=f;var u=L(1);function f(O){let R=!0,$=D("filename\\*","i").exec(O);if($){$=$[1];let t=y($);return t=unescape(t),t=v(t),t=a(t),E(t)}if($=x(O),$){const t=a($);return E(t)}if($=D("filename","i").exec(O),$){$=$[1];let t=y($);return t=a(t),E(t)}function D(t,e){return new RegExp("(?:^|;)\\s*"+t+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',e)}function d(t,e){if(t){if(!/^[\x00-\xFF]+$/.test(e))return e;try{const o=new TextDecoder(t,{fatal:!0}),_=(0,u.stringToBytes)(e);e=o.decode(_),R=!1}catch{}}return e}function E(t){return R&&/[\x80-\xff]/.test(t)&&(t=d("utf-8",t),R&&(t=d("iso-8859-1",t))),t}function x(t){const e=[];let o;const _=D("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(o=_.exec(t))!==null;){let[,l,n,s]=o;if(l=parseInt(l,10),l in e){if(l===0)break;continue}e[l]=[n,s]}const b=[];for(let l=0;l<e.length&&l in e;++l){let[n,s]=e[l];s=y(s),n&&(s=unescape(s),l===0&&(s=v(s))),b.push(s)}return b.join("")}function y(t){if(t.startsWith('"')){const e=t.slice(1).split('\\"');for(let o=0;o<e.length;++o){const _=e[o].indexOf('"');_!==-1&&(e[o]=e[o].slice(0,_),e.length=o+1),e[o]=e[o].replace(/\\(.)/g,"$1")}t=e.join('"')}return t}function v(t){const e=t.indexOf("'");if(e===-1)return t;const o=t.slice(0,e),b=t.slice(e+1).replace(/^[^']*'/,"");return d(o,b)}function a(t){return!t.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(t)?t:t.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(e,o,_,b){if(_==="q"||_==="Q")return b=b.replace(/_/g," "),b=b.replace(/=([0-9a-fA-F]{2})/g,function(l,n){return String.fromCharCode(parseInt(n,16))}),d(o,b);try{b=atob(b)}catch{}return d(o,b)})}return""}},(z,r,L)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.PDFNetworkStream=void 0;var u=L(1),f=L(33);const O=200,R=206;function $(y){const v=y.response;return typeof v!="string"?v:(0,u.stringToBytes)(v).buffer}class D{constructor(v,a={}){this.url=v,this.isHttp=/^https?:/i.test(v),this.httpHeaders=this.isHttp&&a.httpHeaders||Object.create(null),this.withCredentials=a.withCredentials||!1,this.getXhr=a.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(v,a,t){const e={begin:v,end:a};for(const o in t)e[o]=t[o];return this.request(e)}requestFull(v){return this.request(v)}request(v){const a=this.getXhr(),t=this.currXhrId++,e=this.pendingRequests[t]={xhr:a};a.open("GET",this.url),a.withCredentials=this.withCredentials;for(const o in this.httpHeaders){const _=this.httpHeaders[o];typeof _!="undefined"&&a.setRequestHeader(o,_)}return this.isHttp&&"begin"in v&&"end"in v?(a.setRequestHeader("Range",`bytes=${v.begin}-${v.end-1}`),e.expectedStatus=R):e.expectedStatus=O,a.responseType="arraybuffer",v.onError&&(a.onerror=function(o){v.onError(a.status)}),a.onreadystatechange=this.onStateChange.bind(this,t),a.onprogress=this.onProgress.bind(this,t),e.onHeadersReceived=v.onHeadersReceived,e.onDone=v.onDone,e.onError=v.onError,e.onProgress=v.onProgress,a.send(null),t}onProgress(v,a){var e;const t=this.pendingRequests[v];!t||(e=t.onProgress)==null||e.call(t,a)}onStateChange(v,a){var l,n,s;const t=this.pendingRequests[v];if(!t)return;const e=t.xhr;if(e.readyState>=2&&t.onHeadersReceived&&(t.onHeadersReceived(),delete t.onHeadersReceived),e.readyState!==4||!(v in this.pendingRequests))return;if(delete this.pendingRequests[v],e.status===0&&this.isHttp){(l=t.onError)==null||l.call(t,e.status);return}const o=e.status||O;if(!(o===O&&t.expectedStatus===R)&&o!==t.expectedStatus){(n=t.onError)==null||n.call(t,e.status);return}const b=$(e);if(o===R){const g=e.getResponseHeader("Content-Range"),w=/bytes (\d+)-(\d+)\/(\d+)/.exec(g);t.onDone({begin:parseInt(w[1],10),chunk:b})}else b?t.onDone({begin:0,chunk:b}):(s=t.onError)==null||s.call(t,e.status)}getRequestXhr(v){return this.pendingRequests[v].xhr}isPendingRequest(v){return v in this.pendingRequests}abortRequest(v){const a=this.pendingRequests[v].xhr;delete this.pendingRequests[v],a.abort()}}class d{constructor(v){this._source=v,this._manager=new D(v.url,{httpHeaders:v.httpHeaders,withCredentials:v.withCredentials}),this._rangeChunkSize=v.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(v){const a=this._rangeRequestReaders.indexOf(v);a>=0&&this._rangeRequestReaders.splice(a,1)}getFullReader(){return(0,u.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new E(this._manager,this._source),this._fullRequestReader}getRangeReader(v,a){const t=new x(this._manager,v,a);return t.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(t),t}cancelAllRequests(v){var a;(a=this._fullRequestReader)==null||a.cancel(v);for(const t of this._rangeRequestReaders.slice(0))t.cancel(v)}}r.PDFNetworkStream=d;class E{constructor(v,a){this._manager=v;const t={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=a.url,this._fullRequestId=v.requestFull(t),this._headersReceivedCapability=(0,u.createPromiseCapability)(),this._disableRange=a.disableRange||!1,this._contentLength=a.length,this._rangeChunkSize=a.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const v=this._fullRequestId,a=this._manager.getRequestXhr(v),t=_=>a.getResponseHeader(_),{allowRangeRequests:e,suggestedLength:o}=(0,f.validateRangeRequestCapabilities)({getResponseHeader:t,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});e&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=(0,f.extractFilenameFromHeader)(t),this._isRangeSupported&&this._manager.abortRequest(v),this._headersReceivedCapability.resolve()}_onDone(v){if(v&&(this._requests.length>0?this._requests.shift().resolve({value:v.chunk,done:!1}):this._cachedChunks.push(v.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const a of this._requests)a.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(v){this._storedError=(0,f.createResponseStatusError)(v,this._url),this._headersReceivedCapability.reject(this._storedError);for(const a of this._requests)a.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(v){var a;(a=this.onProgress)==null||a.call(this,{loaded:v.loaded,total:v.lengthComputable?v.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const v=(0,u.createPromiseCapability)();return this._requests.push(v),v.promise}cancel(v){this._done=!0,this._headersReceivedCapability.reject(v);for(const a of this._requests)a.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class x{constructor(v,a,t){this._manager=v;const e={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=v.url,this._requestId=v.requestRange(a,t,e),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var v;(v=this.onClosed)==null||v.call(this,this)}_onDone(v){const a=v.chunk;this._requests.length>0?this._requests.shift().resolve({value:a,done:!1}):this._queuedChunk=a,this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(v){this._storedError=(0,f.createResponseStatusError)(v,this._url);for(const a of this._requests)a.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(v){var a;this.isStreamingSupported||(a=this.onProgress)==null||a.call(this,{loaded:v.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const a=this._queuedChunk;return this._queuedChunk=null,{value:a,done:!1}}if(this._done)return{value:void 0,done:!0};const v=(0,u.createPromiseCapability)();return this._requests.push(v),v.promise}cancel(v){this._done=!0;for(const a of this._requests)a.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(z,r,L)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.PDFFetchStream=void 0;var u=L(1),f=L(33);function O(E,x,y){return{method:"GET",headers:E,signal:y.signal,mode:"cors",credentials:x?"include":"same-origin",redirect:"follow"}}function R(E){const x=new Headers;for(const y in E){const v=E[y];typeof v!="undefined"&&x.append(y,v)}return x}class ${constructor(x){this.source=x,this.isHttp=/^https?:/i.test(x.url),this.httpHeaders=this.isHttp&&x.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var x,y;return(y=(x=this._fullRequestReader)==null?void 0:x._loaded)!=null?y:0}getFullReader(){return(0,u.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new D(this),this._fullRequestReader}getRangeReader(x,y){if(y<=this._progressiveDataLength)return null;const v=new d(this,x,y);return this._rangeRequestReaders.push(v),v}cancelAllRequests(x){this._fullRequestReader&&this._fullRequestReader.cancel(x);for(const y of this._rangeRequestReaders.slice(0))y.cancel(x)}}r.PDFFetchStream=$;class D{constructor(x){this._stream=x,this._reader=null,this._loaded=0,this._filename=null;const y=x.source;this._withCredentials=y.withCredentials||!1,this._contentLength=y.length,this._headersCapability=(0,u.createPromiseCapability)(),this._disableRange=y.disableRange||!1,this._rangeChunkSize=y.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!y.disableStream,this._isRangeSupported=!y.disableRange,this._headers=R(this._stream.httpHeaders);const v=y.url;fetch(v,O(this._headers,this._withCredentials,this._abortController)).then(a=>{if(!(0,f.validateResponseStatus)(a.status))throw(0,f.createResponseStatusError)(a.status,v);this._reader=a.body.getReader(),this._headersCapability.resolve();const t=_=>a.headers.get(_),{allowRangeRequests:e,suggestedLength:o}=(0,f.validateRangeRequestCapabilities)({getResponseHeader:t,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=e,this._contentLength=o||this._contentLength,this._filename=(0,f.extractFilenameFromHeader)(t),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new u.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:x,done:y}=await this._reader.read();return y?{value:x,done:y}:(this._loaded+=x.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(x).buffer,done:!1})}cancel(x){this._reader&&this._reader.cancel(x),this._abortController.abort()}}class d{constructor(x,y,v){this._stream=x,this._reader=null,this._loaded=0;const a=x.source;this._withCredentials=a.withCredentials||!1,this._readCapability=(0,u.createPromiseCapability)(),this._isStreamingSupported=!a.disableStream,this._abortController=new AbortController,this._headers=R(this._stream.httpHeaders),this._headers.append("Range",`bytes=${y}-${v-1}`);const t=a.url;fetch(t,O(this._headers,this._withCredentials,this._abortController)).then(e=>{if(!(0,f.validateResponseStatus)(e.status))throw(0,f.createResponseStatusError)(e.status,t);this._readCapability.resolve(),this._reader=e.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:x,done:y}=await this._reader.read();return y?{value:x,done:y}:(this._loaded+=x.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(x).buffer,done:!1})}cancel(x){this._reader&&this._reader.cancel(x),this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(z){var r=__webpack_module_cache__[z];if(r!==void 0)return r.exports;var L=__webpack_module_cache__[z]={exports:{}};return __webpack_modules__[z](L,L.exports,__w_pdfjs_require__),L.exports}var __webpack_exports__={};return(()=>{var z=__webpack_exports__;Object.defineProperty(z,"__esModule",{value:!0}),Object.defineProperty(z,"AnnotationEditorLayer",{enumerable:!0,get:function(){return f.AnnotationEditorLayer}}),Object.defineProperty(z,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return r.AnnotationEditorParamsType}}),Object.defineProperty(z,"AnnotationEditorType",{enumerable:!0,get:function(){return r.AnnotationEditorType}}),Object.defineProperty(z,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return O.AnnotationEditorUIManager}}),Object.defineProperty(z,"AnnotationLayer",{enumerable:!0,get:function(){return R.AnnotationLayer}}),Object.defineProperty(z,"AnnotationMode",{enumerable:!0,get:function(){return r.AnnotationMode}}),Object.defineProperty(z,"CMapCompressionType",{enumerable:!0,get:function(){return r.CMapCompressionType}}),Object.defineProperty(z,"GlobalWorkerOptions",{enumerable:!0,get:function(){return $.GlobalWorkerOptions}}),Object.defineProperty(z,"InvalidPDFException",{enumerable:!0,get:function(){return r.InvalidPDFException}}),Object.defineProperty(z,"LoopbackPort",{enumerable:!0,get:function(){return L.LoopbackPort}}),Object.defineProperty(z,"MissingPDFException",{enumerable:!0,get:function(){return r.MissingPDFException}}),Object.defineProperty(z,"OPS",{enumerable:!0,get:function(){return r.OPS}}),Object.defineProperty(z,"PDFDataRangeTransport",{enumerable:!0,get:function(){return L.PDFDataRangeTransport}}),Object.defineProperty(z,"PDFDateString",{enumerable:!0,get:function(){return u.PDFDateString}}),Object.defineProperty(z,"PDFWorker",{enumerable:!0,get:function(){return L.PDFWorker}}),Object.defineProperty(z,"PasswordResponses",{enumerable:!0,get:function(){return r.PasswordResponses}}),Object.defineProperty(z,"PermissionFlag",{enumerable:!0,get:function(){return r.PermissionFlag}}),Object.defineProperty(z,"PixelsPerInch",{enumerable:!0,get:function(){return u.PixelsPerInch}}),Object.defineProperty(z,"RenderingCancelledException",{enumerable:!0,get:function(){return u.RenderingCancelledException}}),Object.defineProperty(z,"SVGGraphics",{enumerable:!0,get:function(){return E.SVGGraphics}}),Object.defineProperty(z,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return r.UNSUPPORTED_FEATURES}}),Object.defineProperty(z,"UnexpectedResponseException",{enumerable:!0,get:function(){return r.UnexpectedResponseException}}),Object.defineProperty(z,"Util",{enumerable:!0,get:function(){return r.Util}}),Object.defineProperty(z,"VerbosityLevel",{enumerable:!0,get:function(){return r.VerbosityLevel}}),Object.defineProperty(z,"XfaLayer",{enumerable:!0,get:function(){return x.XfaLayer}}),Object.defineProperty(z,"build",{enumerable:!0,get:function(){return L.build}}),Object.defineProperty(z,"createPromiseCapability",{enumerable:!0,get:function(){return r.createPromiseCapability}}),Object.defineProperty(z,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return r.createValidAbsoluteUrl}}),Object.defineProperty(z,"getDocument",{enumerable:!0,get:function(){return L.getDocument}}),Object.defineProperty(z,"getFilenameFromUrl",{enumerable:!0,get:function(){return u.getFilenameFromUrl}}),Object.defineProperty(z,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return u.getPdfFilenameFromUrl}}),Object.defineProperty(z,"getXfaPageViewport",{enumerable:!0,get:function(){return u.getXfaPageViewport}}),Object.defineProperty(z,"isPdfFile",{enumerable:!0,get:function(){return u.isPdfFile}}),Object.defineProperty(z,"loadScript",{enumerable:!0,get:function(){return u.loadScript}}),Object.defineProperty(z,"renderTextLayer",{enumerable:!0,get:function(){return d.renderTextLayer}}),Object.defineProperty(z,"shadow",{enumerable:!0,get:function(){return r.shadow}}),Object.defineProperty(z,"version",{enumerable:!0,get:function(){return L.version}});var r=__w_pdfjs_require__(1),L=__w_pdfjs_require__(4),u=__w_pdfjs_require__(8),f=__w_pdfjs_require__(22),O=__w_pdfjs_require__(7),R=__w_pdfjs_require__(27),$=__w_pdfjs_require__(15),D=__w_pdfjs_require__(3),d=__w_pdfjs_require__(30),E=__w_pdfjs_require__(31),x=__w_pdfjs_require__(29);if(D.isNodeJS){const{PDFNodeStream:y}=__w_pdfjs_require__(32);(0,L.setPDFNetworkStreamFactory)(v=>new y(v))}else{const{PDFNetworkStream:y}=__w_pdfjs_require__(35),{PDFFetchStream:v}=__w_pdfjs_require__(36);(0,L.setPDFNetworkStreamFactory)(a=>(0,u.isValidFetchUrl)(a.url)?new v(a):new y(a))}})(),__webpack_exports__})())})(pdf);const gw_opts=pdf.exports.GlobalWorkerOptions,orig_src=gw_opts==null?void 0:gw_opts.workerSrc;let worker_src=orig_src!=null?orig_src:`https://cdn.jsdelivr.net/npm/pdfjs-dist@${pdf.exports.version}/build/pdf.worker.min.js`;function set_worker_src(z){worker_src=z}const PDFWorker=readable(null,z=>{gw_opts.workerSrc=worker_src;const r=new pdf.exports.PDFWorker;return gw_opts.workerSrc=orig_src,z(r),()=>r.destroy()});function create_fragment$4(z){let r;const L=z[5].default,u=create_slot(L,z,z[4],null);return{c(){u&&u.c()},l(f){u&&u.l(f)},m(f,O){u&&u.m(f,O),r=!0},p(f,[O]){u&&u.p&&(!r||O&16)&&update_slot_base(u,L,f,f[4],r?get_slot_changes(L,f[4],O,null):get_all_dirty_from_scope(f[4]),null)},i(f){r||(transition_in(u,f),r=!0)},o(f){transition_out(u,f),r=!1},d(f){u&&u.d(f)}}}const key=Symbol.for("current_doc");function instance$3(z,r,L){let u,f;component_subscribe(z,PDFWorker,a=>L(7,u=a));let{$$slots:O={},$$scope:R}=r;const $=createEventDispatcher();let{file:D=void 0}=r,{loadOptions:d=void 0}=r,{onProgress:E=void 0}=r,x=writable();component_subscribe(z,x,a=>L(8,f=a));let y;setContext(key,x),onDestroy(()=>{f==null||f.destroy(),f==null||f.cleanup(!1)});function v(){const a=f;x.set(null),y=pdf.exports.getDocument(te({url:D,worker:u},d)),y.onProgress=E,y.promise.then(t=>(a==null||a.destroy(),a==null||a.cleanup(),$("loadsuccess",t),t),t=>($("loaderror",t),a)).then(x.set)}return z.$$set=a=>{"file"in a&&L(1,D=a.file),"loadOptions"in a&&L(2,d=a.loadOptions),"onProgress"in a&&L(3,E=a.onProgress),"$$scope"in a&&L(4,R=a.$$scope)},z.$$.update=()=>{z.$$.dirty&6&&v()},[x,D,d,E,R,O]}class Document extends SvelteComponent{constructor(r){super(),init(this,r,instance$3,create_fragment$4,safe_not_equal,{file:1,loadOptions:2,onProgress:3})}}function get_then_context(z){z[11]=z[12].default}function create_catch_block(z){return{c:noop,l:noop,m:noop,p:noop,i:noop,o:noop,d:noop}}function create_then_block(z){get_then_context(z);let r,L,u;var f=z[11];function O(R){return{props:{page:R[2],viewport:R[3],render_text_layer:R[0]==="canvas"?R[1]:void 0}}}return f&&(r=new f(O(z))),{c(){r&&create_component(r.$$.fragment),L=empty()},l(R){r&&claim_component(r.$$.fragment,R),L=empty()},m(R,$){r&&mount_component(r,R,$),insert_hydration(R,L,$),u=!0},p(R,$){get_then_context(R);const D={};if($&4&&(D.page=R[2]),$&8&&(D.viewport=R[3]),$&3&&(D.render_text_layer=R[0]==="canvas"?R[1]:void 0),f!==(f=R[11])){if(r){group_outros();const d=r;transition_out(d.$$.fragment,1,0,()=>{destroy_component(d,1)}),check_outros()}f?(r=new f(O(R)),create_component(r.$$.fragment),transition_in(r.$$.fragment,1),mount_component(r,L.parentNode,L)):r=null}else f&&r.$set(D)},i(R){u||(r&&transition_in(r.$$.fragment,R),u=!0)},o(R){r&&transition_out(r.$$.fragment,R),u=!1},d(R){R&&detach(L),r&&destroy_component(r,R)}}}function create_pending_block(z){return{c:noop,l:noop,m:noop,p:noop,i:noop,o:noop,d:noop}}function create_fragment$3(z){let r,L,u,f={ctx:z,current:null,token:null,hasCatch:!1,pending:create_pending_block,then:create_then_block,catch:create_catch_block,value:12,blocks:[,,,]};return handle_promise(L=z[0]==="canvas"?__vitePreload(()=>import("./PageCanvas-72adde24.js"),["chunks/PageCanvas-72adde24.js","assets/PageCanvas-d0a90c31.css","chunks/index-f48ee692.js","chunks/post-bbcb2a87.js","chunks/BonziButton-6a699db8.js","assets/BonziButton-4a92a33f.css","chunks/preload-helper-780d7a89.js","chunks/paths-396f020f.js"]):Promise.reject("SVG rendering not implemented yet."),f),{c(){r=empty(),f.block.c()},l(O){r=empty(),f.block.l(O)},m(O,R){insert_hydration(O,r,R),f.block.m(O,f.anchor=R),f.mount=()=>r.parentNode,f.anchor=r,u=!0},p(O,[R]){z=O,f.ctx=z,R&1&&L!==(L=z[0]==="canvas"?__vitePreload(()=>import("./PageCanvas-72adde24.js"),["chunks/PageCanvas-72adde24.js","assets/PageCanvas-d0a90c31.css","chunks/index-f48ee692.js","chunks/post-bbcb2a87.js","chunks/BonziButton-6a699db8.js","assets/BonziButton-4a92a33f.css","chunks/preload-helper-780d7a89.js","chunks/paths-396f020f.js"]):Promise.reject("SVG rendering not implemented yet."))&&handle_promise(L,f)||update_await_block_branch(f,z,R)},i(O){u||(transition_in(f.block),u=!0)},o(O){for(let R=0;R<3;R+=1){const $=f.blocks[R];transition_out($)}u=!1},d(O){O&&detach(r),f.block.d(O),f.token=null,f=null}}}function instance$2(z,r,L){let u,{renderer:f="canvas"}=r,{num:O}=r,{scale:R=1}=r,{rotation:$=0}=r,{renderTextLayer:D=!1}=r,{getViewport:d=void 0}=r;onDestroy(()=>x==null?void 0:x.cleanup());const E=getContext(key);component_subscribe(z,E,a=>L(10,u=a));let x,y,v;return z.$$set=a=>{"renderer"in a&&L(0,f=a.renderer),"num"in a&&L(5,O=a.num),"scale"in a&&L(6,R=a.scale),"rotation"in a&&L(7,$=a.rotation),"renderTextLayer"in a&&L(1,D=a.renderTextLayer),"getViewport"in a&&L(8,d=a.getViewport)},z.$$.update=()=>{z.$$.dirty&1056&&(u==null||u.getPage(O).then(a=>L(2,x=a))),z.$$.dirty&320&&L(9,v=d!=null?d:(a,t)=>a.getViewport({scale:R,rotation:t})),z.$$.dirty&644&&x&&L(3,y=v(x,$))},[f,D,x,y,E,O,R,$,d,v,u]}class Page extends SvelteComponent{constructor(r){super(),init(this,r,instance$2,create_fragment$3,not_equal,{renderer:0,num:5,scale:6,rotation:7,renderTextLayer:1,getViewport:8})}}var FileSaver_min={exports:{}};(function(z,r){(function(L,u){u()})(commonjsGlobal,function(){function L(d,E){return typeof E=="undefined"?E={autoBom:!1}:typeof E!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),E={autoBom:!E}),E.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(d.type)?new Blob(["\uFEFF",d],{type:d.type}):d}function u(d,E,x){var y=new XMLHttpRequest;y.open("GET",d),y.responseType="blob",y.onload=function(){D(y.response,E,x)},y.onerror=function(){console.error("could not download file")},y.send()}function f(d){var E=new XMLHttpRequest;E.open("HEAD",d,!1);try{E.send()}catch{}return 200<=E.status&&299>=E.status}function O(d){try{d.dispatchEvent(new MouseEvent("click"))}catch{var E=document.createEvent("MouseEvents");E.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),d.dispatchEvent(E)}}var R=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof commonjsGlobal=="object"&&commonjsGlobal.global===commonjsGlobal?commonjsGlobal:void 0,$=R.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),D=R.saveAs||(typeof window!="object"||window!==R?function(){}:"download"in HTMLAnchorElement.prototype&&!$?function(d,E,x){var y=R.URL||R.webkitURL,v=document.createElement("a");E=E||d.name||"download",v.download=E,v.rel="noopener",typeof d=="string"?(v.href=d,v.origin===location.origin?O(v):f(v.href)?u(d,E,x):O(v,v.target="_blank")):(v.href=y.createObjectURL(d),setTimeout(function(){y.revokeObjectURL(v.href)},4e4),setTimeout(function(){O(v)},0))}:"msSaveOrOpenBlob"in navigator?function(d,E,x){if(E=E||d.name||"download",typeof d!="string")navigator.msSaveOrOpenBlob(L(d,x),E);else if(f(d))u(d,E,x);else{var y=document.createElement("a");y.href=d,y.target="_blank",setTimeout(function(){O(y)})}}:function(d,E,x,y){if(y=y||open("","_blank"),y&&(y.document.title=y.document.body.innerText="downloading..."),typeof d=="string")return u(d,E,x);var v=d.type==="application/octet-stream",a=/constructor/i.test(R.HTMLElement)||R.safari,t=/CriOS\/[\d]+/.test(navigator.userAgent);if((t||v&&a||$)&&typeof FileReader!="undefined"){var e=new FileReader;e.onloadend=function(){var b=e.result;b=t?b:b.replace(/^data:[^;]*;/,"data:attachment/file;"),y?y.location.href=b:location=b,y=null},e.readAsDataURL(d)}else{var o=R.URL||R.webkitURL,_=o.createObjectURL(d);y?y.location=_:location.href=_,y=null,setTimeout(function(){o.revokeObjectURL(_)},4e4)}});R.saveAs=D.saveAs=D,z.exports=D})})(FileSaver_min);var FileSaver=FileSaver_min.exports,PDF_svelte_svelte_type_style_lang="";function create_default_slot_1(z){let r;return{c(){r=text("Download")},l(L){r=claim_text(L,"Download")},m(L,u){insert_hydration(L,r,u)},d(L){L&&detach(r)}}}function create_default_slot$1(z){let r,L,u;return L=new Page({props:{scale,num:z[1],renderTextLayer,rotation,getViewport:void 0}}),{c(){r=element("div"),create_component(L.$$.fragment),this.h()},l(f){r=claim_element(f,"DIV",{class:!0});var O=children(r);claim_component(L.$$.fragment,O),O.forEach(detach),this.h()},h(){attr(r,"class","svelte-mjytni")},m(f,O){insert_hydration(f,r,O),mount_component(L,r,null),u=!0},p(f,O){const R={};O&2&&(R.num=f[1]),L.$set(R)},i(f){u||(transition_in(L.$$.fragment,f),u=!0)},o(f){transition_out(L.$$.fragment,f),u=!1},d(f){f&&detach(r),destroy_component(L)}}}function create_fragment$2(z){let r,L,u,f,O,R,$,D,d,E,x,y,v,a;return d=new Button({props:{class:"download-button",variant:"gradient",$$slots:{default:[create_default_slot_1]},$$scope:{ctx:z}}}),d.$on("click",z[5]),x=new Document({props:{file:z[0],loadOptions:{docBaseUrl:base},$$slots:{default:[create_default_slot$1]},$$scope:{ctx:z}}}),x.$on("loadsuccess",z[6]),x.$on("loaderror",z[7]),{c(){r=element("section"),L=element("div"),u=element("div"),f=text("Page "),O=element("input"),R=text(" of "),$=text(z[2]),D=space(),create_component(d.$$.fragment),E=space(),create_component(x.$$.fragment),this.h()},l(t){r=claim_element(t,"SECTION",{class:!0});var e=children(r);L=claim_element(e,"DIV",{style:!0,class:!0});var o=children(L);u=claim_element(o,"DIV",{style:!0,class:!0});var _=children(u);f=claim_text(_,"Page "),O=claim_element(_,"INPUT",{type:!0,step:!0,min:!0,max:!0}),R=claim_text(_," of "),$=claim_text(_,z[2]),_.forEach(detach),D=claim_space(o),claim_component(d.$$.fragment,o),o.forEach(detach),e.forEach(detach),E=claim_space(t),claim_component(x.$$.fragment,t),this.h()},h(){attr(O,"type","number"),attr(O,"step","1"),attr(O,"min","1"),attr(O,"max",z[2]),set_style(u,"display","flex"),attr(u,"class","svelte-mjytni"),set_style(L,"width","100%"),set_style(L,"display","flex"),set_style(L,"justify-content","space-between"),attr(L,"class","svelte-mjytni"),attr(r,"class","settings style=padding-bottom:1rem")},m(t,e){insert_hydration(t,r,e),append_hydration(r,L),append_hydration(L,u),append_hydration(u,f),append_hydration(u,O),set_input_value(O,z[1]),append_hydration(u,R),append_hydration(u,$),append_hydration(L,D),mount_component(d,L,null),insert_hydration(t,E,e),mount_component(x,t,e),y=!0,v||(a=listen(O,"input",z[4]),v=!0)},p(t,[e]){(!y||e&4)&&attr(O,"max",t[2]),e&2&&to_number(O.value)!==t[1]&&set_input_value(O,t[1]),(!y||e&4)&&set_data($,t[2]);const o={};e&256&&(o.$$scope={dirty:e,ctx:t}),d.$set(o);const _={};e&1&&(_.file=t[0]),e&258&&(_.$$scope={dirty:e,ctx:t}),x.$set(_)},i(t){y||(transition_in(d.$$.fragment,t),transition_in(x.$$.fragment,t),y=!0)},o(t){transition_out(d.$$.fragment,t),transition_out(x.$$.fragment,t),y=!1},d(t){t&&detach(r),destroy_component(d),t&&detach(E),destroy_component(x,t),v=!1,a()}}}let scale=1.4,renderTextLayer=!0,rotation=0;function instance$1(z,r,L){set_worker_src(workerUrl);let u=1,{filename:f}=r,O=1;const R=x=>{let y=x.substring(x.lastIndexOf("/")+1);FileSaver.saveAs(x,y)};function $(){u=to_number(this.value),L(1,u)}const D=()=>R(f),d=x=>{L(2,O=x.detail.numPages),L(1,u=Math.min(u,O))},E=x=>alert(x.detail+"");return z.$$set=x=>{"filename"in x&&L(0,f=x.filename)},[f,u,O,R,$,D,d,E]}class PDF extends SvelteComponent{constructor(r){super(),init(this,r,instance$1,create_fragment$2,safe_not_equal,{filename:0})}}function create_fragment$1(z){let r,L,u,f;return r=new PDF({props:{filename:"/Samuel_Hodges_Resume.pdf"}}),u=new BonziButton({}),{c(){create_component(r.$$.fragment),L=space(),create_component(u.$$.fragment)},l(O){claim_component(r.$$.fragment,O),L=claim_space(O),claim_component(u.$$.fragment,O)},m(O,R){mount_component(r,O,R),insert_hydration(O,L,R),mount_component(u,O,R),f=!0},p:noop,i(O){f||(transition_in(r.$$.fragment,O),transition_in(u.$$.fragment,O),f=!0)},o(O){transition_out(r.$$.fragment,O),transition_out(u.$$.fragment,O),f=!1},d(O){destroy_component(r,O),O&&detach(L),destroy_component(u,O)}}}class Resume extends SvelteComponent{constructor(r){super(),init(this,r,null,create_fragment$1,safe_not_equal,{})}}function create_default_slot(z){let r,L,u,f;return r=new Intro({}),u=new Resume({}),{c(){create_component(r.$$.fragment),L=space(),create_component(u.$$.fragment)},l(O){claim_component(r.$$.fragment,O),L=claim_space(O),claim_component(u.$$.fragment,O)},m(O,R){mount_component(r,O,R),insert_hydration(O,L,R),mount_component(u,O,R),f=!0},i(O){f||(transition_in(r.$$.fragment,O),transition_in(u.$$.fragment,O),f=!0)},o(O){transition_out(r.$$.fragment,O),transition_out(u.$$.fragment,O),f=!1},d(O){destroy_component(r,O),O&&detach(L),destroy_component(u,O)}}}function create_fragment(z){let r,L,u,f;const O=[z[0],metadata];let R={$$slots:{default:[create_default_slot]},$$scope:{ctx:z}};for(let $=0;$<O.length;$+=1)R=assign(R,O[$]);return u=new Post({props:R}),{c(){r=element("meta"),L=space(),create_component(u.$$.fragment),this.h()},l($){const D=query_selector_all('[data-svelte="svelte-1b9u4im"]',document.head);r=claim_element(D,"META",{name:!0,content:!0}),D.forEach(detach),L=claim_space($),claim_component(u.$$.fragment,$),this.h()},h(){document.title="Resume | Samuel Hodges",attr(r,"name","description"),attr(r,"content","A minimal content focused markdown sveltekit template.")},m($,D){append_hydration(document.head,r),insert_hydration($,L,D),mount_component(u,$,D),f=!0},p($,[D]){const d=D&1?get_spread_update(O,[D&1&&get_spread_object($[0]),D&0&&get_spread_object(metadata)]):{};D&2&&(d.$$scope={dirty:D,ctx:$}),u.$set(d)},i($){f||(transition_in(u.$$.fragment,$),f=!0)},o($){transition_out(u.$$.fragment,$),f=!1},d($){detach(r),$&&detach(L),destroy_component(u,$)}}}const metadata={title:"Resume",layout:"post"};function instance(z,r,L){return z.$$set=u=>{L(0,r=assign(assign({},r),exclude_internal_props(u)))},r=exclude_internal_props(r),[r]}class Routes extends SvelteComponent{constructor(r){super(),init(this,r,instance,create_fragment,safe_not_equal,{})}}export{Routes as R,metadata as m,pdf as p};
